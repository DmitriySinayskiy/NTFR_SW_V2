"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d3f6bdd7-d9a4-5d7a-9db9-8be6b47640cc")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7355],{444576:(e,t,n)=>{n.d(t,{A7:()=>s,i4:()=>a,nt:()=>i});var l=n(302245),r=n(333370);let i=e=>e.library.localStyleSelection,a=(0,l.Mz)([i,(e,t)=>t],(e,t)=>e?.type===t?e:null),s=(0,l.Mz)([a,(e,t,n)=>n],(e,t)=>{if(!e)return null;let n=new Set,l=new Set;return e.folderNames.forEach(e=>{let i=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);i&&((0,r.KU)(i).forEach(e=>{n.add(e.name)}),(0,r.dm)(i).forEach(e=>{l.add(e.node_id)}))}),{type:e.type,folderNames:n,styleIds:l}})},173013:(e,t,n)=>{n.r(t),n.d(t,{PropertiesPanel:()=>mp});var l=n(411855),r=n(188507),i=n(346124),a=n(215122),s=n(587670),o=n(534611),c=n(629019),p=n.n(c),d=n(91408),u=n(966712),m=n(498750),h=n(153234),E=n(763658),_=n(448169),y=n(979441),g=n(906899),P=n(169231),S=n(259927),b=n(617453),f=n(369870),v=n(279145),w=n(236192),T=n(233890),I=n(656147),k=n(184027),N=n(766022),C=n(675678),A=n(951158),O=n(776621),M=n(30637),R=n(827586),L=n(271779),x=n(939863);function D(){return null}var F=n(384252),V=n(987067),K=n(293017),U=n(286954),H=n(103907),B=n(672517),G=n(798099),Y=n(297336),W=n(697551),Q=n(356390),z=n(848661),$=n(618056),X=n(189904),j=n(882316),J=n(335601),Z=n(762638),q=n(239349),ee=n(662275),et=n(91271),en=n(509453),el=n(939791),er=n(707458),ei=n(296210),ea=n(96328),es=n(662531),eo=n(601607),ec=n(881824),ep=n(185035),ed=n(330654);let eu=ed.object({description:ed.string()}),em=ed.object({status:ed.enum(["idle","loading","error"]),currentCode:ed.string().optional(),messages:ed.array(ep.zo),interactions:ed.array(eu)}),eh={status:"idle",messages:[],interactions:[]},eE="livefish";async function e_(e){let t=await e.loadImagesAndExport([{imageType:"JPEG",suffix:"jpeg"}]);return(0,ea.H9)(t)}function ey(e){let t={...eh},n=e.getPluginData(eE,"data");if(n)try{let e=em.parse(JSON.parse(n));t={...t,...e}}catch(e){console.error("Error parsing living design data:",e,"pluginData:",n)}return t}function eg(e,t){es.l7.ai("living-design",()=>{e&&e.setPluginData(eE,"data",JSON.stringify(t))})}async function eP({code:e}){window.__GLOBALS__={React:l};let t=await (0,ec.I)(e),n=new Blob([await (0,ec.z)(t)],{type:"text/javascript"}),r=URL.createObjectURL(n);try{return(await import(r)).default}catch(e){throw e}finally{URL.revokeObjectURL(r)}}function eS(){return(0,eo.Fk)(e=>{let t=e.getCurrentPage();if(!t)return null;let n=t.directlySelectedNodes;return 1!==n.length?null:ey(n[0])})}var eb=n(508226),ef=n(574724);let ev={type:"text",text:`You are an expert developer.
Your task is to take a design and add functionality to it.
You will be given a screenshot and an HTML representation of the design, as well as a list of interactions the designer wants.
- You can use the image to guess how it should function if the behaviour is not specified. For example, inputs should be functional.
- YOU MUST NOT CHANGE THE TOP AND LEFT VALUES.
- Always use the EXACT image URLs provided; they are correct.
- IMPORTANT: Reply with ONLY the new TSX code with no other text.
- Use Typescript, React and any libraries you need.
- Start with: \`import React from 'react'\` and end by exporting your component as the default export.
- Output the result as a single TSX file.
- The styles are already included in the HTML. Attach them as inline styles.
- Do not wrap the output in backticks
`,cache_control:{type:"ephemeral"}};async function ew(e){return(await ef.Ay.anthropic.streamClaudeCompletions({model:"claude-3-5-sonnet-20240620",messages:e,temperature:.2,max_tokens:4096,system:[ev],stream:!0})).getReader()}var eT=n(775541),eI=n(572206),ek=n(237870),eN=n(746806),eC=n(502601);let eA="LivingDesignsModal",eO=(0,ek.Ju)(function(){let e=(0,r.wA)(),t=eS(),n=l.useRef(null),i=(0,l.useRef)();return(0,l.useEffect)(()=>{if(n.current)return i.current=(0,eT.H)(n.current),()=>{i.current?.unmount()}},[]),(0,l.useEffect)(()=>{if(!t||"idle"!==t.status||!t.currentCode)return;let e=t.currentCode;(async()=>{if(!i.current)throw Error("Root is not initialized");let t=await eP({code:e});i.current.render(l.createElement(eM,{component:t}))})()},[t]),l.createElement(eC.Q,null,l.createElement(eN.vx,{title:"Living Design Preview",headerSize:"small",dragHeaderOnly:!0,initialPosition:new eI.Mi,allowResizeHeight:!0,allowResizeWidth:!0,onClose:()=>{e((0,ee.ES)({type:eA}))},initialWidth:240,initialHeight:240,fullFrame:!0},l.createElement("div",{ref:n,className:Z.cx.p16.overflowAuto.$})))},eA);function eM({component:e}){return l.createElement(e,null)}async function eR(e){let t=function(){let e=er.q.instance.getCurrentPage();if(e){let t=e.directlySelectedNodes;if(1===t.length)return t[0]}return null}();if(!t)return;let{interactions:n,messages:l}=ey(t);try{l.length;{if(!(0,u.kc)().sites)throw Error("HTML Serializer not available; please enable Sites");let e=await (0,eb.M)(t.guid),r=function(e){let t=document.implementation.createHTMLDocument().body;for(let n of(t.innerHTML=ei.sanitize(e),t.querySelectorAll("style")))n.remove();for(let e of t.querySelectorAll("*")){let t=[];for(let n of e.attributes)n.name.startsWith("data-")&&t.push(n.name);for(let n of t)e.removeAttribute(n)}for(let e of t.querySelectorAll("[id]"))e.removeAttribute("id");return t.innerHTML}(e),i=await e_(t);l=[{role:"user",content:[{type:"text",text:`<html>${r}</html>`,cache_control:{type:"ephemeral"}},{type:"image",source:{data:i,type:"base64",media_type:"image/jpeg"},cache_control:{type:"ephemeral"}},{type:"text",text:`<interactions>${n.map((e,t)=>`<interaction description="${e.description}" id=${t}></interaction>`).join("")}</interactions>`,cache_control:{type:"ephemeral"}}]}]}let r="",i=await ew(l);for(;;){let{done:e,value:a}=await i.read();if(e)break;"content_block_delta"===a.type&&"text_delta"===a.delta.type&&(r+=a.delta.text,eg(t,{interactions:n,status:"loading",messages:l,currentCode:r}))}eg(t,{interactions:n,status:"idle",messages:[...l,{role:"assistant",content:[{type:"text",text:r,cache_control:{type:"ephemeral"}}]}],currentCode:r}),e((0,ee.ES)({type:eA})),e((0,ee.to)({type:eO,data:{},showModalsBeneath:!0}))}catch(e){console.error(e),eg(t,{interactions:n,status:"error",messages:[]})}}function eL(){let e=(0,q.VW)(),t=eS(),[n,i]=l.useState(""),a=(0,r.wA)(),s=n=>{e&&t&&eg(e,{...t,interactions:n(t?.interactions||[])})};return l.createElement("div",{className:Z.cx.flex.flexColumn.gap4.py12.$},t?.interactions.map((e,t)=>l.createElement(ex,{key:e.description,label:"Placeholder for label",description:e.description,onDelete:()=>{s(e=>e.filter((e,n)=>n!==t))}})),l.createElement(el.Ad,{label:t?.status,input:l.createElement(eD,{value:n,placeholder:(0,x.t)("living_designs.properties_panel.description_input.placeholder"),handleChange:i,minHeight:96}),appendedClassName:"living_designs_panel--textareaRow--V8RnZ"}),l.createElement(en.z,{onClick:()=>{s(e=>[...e,{description:n}]),i("")},disabled:0===n.length},(0,x.t)("living_designs.properties_panel.interactions.add_button.label")),l.createElement(en.z,{onClick:()=>eR(a)},(0,x.t)("living_designs.properties_panel.create_button.label")),l.createElement(en.z,{onClick:()=>{a((0,ee.YK)({type:eO}))}},(0,x.t)("living_designs.properties_panel.toggle_preview")),t?.status,l.createElement("textarea",{readOnly:!0,className:Z.cx.wFull.h150.$,value:t?.currentCode||""}))}function ex({label:e,description:t,onDelete:n}){return l.createElement(el.Ad,{label:null,input:l.createElement("div",{className:Z.cx.flex.py12.gap8.$},l.createElement("div",{className:Z.cx.p2.$},l.createElement("div",{className:Z.cx.w20.h20.radiusFull.colorBgBrand.flex.itemsCenter.justifyCenter.$},l.createElement(X.N,{style:{"--color-icon":"var(--color-icon-onbrand"}}))),l.createElement("div",{className:Z.cx.flex.flexColumn.$},l.createElement("span",{className:Z.cx.textBodyMediumStrong.colorText.$},e),l.createElement("span",{className:Z.cx.textBodyMedium.colorTextSecondary.$},t)),l.createElement("div",{className:Z.cx.$},l.createElement("div",{className:Z.cx.w20.h20.flex.itemsCenter.justifyCenter.$},l.createElement(j.f,{onClick:n}))))})}function eD({value:e,placeholder:t,handleChange:n,minHeight:r}){let{inputRef:i,inputProps:{onChange:a,onFocus:s,onMouseUp:o,onMouseLeave:c,onKeyUp:p}}=(0,J.X)({onChange:function(e){n(e.target.value)}});return l.createElement(et.v,{ref:e=>{e?.textarea&&(i.current=e.textarea)},value:e,placeholder:t,onChange:a,onFocus:s,onMouseUp:o,onMouseLeave:c,onKeyUp:p,minHeight:r})}var eF=n(147206),eV=n(316081),eK=n(239671),eU=n(143678),eH=n(109388),eB=n(459593),eG=n(971612),eY=n(927457),eW=n(243742),eQ=n(268537),ez=n(46481),e$=n(738269),eX=n(582626),ej=n(284321),eJ=n(498606),eZ=n(420186),eq=n(405206),e0=n(720488),e1=n(965908),e5=n(995439),e4=n(900086),e3=n(7959),e6=n(690710),e2=n(767129),e7=n(31524),e8=n(404095),e9=n(522739),te=n(574176),tt=n(865618),tn=n(393965),tl=n(215440),tr=n(227795),ti=n(893606),ta=(e=>(e[e.VERTICAL=0]="VERTICAL",e[e.MIDDLE_CHILD=1]="MIDDLE_CHILD",e[e.LAST_CHILD=2]="LAST_CHILD",e))(ta||{});function ts(e){let{lineConfiguration:t,hideLine:n,wideContainer:r}=e;return l.createElement("div",{className:r?"bubbled_props_line_styles--containerWide--csTgg bubbled_props_line_styles--container--XumJm":"bubbled_props_line_styles--container--XumJm"},!n&&l.createElement("div",{className:"bubbled_props_line_styles--lineContainer--pEgTS"},(()=>{switch(t){case 0:return l.createElement("div",{className:"bubbled_props_line_styles--vertical--pialf bubbled_props_line_styles--_line--Vhv8-"});case 1:return l.createElement(l.Fragment,null,l.createElement("div",{className:"bubbled_props_line_styles--middleChildVertical--PxRp- bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),l.createElement("div",{className:"bubbled_props_line_styles--middleChildHorizontal--ucsHZ bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}));case 2:return l.createElement(l.Fragment,null,l.createElement("div",{className:"bubbled_props_line_styles--lastChildVertical--83Los bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),l.createElement("div",{className:"bubbled_props_line_styles--lastChildHorizontal--kGsHC bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}))}})()),e.children)}let to="bubbled_instances_list--minusIcon--dY8i-",tc="bubbled_instances_list--instanceIcon--aRlGl",tp="bubbled_instances_list--instanceName--09LuV",td="bubbled_instances_list--instanceNameWide---L338 bubbled_instances_list--instanceName--09LuV",tu="bubbled_instances_list--ui3InstanceNameAndIcon--W4S9T component_prop_def_row--ui3ComponentPanelNameAndIcon--01Z6g",tm="bubbled_instances_list--ui3LineContainer--OdBbV",th="bubbled_instances_list--ui3Line--SIYpX";var tE=n(968109),t_=n(349307);function ty(e){let{showUnbubbledPrimaryInstances:t,showNumHidden:n,wideContainer:i,scrollableContainer:a}=e,o=(0,r.d4)(tl.K4),c=(0,ti.R)(),[d,u]=(0,l.useState)(!1),m=t?o:o?.filter(e=>e.isBubbled),E=e=>{es.l7.user("toggle-props-bubbled",()=>s.glU.togglePropsAreBubbled(e)),s.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},_=e=>{s.Ez5.canvasViewState().temporarilyHoveredNodes.set(e)},y=()=>{s.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},g=0,P=c&&!t&&!d&&null!=m&&m.length>5,S=P?m.slice(0,4):m;return P&&(g=m.length-4),l.createElement("div",{className:p()({"bubbled_instances_list--scrollableContainer--ob0LQ":a})},S?.map((r,a)=>{let s=r.connectedGUIDs.slice(0).sort();return l.createElement(e9.D8,{className:"bubbled_instances_list--instanceSection--tLYN0",key:a,onMouseEnter:()=>_(r.connectedGUIDs),onMouseLeave:y,recordingKey:h.Pt(e,s[0])},c?t?l.createElement(tb,{data:r,showNumHidden:n,onUnbubbleInstance:E,recordingKey:h.Pt(e,"checkbox",s[0]),wideContainer:i}):l.createElement(tP,{data:r,onUnbubbleInstance:E,recordingKey:h.Pt(e,"unbubble",s[0]),wideContainer:i}):l.createElement(l.Fragment,null,l.createElement(ts,{lineConfiguration:ta.VERTICAL,hideLine:0===r.bubbledNestedInstances.length,wideContainer:i},t?l.createElement(tg,{data:r,onUnbubbleInstance:E,showNumHidden:n,wideContainer:i,recordingKey:h.Pt(e,"checkbox",s[0])}):l.createElement(l.Fragment,null,l.createElement(te.B,{className:tc,svg:tE.A}),l.createElement("p",{className:i?td:tp},r.name),l.createElement(tr.K0,{className:to,svg:t_.A,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":x.t("design_systems.component_properties.unbubble_instance"),onClick:()=>{E(r.connectedGUIDs[0])},recordingKey:h.Pt(e,"unbubble",s[0])}))),r.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(ts,{lineConfiguration:t===r.bubbledNestedInstances.length-1?ta.LAST_CHILD:ta.MIDDLE_CHILD,wideContainer:i},l.createElement("div",{className:i?td:tp},e.name))))))}),c&&!d&&g>0&&l.createElement(tn.t8,{label:(0,x.t)("design_systems.component_properties.show_more_nested_instances_rows",{count:g}),onClick:()=>u(!0)}))}function tg({data:e,onUnbubbleInstance:t,showNumHidden:n,wideContainer:r,recordingKey:i}){return l.createElement("div",{className:r?"bubbled_instances_list--checkboxContainerWide--Kdd3u bubbled_instances_list--checkboxContainer--qm3X7":"bubbled_instances_list--checkboxContainer--qm3X7"},l.createElement(tt.S,{label:e.name,checked:e.isBubbled,onChange:()=>{t(e.connectedGUIDs[0])},truncateLabel:{truncate:"line-clamp",lineClamp:2},recordingKey:i}),n&&!!e.numHidden&&l.createElement("div",{className:"bubbled_instances_list--numHidden--fW-Sr"},(0,x.tx)("design_systems.component_properties.num_hidden",{num:e.numHidden})))}function tP({data:e,onUnbubbleInstance:t,recordingKey:n,wideContainer:r}){let{bubbledNestedInstances:i}=e,a=l.createElement(el.DE,{label:null,input:l.createElement("div",{className:tu},l.createElement("div",{className:tc},l.createElement(e7.y,null)),l.createElement("p",{className:tp},e.name)),icon:l.createElement("div",{className:to},l.createElement(e2.K,{"aria-label":(0,x.t)("design_systems.component_properties.unbubble_instance"),onClick:()=>{t(e.connectedGUIDs[0])},recordingKey:n,htmlAttributes:{"data-tooltip":(0,x.t)("design_systems.component_properties.unbubble_instance"),"data-tooltip-type":eJ.Ib.TEXT,onMouseDown:G.dG}},l.createElement(e8.f,null)))});return 0===i.length?a:l.createElement(tS,{data:e,row:a,wideContainer:r})}function tS({data:e,row:t,wideContainer:n}){return l.createElement(tn.R$,{row:t,isCollapsedByDefault:!0},e.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(el.DE,{label:null,input:l.createElement("div",{className:tu},l.createElement("div",{className:tm},l.createElement("div",{className:th})),l.createElement("div",{className:n?td:tp},e.name)),icon:null}))))}function tb({data:e,onUnbubbleInstance:t,recordingKey:n,showNumHidden:r,wideContainer:i}){return l.createElement(l.Fragment,null,l.createElement(el.Ad,{label:null,input:l.createElement(tg,{data:e,onUnbubbleInstance:t,showNumHidden:r,wideContainer:i,recordingKey:n})}),e.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(el.Ad,{label:null,input:l.createElement("div",{className:"bubbled_instances_list--ui3CheckboxViewNestedInstance--YgTEc"},l.createElement("div",{className:tm},l.createElement("div",{className:th})),l.createElement("div",{className:i?td:tp},e.name))}))))}var tf=n(273226);function tv(){let e="bubbledPropsPicker",t=(0,r.d4)(e=>e.pickerShown),n=(0,r.wA)(),i=new eI.Mi(t?.initialX,t?.initialY);return t?.id!==tf.Dd?null:l.createElement(eN.vx,{title:(0,x.t)("design_systems.component_properties.expose_nested_instances"),initialPosition:i,initialWidth:tf.wh,headerSize:"small",onClose:()=>{n(K.XE())},recordingKey:e},l.createElement("div",{className:"bubbled_props_picker--container--I6VX-"},l.createElement(ty,{showUnbubbledPrimaryInstances:!0,showNumHidden:!0,wideContainer:!0,scrollableContainer:!0,recordingKey:e})))}var tw=n(896632),tT=n(25888),tI=n(107244),tk=n(322515);let tN="props_panel--addButtonContainer--a58gi",tC="props_panel--addButton--jAtAX draggable_list--addButton--D0q--",tA="props_panel--dropdownRowWithIcon--03FtD",tO="props_panel--dropdownRowWithoutIcon--F8Ra-",tM="props_panel--bubbledInstancesHeading--C26v2";var tR=n(633779),tL=n(100562),tx=n(501191);function tD({recordingKey:e}){let t=(0,r.wA)(),{version:n}=(0,eW.DP)(),i="ui3"===n,a=(0,r.d4)(e6.i$),o=(0,r.d4)(tI.od),c=!(0,r.d4)(tT.Jp),p=(0,r.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===tf.C4),d=(0,r.d4)(e=>!!e.modalShown&&e.modalShown.type===tw.n.type),{componentDescription:m}=(0,e1.z6)(),E=(0,r.d4)(e=>e.pickerShown),_=p||d||E?.id===tf.Dd,y=!!(0,r.d4)(tl.Z3).length,g=(0,r.d4)(tl.K4),P=!!g?.length,S=(0,r.d4)(ej.Dr),b=(0,r.d4)(ej.Ct),{submit:f,apply:v}=(0,eX.wP)(),w=l.useRef(null),T=l.useRef(null),I=l.useCallback(e=>{E&&t(K.XE()),p?t(e$.oB()):t(e$.j7({type:tf.C4}))},[t,E,p]),k=l.useCallback(e=>{(0,tf.Pp)(o,!1,e,tf.Fv.ICON),t(ee.to({type:tw.n,data:{propType:e}}))},[t,o]),N=l.useCallback(()=>{o&&(o.isLooseComponent?Q.Y5.triggerActionInUserEditScope("create-state-group"):k(s.J0O.VARIANT))},[k,o]),C=l.useCallback(()=>{let e=eH.findDOMNode(T.current),n=e?(0,eZ.cn)(e,tf.wh):{};t(K.u1({id:tf.Dd,initialX:n?.x,initialY:n?.y}))},[t]),A=l.useCallback(async()=>{let e=await f(o);e&&es.l7.user("apply-suggested-props",()=>{v(o,e)})},[f,v,o]),O=[s.J0O.BOOL,s.J0O.INSTANCE_SWAP,s.J0O.TEXT,...(0,u.kc)().ds_variable_props_number_type?[s.J0O.NUMBER]:[]];return o?l.createElement(e3.Zk,{ref:T},l.createElement(e1.QQ,null),i&&!c?l.createElement(e5.n,{description:m}):null,l.createElement(i?tV:tF,{isPanelEmpty:c,isAddPropButtonSelected:_,hasBubbledInstances:y,stateGroupSelectionMode:a,selectAddPropOptionRef:w,toggleAddPropDropdown:I,recordingKey:e}),p&&w.current&&l.createElement(e0.Cf,{targetRect:w.current.getBoundingClientRect(),propagateCloseClick:!0},l.createElement(eQ.c$,{disabled:!0,className:tO},(0,x.tx)("design_systems.component_properties.create_new_property")),l.createElement(eQ.c$,{className:tA,onClick:N,recordingKey:h.Pt("openCreatePropModal",(0,tf.xb)(s.J0O.VARIANT))},l.createElement(eq.Nu,null,l.createElement(ez.U,{svg:tL.A},l.createElement(eB.m,null))),(0,x.tx)("design_systems.component_properties.across_variants")),O.map(e=>l.createElement(eQ.c$,{key:e,className:tA,onClick:()=>k(e),recordingKey:h.Pt("openCreatePropModal",(0,tf.xb)(e))},l.createElement(eq.Nu,null,l.createElement(ez.U,{svg:(0,tf.qe)(e)},(0,tf.zn)(e,!0))),(0,tf.xb)(e))),P&&l.createElement(l.Fragment,null,l.createElement(eQ.wv,null),l.createElement(eQ.c$,{disabled:!0,className:tO},(0,x.tx)("design_systems.component_properties.expose_nested_instances")),l.createElement(eQ.c$,{className:tA,onClick:C,recordingKey:"openBubbledPropPicker"},l.createElement(eq.Nu,null,l.createElement(ez.U,{svg:tR.A},l.createElement(eG.M,null))),(0,x.t)("design_systems.component_properties.choose_instances"))),(0,u.kc)().first_draft_link_to_component&&l.createElement(l.Fragment,null,l.createElement(eQ.wv,null),l.createElement(eQ.c$,{className:tA,onClick:A,recordingKey:"suggestProps"},l.createElement(eq.Nu,null,l.createElement(ez.U,{svg:tR.A},l.createElement(eG.M,null))),(0,x.t)("first_draft.suggest_properties")))),E?.id===tf.Dd&&l.createElement(tv,null),l.createElement(tn.e6,{containerWidth:i?tf.O2.RESIZABLE_SIDEBAR:tf.O2.REGULAR,propDimension:tf.OE.DEFINITION,guids:[o.guid],recordingKey:e,enableHidingOverflowRowsInUI3:!1,entrypointForInstanceSwapPicker:null}),y&&l.createElement(l.Fragment,null,l.createElement("p",{className:tM},(0,x.t)("design_systems.component_properties.bubbled_instances")),l.createElement(ty,{recordingKey:e})),i&&S&&b?l.createElement(el.Ad,{label:null,input:l.createElement(e4.U,null)}):null):null}function tF({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:n,stateGroupSelectionMode:r,selectAddPropOptionRef:i,toggleAddPropDropdown:a}){return l.createElement(e3.fI,{className:!e||t||n?void 0:"props_panel--panelHeaderRowFaded--r4klF draggable_list--panelHeaderRowFaded--kETRR"},l.createElement(e3.xw,{className:"props_panel--panelTitleText--i7WqG draggable_list--panelTitleText--SwKez"},(0,x.tx)("design_systems.component_properties.properties")),r!==s.iCO.STATE&&l.createElement("div",{ref:i,className:tN},l.createElement(e3.YW,{className:tC,onClick:a,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.component_panel.create_component_property"),svg:tx.A,recordingKey:"openCreatePropModalDropdown"})))}function tV({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:n,stateGroupSelectionMode:r,selectAddPropOptionRef:i,toggleAddPropDropdown:a}){let o=l.useRef(null),c=e&&!n,d=c?(0,x.tx)("design_systems.component_properties.add_property"):(0,x.tx)("design_systems.component_properties.properties");return l.createElement(el.DE,{ref:o,input:d,label:null,appendedClassName:p()("props_panel--ui3PanelHeaderRow--Ab8Jz",{[tk.yf]:!t}),icon:r!==s.iCO.STATE?l.createElement("div",{ref:i,className:p()(tN,{"props_panel--ui3ShowIconOnHover--ovobs":!c})},l.createElement(e3.YW,{className:tC,onClick:a,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.component_panel.create_component_property"),recordingKey:"openCreatePropModalDropdown"},l.createElement(eY.e,null))):void 0})}var tK=n(507956),tU=n(634832),tH=n(776250),tB=n(297666),tG=n(358145),tY=n(886653),tW=n(437304),tQ=n(286640),tz=n(347082),t$=n(395281),tX=n(452246),tj=n(226055),tJ=n(29680),tZ=n(335682),tq=n(416095),t0=n(237929),t1=n(444576),t5=n(945020),t4=n(173454),t3=n(602029),t6=n(463420),t2=n(96796),t7=n(937036),t8=n(255942),t9=n(860168);let ne="styles--contextMenu--C-hVT",nt="styles--showOnRowHover--OUqRT",nn="styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT",nl="styles--caret--DZmzh",nr="styles--rowSelectedExpanded--MGvUV",ni="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function na({childLeft:e,childRight:t,deleteSelectedItems:n,forceShowHoverBorder:r,hideStylePreview:i,index:a,inspectStyleSelected:s,isDragging:o,isEditable:c,isRenaming:d,isCollapsed:u=!0,isLastChildOfSelection:E=!1,isFirstChildOfSelection:_=!1,isFolder:y,level:g,name:P,nameRef:S,onChildLeftClick:b,onContextMenu:f,onCreateFolder:v,onDoubleClick:w,onHoverChange:T,onMouseDown:I,onMouseMove:k,recordingKey:N,rowRef:C,secondaryName:A,selected:O,selectedSecondary:M,stopRenamingItem:R,tooltipData:L}){let x=l.useRef(null),[D,F]=l.useState(P),[V,K]=l.useState(!1),U=(0,tj.GS)(),H=l.useCallback(e=>{if(e){let t=eH.findDOMNode(e);t&&t.select()}},[]);l.useEffect(()=>{F(P)},[P]);let B=l.useCallback(e=>{""===e.trim()?(R(a,P),F(P)):R(a,e)},[a,P,R]),Y=(0,h.AF)((0,h.Pt)(N,"text-input"),"change",l.useCallback(e=>{F(e.currentTarget.value)},[F])),W=(0,h.v_)((0,h.Pt)(N,"text-input"),"keydown",e=>{e.keyCode===m.Uz.ESCAPE?(R(a,P),F(P)):e.keyCode===m.Uz.ENTER&&B(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),z=(0,h.v_)(N,"keydown",e=>{c&&!d&&(e.keyCode===m.Uz.BACKSPACE||e.keyCode===m.Uz.DELETE)?n():c&&!d&&e.keyCode===m.Uz.G&&(0,m.Fo)(e)?(v(),e.preventDefault()):!d&&e.nativeEvent&&Q.Y5.forwardKeyboardEvent(e.nativeEvent)}),$=l.useCallback(()=>{B(D)},[B,D]),X=(0,h.rf)(N,"contextmenu",e=>{f(e)}),j=(0,h.rf)(N,"mousemove",e=>{k(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),J=(0,h.rf)(N,"mousedown",e=>{I(e),i()}),Z=(0,h.rf)(N,"mouseenter",l.useCallback(()=>{K(!0),T?.(!0)},[K,T])),q=l.useCallback(()=>{K(!1),T?.(!1)},[K,T]),ee=(0,h.rf)(N,"dblclick",l.useCallback(e=>{w(e)},[w])),et=Math.min((g-1)*3,18),en=t9.jNX-4-et,el=en-(U?7:5),er=V&&!d||s?el:en,ei=O||M,ea=p()({[nr]:!u&&ei,"styles--folderSecondarySelected--SL0JY":M||O&&!_,[ni]:M&&!U}),es=p()({[ni]:ei,[nr]:!E&&ei}),eo=p()("styles--rowWithBorder--bphZ-",{[ea]:y,[es]:!y,"styles--rowWithHover--RWNMH":!ei&&(r||V&&!o)}),ec=l.createElement("div",{className:d?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:P,style:U?{width:"100%"}:{gridColumnEnd:`span ${er}`}},d?l.createElement(e3.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",onBlur:$,onChange:Y,onKeyDown:W,ref:H,spellCheck:!1,value:D}):l.createElement(l.Fragment,null,l.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:S,...L},P),A&&l.createElement("div",{className:"styles--textStyle--DiUv4"},A)));return l.createElement(t3.e,{className:eo,dragging:o,hideGrabber:!0,onContextMenu:X,onKeyDown:z,onMouseDown:J,onMouseEnter:Z,onMouseLeave:q,onMouseMove:j,onDoubleClick:ee,ref:(0,t8.A)(x,C),selected:O,selectedSecondary:!1,tabIndex:0},et>0&&l.createElement("span",{style:{gridColumnEnd:`span ${et}`}}),l.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:U?{gridColumnEnd:`span ${er}`}:void 0},l.createElement("div",{onMouseDown:b&&G.dG,onClick:b},e),U&&ec),!U&&ec,t)}var ns=n(949207),no=n(432023),nc=n(660164);function np({deleteSelectedItems:e,folder:t,folderNameToNestUnder:n,hideStylePreview:i,index:a,isCollapsed:s,isDragging:o,isEditable:c,isRenaming:p,isTemporarilyExpanded:d,isFirstChildOfSelection:u,level:m,onContextMenu:E,onCreateFolder:_,onMouseDown:y,onMouseMove:P,onRenameItem:S,recordingKey:b,selected:f,selectedSecondary:v,stopRenamingItem:w,temporarilyExpandFolder:T,toggleFolder:I}){let k=(0,r.wA)(),[N,C]=l.useState(!1),A=l.useRef(null),O=N&&!p&&c;l.useEffect(()=>{if(N&&o&&s){let e=setTimeout(()=>{T(t.name)},1e3);return()=>clearTimeout(e)}},[N,o,s,T,t]);let M=l.useCallback(()=>{let e=(0,t7.Zk)(t.styleTypeSection),n=A.current?.getBoundingClientRect();e&&n&&k(g.Zs({rowLeft:n.left,rowTop:n.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[A,t.name,t.styleTypeSection,k]);return l.createElement(na,{deleteSelectedItems:e,forceShowHoverBorder:n===t.name,hideStylePreview:i,index:a,isDragging:o,isEditable:c,isRenaming:p,isCollapsed:s,isFolder:!0,isFirstChildOfSelection:u,level:m,name:(0,t0.kH)(t.name),onChildLeftClick:function(){I(!s)},onContextMenu:E,onCreateFolder:_,onDoubleClick:function(){t.styleTypeSection&&S(t.name,!1,t.styleTypeSection)},onHoverChange:C,onMouseDown:y,onMouseMove:P,onRenameItem:S,recordingKey:b,selected:f,selectedSecondary:v,stopRenamingItem:w,rowRef:e=>{e&&(A.current=eH.findDOMNode(e))},childLeft:l.createElement(ez.U,{svg:s&&!d?no.A:ns.A,className:nl},s&&!d?l.createElement(t6.k,{className:nl}):l.createElement(t2.O,{className:nl})),childRight:O&&l.createElement(e3.$4,null,l.createElement(e3.K0,{className:f?nn:nt,recordingKey:h.Pt(b,"addButton"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.styles.tooltips.create"),svg:tx.A,fallbackSvg:nc.A,onClick:M}))})}var nd=n(221768),nu=n(378905),nm=n(44892),nh=n(991443),nE=n(720384),n_=n(162502);function ny({deleteSelectedItems:e,hideStylePreview:t,index:n,isDragging:i,isEditable:a,isRenaming:s,isLastChildOfSelection:o,level:c,onContextMenu:p,onCreateFolder:u,onInspectStyle:m,onMouseDown:E,onMouseMove:_,onRenameItem:y,recordingKey:P,selected:S,selectedSecondary:b,stopRenamingItem:f,dsStyle:v,stylePreviewShown:w,updateContextMenuStyleRef:T,updateSelection:I,updateFocusRowRef:k}){let[N,C]=l.useState(!1),A=(0,r.wA)(),O=l.useRef(null),M=l.useRef(null),R=l.useCallback(()=>{a&&y(v.node_id,!0,v.style_type)},[y,v.node_id,v.style_type,a]),L=w.isShown&&!w.isCreating&&w.style.node_id===v.node_id&&(0,nu.EF)(w.style,v),D=N&&!s||L,F=l.useCallback(function(){let e=M.current;if(e){let t=e.getBoundingClientRect();L?A(g.sw()):(A(g.rk({style:v,rowTop:t.top,rowLeft:t.left})),m(v),I({type:v.style_type,folderNames:new Set,styleIds:new Set(v.node_id)}))}A(K.XE())},[A,m,I,v,L]),V=l.useCallback(e=>{(2===e.button||e.ctrlKey)&&T(M.current),E(e),L&&F()},[F,E,L,T]),U=O.current,H=!!U&&U.offsetWidth<U.scrollWidth,B=l.useMemo(()=>!i&&v.description&&H?{"data-tooltip-type":eJ.Ib.SPECIAL,"data-tooltip":nE.Z,"data-tooltip-style-name":(0,t0.kH)(v.name),"data-tooltip-style-description":v.description,"data-tooltip-max-width":t9.jNX*(0,d.hG)(t9.dGl)}:null,[H,i,v.name,v.description]),Y="TEXT"===v.style_type&&v.meta?.style_thumbnail?v.meta.style_thumbnail:null;return l.createElement(na,{deleteSelectedItems:e,hideStylePreview:t,index:n,inspectStyleSelected:L,isDragging:i,isEditable:a,isRenaming:s,isFolder:!1,isLastChildOfSelection:o,level:c,name:(0,t0.kH)(v.name),nameRef:O,onContextMenu:p,onCreateFolder:u,onDoubleClick:R,onHoverChange:C,onMouseDown:V,onMouseMove:_,onRenameItem:y,recordingKey:P,rowRef:e=>{if(e){let t=eH.findDOMNode(e);k&&k(t),M.current=t}},secondaryName:Y&&(0,nm.P$)(Y),selected:S,selectedSecondary:b,stopRenamingItem:f,tooltipData:B,childLeft:l.createElement(l.Fragment,null,l.createElement(nh.zi,{dsStyle:v,disableTooltip:!0}),S&&"FILL"===v.style_type&&l.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:D&&l.createElement(e3.$4,null,l.createElement("div",{style:{gridColumnEnd:"span 1"}}),l.createElement(tr.YW,{className:S?nn:nt,recordingKey:h.Pt(P,"customButton"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":a?(0,x.t)("design_systems.styles.edit_style"):(0,x.t)("design_systems.styles.view_style"),selected:L,onMouseDown:G.dG,onClick:F},l.createElement(ez.U,{svg:n_.A},l.createElement(nd.A,null))))})}function ng({styleType:e,children:t}){let n=!(0,tJ.p8)("isReadOnly");return l.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},n?l.createElement(nP,{styleType:e,recordingKey:`style-section-header-${e}`}):l.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,tq.QT)(e)),t)}function nP({styleType:e,recordingKey:t}){let[n,i]=l.useState(!1),a=(0,r.wA)(),s=l.useRef(null),o=l.useCallback(()=>{let t=(0,t7.Zk)(e),n=s.current?.getBoundingClientRect();t&&n&&a(g.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:t}))},[s,e,a]);return l.createElement(e9.D8,{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),recordingKey:t,forwardedRef:s},l.createElement(e3.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,tq.QT)(e)),n&&l.createElement(tr.K0,{className:"styles--styleTypeSectionRowButton--V4Co2 styles--showOnRowHover--OUqRT",recordingKey:h.Pt(t,"addButton"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,tq.XV)(e).toLowerCase()}),svg:tx.A,fallbackSvg:nc.A,onClick:o}))}ng.displayName="StyleTypeSection";var nS=n(318812),nb=n(333370);let nf=eQ.ms,nv=eQ.c$,nw=eQ.wv,nT="styles-by-type-context-menu",nI=.75*(0,d.hG)(t9.uj0);function nk({styleRowRef:e,onEditStyle:t,onRenameItem:n,onCreateFolder:i,onDeleteItems:a,onCutItems:s,onPasteItems:o,styleType:c}){let p=(0,nS.Um)(),d=(0,r.d4)(e=>e.library.localStyleSelection),u=l.useMemo(()=>d&&d.type===c&&p?.type===nT?(0,nb.QA)(d,p.data.uiList):[],[d,p,c]),m=l.useMemo(()=>(0,nb.Ug)(u).map(e=>e.node_id),[u]),h=m.length;return p&&m.length?l.createElement(nN,{styleRowRef:e,selectedItems:u,numStyles:h,dropdownShown:p,onEditStyle:t,onRenameItem:n,onCreateFolder:i,onDeleteItems:a,onCutItems:s,onPasteItems:o}):l.createElement("div",null)}function nN({styleRowRef:e,selectedItems:t,numStyles:n,dropdownShown:i,onEditStyle:a,onRenameItem:o,onCreateFolder:c,onDeleteItems:p,onCutItems:d,onPasteItems:u}){let m=(0,r.wA)();l.useEffect(()=>(s.glU.computePastableStyleCount(),()=>{s.glU.clearPastableStyleCount()}),[]);let h=(0,r.d4)(e=>e.mirror.appModel.pastableStyleCount),E=!!tZ.q5()?.canEdit,_=l.useCallback(()=>{if(!t.length||t[0].type!==t4.PW.STYLE)return;let n=t[0];if(e){let t=e.getBoundingClientRect();m(g.rk({style:n,rowTop:t.top,rowLeft:t.left})),m(K.XE())}a(n)},[m,t,a,e]),y=l.useCallback(()=>{if(!t.length||t[0].type===t4.PW.STYLE)return;let e=t[0];o(e.name,!1,e.styleTypeSection)},[o,t]);if(-1===h)return l.createElement("div",null);if(!E)return n>1?l.createElement("div",null):l.createElement(nf,{style:i.data.position,className:ne},l.createElement(nv,{recordingKey:"edit-style-option",onClick:_},(0,x.tx)("design_systems.styles.view_style")));let P=1===n&&(t[0].type===t4.PW.STYLE?l.createElement(nv,{recordingKey:"edit-style-option",onClick:_},(0,x.tx)("design_systems.styles.edit_style")):l.createElement(nv,{recordingKey:"rename-folder-option",onClick:y},(0,x.tx)("design_systems.styles.rename_folder")));return l.createElement(nf,{style:i.data.position,className:ne},l.createElement(nv,{recordingKey:"create-folder-option",onClick:c},(0,x.tx)("design_systems.styles.add_new_folder")),P,l.createElement(nv,{recordingKey:"delete-style-option",onClick:p},(0,x.tx)("design_systems.styles.delete_styles",{numStyles:n})),l.createElement(nw,null),l.createElement(nv,{recordingKey:"cut-style-option",onClick:d},(0,x.tx)("design_systems.styles.cut_styles",{numStyles:n})),!!h&&l.createElement(nv,{recordingKey:"paste-style-option",onClick:u},(0,x.tx)("design_systems.styles.paste_styles",{numStyles:h})))}var nC=n(710752),nA=n(582288),nO=n(884909),nM=n(304173),nR=n(608974),nL=n(257812),nx=n(319431),nD=n(914110);let nF="local-style-creation-dropdown";function nV(){let e=(0,r.wA)(),t=(0,l.useContext)(k.lk),n=!(0,tJ.p8)("isReadOnly"),i=l.useRef(null),a=l.useRef(null),s=i.current,o=(0,nS.Um)(),c=o?.type===nF,p=o?.data?.targetRect,d="localStyleHeader",u=0===(0,N.Bs)().length,m=(0,r.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),E=l.useMemo(()=>p||(c&&s?s.getBoundingClientRect():null),[p,s,c]),_=()=>{e(e$.oB())},y=()=>{e(e$.j7({type:nF}))},P=t=>{t.stopPropagation(),e(g.YG());let n=i.current;c?_():n&&((0,tH.sx)("editor-local-styles-dropdown-show"),y())},S=e=>{_();let n=(0,t7.Zk)(e),l=a.current?.getBoundingClientRect();n&&l&&t({styleType:e,inheritStyleKeyField:n,rowLeft:l.left,rowTop:l.top})},b=u&&!c&&!m;return l.createElement(e3.fI,{className:b?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",forwardedRef:a},l.createElement(e3.xw,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>b&&P(e),onClick:e=>e.stopPropagation()},(0,x.tx)("design_systems.styles.local_styles")),n&&l.createElement(l.Fragment,null,l.createElement(e3.K0,{ref:i,onMouseDown:P,onClick:e=>e.stopPropagation(),className:c?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.create_style.create_style"),recordingKey:h.Pt(d,"addButton")},l.createElement(ez.U,{svg:tx.A,fallbackSvg:nc.A},l.createElement(eY.e,null))),c&&E&&l.createElement(e0.Cf,{targetRect:E,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},tq.og.map(e=>{let{icon:t,label:n}=function(e){switch(e){case"TEXT":return{icon:l.createElement(ez.U,{svg:nD.A},l.createElement(nC.e,null)),label:(0,x.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:l.createElement(ez.U,{svg:nL.A},l.createElement(nA.G,null)),label:(0,x.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:l.createElement(ez.U,{svg:nx.A},l.createElement(nO.E,null)),label:(0,x.t)("design_systems.styles.dropdown.grid")};case"EFFECT":return{icon:l.createElement(ez.U,{svg:nR.A},l.createElement(nM.n,null)),label:(0,x.t)("design_systems.styles.dropdown.effect")};default:throw(0,tU.assertType)(e),Error(`Invalid style type: ${e}`)}}(e),r=t=>{t.stopPropagation(),S(e)};return l.createElement(eQ.c$,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:r,onPointerUp:r,recordingKey:h.Pt(d,`dropdown-option-${e}`)},l.createElement(eq.Nu,null,t),n)}))))}let nK="collapsed-style-folders";function nU({scrollContainer:e,recordingKey:t}){let n=(0,N.Bs)(),r=(0,tJ.p8)("isReadOnly");return 0===n.length&&r?null:l.createElement(tz.p,{name:"local_styles_panel"},l.createElement(e3.Zk,null,l.createElement(nH,{scrollContainer:e,recordingKey:t})))}function nH({scrollContainer:e,recordingKey:t}){let n=(0,r.wA)(),i=(0,r.d4)(e=>e.stylePreviewShown),o=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),c=(0,r.d4)(e=>e.mirror.appModel.currentTool),p=l.useRef(null),d=(0,N.Bs)(),u=(0,r.d4)(e=>e.library.localStyleSelection),[m,E]=l.useState(null),[_,y]=l.useState(null),P=l.useRef(null),[S,b]=l.useState(!1),f=o===s.m1T.GRADIENT||o===s.m1T.RASTER||c===s.NLJ.DROPPER_COLOR;l.useEffect(()=>{let e=()=>{!f&&(n(t$.Bn(null)),i.isShown&&(n(g.sw()),s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID)))},t=(0,G.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[n,i.isShown,f]);let{stylesByType:v,foldersAndStylesByType:w}=l.useMemo(()=>{let e=(0,tq.Kw)(d),t=new Map;return tq.og.map(n=>{let l=e.get(n);if(l){(0,tq.LX)(l);let e=(0,nb.lM)(l,n),r=(0,nb.l0)(e);t.set(n,r)}}),{stylesByType:e,foldersAndStylesByType:t}},[d]),T=l.useCallback(e=>{(0,tU.assertDev)(null!=e.content_hash,"style does not have a hash"),s.glU.selectStyleByGuid(e.node_id),n(t$.ay({isRenaming:!1})),(0,tH.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[n]),I=l.useCallback((e,t,n)=>{E(t?e:null),y(t?null:{name:e,styleTypeSection:n})},[]),k=l.useCallback(e=>{if(!e){n(t$.Bn(null));return}let t=new Set;e.styleIds.forEach(n=>{let l=d.find(e=>e.type===t4.PW.STYLE&&e.node_id===n);if(!l)return;let r=(0,t0.In)(l.name);e.folderNames.has(r)||t.add(n)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};n(t$.Bn(l))},[n,d]),C=l.useCallback((e,t,n)=>{if(!u)return;let l=e[t],r=(e,t)=>{let l=(0,t0.ke)(e.name),r=null!=t?t:l.length-1;l[r]=n;let i=(0,nb.Pc)(l.join("/"));es.l7.user("rename-style",()=>s.glU.renameNode(e.node_id,i))};if(l.name!==n){if(l.type===t4.PW.STYLE)r(l);else{(0,nb.mx)(t,e).forEach(t=>{let n=e[t];n.type===t4.PW.STYLE&&r(n,l.level-1)});let i=new Set(u.folderNames);i.delete(l.name);let a=(0,t0.In)(l.name)+"/"+n;i.add(a),k({type:u.type,folderNames:i,styleIds:u.styleIds})}}Q.Y5.triggerAction("commit"),E(null),y(null)},[u,k]),A=l.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),n(e$.j7({type:nT,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-nI)}}}))},[n]),O=l.useCallback(e=>{P.current=e},[]),M=l.useCallback(()=>{b(!0)},[]),R=l.useCallback(()=>{b(!1)},[]);return l.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:p},l.createElement(nV,null),tq.og.map(n=>{let r=v.get(n);if(!r)return;let i=w.get(n);if(i)return l.createElement(nB,{key:n,recordingKey:h.Pt(t,`style-section-${n}`),styleType:n,storedStyleList:r,styleList:i,updateSelection:k,isDragging:S,onDragStart:M,onDragEnd:R,onInspectStyle:T,onContextMenu:A,updateContextMenuStyleRef:O,renamingStyleID:m,renamingFolder:_,onRenameItem:I,stopRenamingItem:C,styleRowRef:P.current,onEditStyle:T,scrollContainer:e})}))}function nB({styleType:e,storedStyleList:t,styleList:n,renamingStyleID:o,renamingFolder:c,onRenameItem:p,stopRenamingItem:d,onDragStart:u,onDragEnd:m,onInspectStyle:E,onContextMenu:_,updateContextMenuStyleRef:y,updateSelection:P,styleRowRef:S,scrollContainer:b,recordingKey:f}){let v=(0,tZ.q5)(),w=!(0,tJ.p8)("isReadOnly"),I=(0,r.wA)(),k=(0,r.d4)(e=>e.stylePreviewShown),N=(0,tj.GS)(),C=(0,r.d4)(t=>(0,t1.i4)(t,e)),A=(0,r.d4)(t=>(0,t1.A7)(t,e,n)),[O,M]=l.useState(()=>{if(tQ.x4&&v){let t=JSON.parse(tQ.x4.getItem(nK)||"{}");if(v.key in t){let n=t[v.key];if(e in n)return new Set(n[e])}else t[v.key]={},tQ.x4.setItem(nK,JSON.stringify(t))}return new Set(n.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[R,L]=l.useState([]),[D,F]=l.useState(null),[V,U]=l.useState(null),H=l.useMemo(()=>(0,tB.s)(()=>{I(tX.GT({styleType:e}))},200),[I,e]);l.useEffect(()=>{H()},[H,n]);let B=(0,tG.ZC)(O);l.useEffect(()=>{if(!B||!tQ.x4||!v||(0,tW._f)(B,O))return;let t=JSON.parse(tQ.x4.getItem(nK)||"{}"),n=t[v.key];n&&(n[e]=[...O],tQ.x4.setItem(nK,JSON.stringify(t)))},[O,v,B,e]);let G=l.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),Y=l.useCallback((e,t)=>{let l=new Set(e),r=[];n.forEach((e,t)=>{if(l.has(e)&&(r.push(t),"STYLE_FOLDER"===e.type)){let e=(0,nb.mx)(t,n);r.push(...e)}});let a=new Set(r),s=t?n.indexOf(t):n.length,o=[...(0,i.range)(s).filter(e=>!a.has(e)),...r,...(0,i.range)(s,n.length).filter(e=>!a.has(e))],c=new Map;return o.forEach((e,t)=>{e!==t&&c.set(e,t)}),c},[n]),W=l.useCallback(()=>{k.isShown&&(I(g.sw()),I(K.XE()),s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID))},[I,k.isShown]),z=l.useMemo(()=>{if(!D)return null;if("in"===D.type){let e=n[D.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==D.index||null==V||!C)return null;let e=(0,nb.QA)(C,n),t=e[0],l=null,r=null;if(0===D.index?r=n[D.index]:D.index===n.length?l=n[D.index-1]:(l=n[D.index-1],r=n[D.index]),l?.type==="STYLE_FOLDER"&&O.has(l.name)&&-1===R.indexOf(l.name))return{folderNameToNestUnder:l.name,dividerStyles:{display:"none"}};if(l?.type===t4.PW.STYLE){let e=(0,t0.In)(l.name).split("/");for(let n=0;n<e.length;n++){let l=e.slice(0,n+1).join("/");if(O.has(l)&&-1===R.indexOf(l)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:l,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,t0.In)(l),dividerStyles:{marginLeft:24*Math.min((0,t0.ke)(l).length,8)-8}}}}}let i=0,a=null,s=l?(0,nb.rM)(l):0,o=r?(0,nb.rM)(r):0;if(s<=o)i=o,a=l?l.type===t4.PW.STYLE?(0,t0.In)(l.name):l.name:"";else if((0,tU.assertDev)(null!=l,"Dragging after an item that doesn't exist"),t.type===t4.PW.STYLE||V>=.5)i=s,a=(0,t0.In)(l.name);else{let e=Math.floor(V/.5*(0,nb.rM)(l));e=Math.max(o-1,e),a=(0,t0.ke)((0,t0.In)(l.name)).slice(0,e).join("/"),i=e+1}let c={marginLeft:24*Math.min(i,8)-8};return l&&e.includes(l)||!(0,nb.Md)(l,t,r)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:a,dividerStyles:c}},[O,V,C,D,n,R]),$=l.useCallback((l,r,i,a)=>{if(!t||!r&&!i||!z)return;let s=z.folderNameToNestUnder;if(null===s)return;let o=[],c=[];l.forEach(e=>{(0,nb.Md)(r,e,i,s)&&("STYLE_FOLDER"===e.type?c.push(e):o.push(e))});let p=o.concat(c);if(!p.length)return;let d=es.l7.user("reorder-styles",()=>(0,nb.VB)(p,r,i,s,n,t,a||!1)),u=new Set,m=new Set;p.forEach(e=>{let t=(0,nb.t_)(e),n=d?.get(t);n&&("STYLE_FOLDER"===e.type?u.add(n):m.add(t))}),P({type:e,folderNames:u,styleIds:m});let h=new Set;return O.forEach(e=>{if(s.startsWith(e))return;let t=d?.get(e);t?h.add(t):h.add(e)}),M(h),W(),a||Q.Y5.triggerAction("commit"),Y(p,i)},[P,O,z,Y,W,t,n,e]),X=l.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let l=n.indexOf(t),r=(0,nb.dm)(t).filter(e=>(0,t0.In)(e.name)===t.name);if(!r.length)return $(e,t,n[l+1]);{let t=r[r.length-1],l=n.indexOf(t);return $(e,t,n[l+1])}},[$,n]),j=(0,tY.xx)((e,t)=>{let l=new Map,r=t.map(e=>e.type===t4.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let i=r.indexOf(e);-1!==i&&(0,nb.mx)(i,n).forEach(e=>{let n=t[e],r="STYLE_FOLDER"===n.type?n.name:n.node_id,i=l.get(r);i||(i=0),l.set(r,i+1)})}),l}),J=l.useCallback(()=>{if(!C)return;let t=(0,nb.QA)(C,n);if(0===t.length)return;let l=t[0],r=n.indexOf(l),i=r,a=r+1;if(l.type===t4.PW.STYLE&&n[a]&&n[a].type===t4.PW.STYLE){let e=(0,nb.rM)(l);for(let t=r+1;t<n.length;t++){let l=n[t];if("STYLE_FOLDER"===l.type&&l.level===e||(0,nb.rM)(l)<e){i=t-1,a=t;break}t===n.length-1&&(i=t,a=t+1)}}$(t,n[i],n[a],!0);let o=(0,t0.In)(l.name),c=N?(0,x.t)("design_systems.create_style.new_folder"):(0,x.t)("design_systems.create_style.untitled_folder");o&&(c=`${o}/${c}`);let d=(e,t)=>{if(e.type===t4.PW.STYLE){let n=c+"/"+t+(0,t0.kH)(e.name);es.l7.user("rename-style",()=>{s.glU.renameNode(e.node_id,n)})}else{let n=t+(0,t0.kH)(e.name)+"/";e.styles.forEach(e=>{d(e,n)}),e.subfolders.forEach(e=>{d(e,n)})}};t.forEach(e=>{d(e,"")}),P({type:e,folderNames:new Set([c]),styleIds:new Set}),p(c,!1,e)},[P,$,N,C,p,n,e]),Z=l.useCallback((e,t)=>{let l=n[e];"STYLE_FOLDER"===l.type&&M(e=>{let n=new Set(e);return t?n.add(l.name):n.delete(l.name),n})},[n]),q=l.useCallback((e,t)=>{M(l=>{let r=new Set(l),i=n[e];if("STYLE_FOLDER"===i.type){let e=(0,t0.In)(i.name),n=""===e?t:e+"/"+t;O.has(i.name)&&(O.delete(i.name),O.add(n)),(0,nb.KU)(i).forEach(e=>{if(O.has(e.name)){let t=e.name.replace(i.name,"");O.add(n+t),O.delete(e.name)}})}return r}),d(n,e,t)},[d,O,n]),ee=l.useCallback(e=>{_(n,e)},[_,n]),et=l.useCallback((e,t,n)=>{let l=t>.5?1:Math.round(1e3*t)/1e3;F({index:e,type:n?"in":"before"}),U(l)},[]),en=l.useCallback(()=>{M(e=>es.l7.user("delete-styles",()=>{let t=new Set(e);return(C?(0,nb.QA)(C,n):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,nb.a2)(e,v?.key||null),O.delete(e.name),(0,nb.KU)(e).forEach(e=>O.delete(e.name))):(0,nb.Nr)(e,v?.key||null)}),t})),Q.Y5.triggerAction("commit"),k.isShown&&(I(g.sw()),I(K.XE()),s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID)),P(null)},[k.isShown,P,C,n,v?.key,O,I]),el=l.useMemo(()=>{let e=C?(0,nb.QA)(C,n):[];return(0,nb.Ug)(e).map(e=>e.node_id)},[C,n]),er=l.useCallback(()=>{es.l7.user("cut-styles",()=>s.glU.cutStyles(el))},[el]),ei=l.useCallback((e,t)=>{t===t5.zy.PASTE?es.l7.user("paste-styles",()=>s.glU.pasteStyles()):e.shouldPropagate=!0},[]);l.useEffect(()=>{if(!C)return;let e=e=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||er()};return document.addEventListener("cut",e),()=>{document.removeEventListener("cut",e)}},[er,C]);let ea=l.useCallback(()=>{s.glU.pasteStyles()},[]),eo=l.useCallback(e=>{L(t=>[...t,e])},[]),ec=l.useCallback(()=>{u()},[u]),ep=h.rf(f,"ondragend",l.useCallback(()=>{F(null),U(null),L([]),m()},[m])),ed=(0,tG.ZC)(C);l.useEffect(()=>{ed!==C&&C&&M(e=>{let n=new Set(e);for(let e of C.styleIds.values()){let l=t.find(t=>t.node_id===e);if(!l)continue;let r=(0,t0.ke)(l.name);for(let e=0;e<r.length;e++){let t=r.slice(0,e).join("/");n.delete(t)}}return n})},[C,ed,t]);let eu=l.useRef(null),em=l.useCallback(e=>{eu.current=e},[eu]),eh=l.useMemo(()=>C?(0,nb.h$)(C,n):[],[C,n]),eE=l.useMemo(()=>A?(0,nb.h$)(A,n):[],[A,n]),e_=l.useMemo(()=>[...eh,...eE].sort((e,t)=>e-t),[eh,eE]),ey=l.useCallback((e,t,r,i,a,s)=>{let d="STYLE_FOLDER"===e.type?e.name:e.node_id,u=!1,m=!1;for(let t of R)if("STYLE_FOLDER"===e.type){if(e.name===t){m=!0;break}e.name.startsWith(t)&&(u=!0)}else if((0,t0.In)(e.name)===t){u=!0;break}if(!m&&!u&&j(O,n).has(d))return null;let h=e_&&e_[e_.length-1]===t,_=e_&&e_[0]===t;if(e.type===t4.PW.STYLE){let n=(0,nb.rM)(e),c=null!=o&&o===e.node_id;return l.createElement(ny,{hideStylePreview:W,recordingKey:`style-row-${t}`,index:t,key:e.node_id,isDragging:i,dsStyle:e,selected:r,selectedSecondary:A?.styleIds.has(e.node_id)||!1,level:n,stylePreviewShown:k,onContextMenu:ee,updateContextMenuStyleRef:y,updateFocusRowRef:r?em:null,onMouseDown:a,onMouseMove:s,onInspectStyle:E,updateSelection:P,isEditable:w,deleteSelectedItems:en,isRenaming:c,onRenameItem:p,stopRenamingItem:q,onCreateFolder:J,isLastChildOfSelection:h})}{let n=null!=c&&c.name===e.name&&c.styleTypeSection===e.styleTypeSection,o=z?.folderNameToNestUnder||null;return l.createElement(np,{recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,key:t,index:t,isDragging:i,folder:e,selected:r,selectedSecondary:A?.folderNames.has(e.name)||!1,isCollapsed:O.has(e.name),temporarilyExpandFolder:eo,isTemporarilyExpanded:m,isRenaming:n,folderNameToNestUnder:o,onRenameItem:p,stopRenamingItem:q,level:e.level,toggleFolder:e=>Z(t,e),onContextMenu:ee,onCreateFolder:J,onMouseDown:a,onMouseMove:s,isEditable:w,deleteSelectedItems:en,hideStylePreview:W,isFirstChildOfSelection:_})}},[P,e_,O,en,z?.folderNameToNestUnder,j,W,ee,J,E,p,c,o,A?.folderNames,A?.styleIds,q,n,k,eo,R,Z,y,w,em]),eg=l.useCallback(t=>{let l=new Set,r=new Set;t.forEach(e=>{let t=n[e];"STYLE_FOLDER"===t.type?l.add(t.name):r.add(t.node_id)}),P({type:e,folderNames:l,styleIds:r})},[P,n,e]),eP=l.useRef(),eS=l.useRef();return l.useEffect(()=>{eP.current&&eh.length?(eP.current(),eu.current&&!eu.current.contains(document.activeElement)&&eu.current.focus()):eS.current&&!eh.length&&(eS.current(),eu.current=null)},[eP,eh,eu]),l.createElement(T.vL,{name:"StyleDraggableList",handleClipboard:ei,focusFunctionRef:eP,blurFunctionRef:eS},l.createElement(ng,{styleType:e},l.createElement(nG,{recordingKey:"style-draggable-list",listItems:n,onInsertItemsIn:X,canInsertItemsIn:G,onInsertItemsBetweenValues:$,onDrag:et,onDragStart:ec,onDragEnd:ep,insertDividerStyle:z?.dividerStyles,selectedIndices:eh,updateSelection:eg,renderListItem:ey,scrollContainer:b,isDragDisabled:!w}),l.createElement(nk,{styleRowRef:S,onDeleteItems:en,onCutItems:er,onPasteItems:ea,onRenameItem:p,onEditStyle:E,onCreateFolder:J,styleType:e})))}class nG extends t3.q{}var nY=n(987950),nW=n(875157),nQ=n(535904),nz=n(520581),n$=n(869156),nX=n(635736);function nj(e){return e.modalShown?.type===nX.y.type||e.modalShown?.prevModal?.type===nX.y.type}function nJ(){let e=(0,nX.m)(),t=(0,l.useCallback)(()=>{e()},[e]),n=(0,r.d4)(nj),i=0===(0,n$.Rb)().length&&!n;return l.createElement(tz.p,{name:"local_variables_panel"},l.createElement(e3.Zk,null,l.createElement(e3.fI,{className:i?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},l.createElement(e3.xw,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,x.tx)("variables.local_variables_panel.local_variables_title")),l.createElement(nz.E,{name:"variables_modal_button"},(0,u.kc)().fpl_variables_button_migration?l.createElement(nQ.d,{onClick:t,recordingKey:(0,h.Pt)("localVariablesPanel","variablesModalButton"),toggled:n,"aria-label":(0,x.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,x.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(ez.U,{svg:n_.A},l.createElement(nd.A,null))):l.createElement(tr.YW,{className:"local_variables_panel--openAuthoringModalButton--FiNXt draggable_list--addButton--D0q--",selected:n,recordingKey:(0,h.Pt)("localVariablesPanel","variablesModalButton"),"data-tooltip":(0,x.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":eJ.Ib.TEXT,onClick:t},l.createElement(ez.U,{svg:n_.A},l.createElement(nd.A,null)))))))}var nZ=n(19038);function nq({recordingKey:e}){let t=(0,r.wA)(),{version:n}=(0,eW.DP)(),i=(0,r.d4)(tI._k),a=!(0,r.d4)(tT.Jp),s=(0,r.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===tf.C4),o=(0,r.d4)(e=>!!e.modalShown&&e.modalShown.type===tw.n.type),c=(0,r.d4)(e=>e.pickerShown),p=s||o||c?.id===tf.Dd,d=!!(0,r.d4)(tl.Z3).length,u=(0,r.d4)(tl.K4),m=!!u?.length,h=l.useRef(null),E=l.useRef(null),_=l.useCallback(()=>{c&&t(K.XE()),s?t(e$.oB()):t(e$.j7({type:tf.C4}))},[t,c,s]),y=l.useCallback(()=>{let e=eH.findDOMNode(E.current),n=e?(0,eZ.cn)(e,tf.wh):{};t(K.u1({id:tf.Dd,initialX:n?.x,initialY:n?.y}))},[t]);return i&&m?l.createElement(e3.Zk,{ref:E},l.createElement("ui3"===n?tV:tF,{isPanelEmpty:a,isAddPropButtonSelected:p,hasBubbledInstances:d,selectAddPropOptionRef:h,toggleAddPropDropdown:_,stateGroupSelectionMode:void 0}),s&&h.current&&l.createElement(e0.Cf,{targetRect:h.current.getBoundingClientRect(),propagateCloseClick:!0},l.createElement(eQ.c$,{disabled:!0,className:tO},(0,x.tx)("design_systems.component_properties.expose_nested_instances")),l.createElement(eQ.c$,{className:tA,onClick:y,recordingKey:"openBubbledPropPicker"},l.createElement(eq.Nu,null,l.createElement(ez.U,{svg:tR.A},l.createElement(nZ.r,null))),(0,x.t)("design_systems.component_properties.choose_instances"))),c?.id===tf.Dd&&l.createElement(tv,null),d&&l.createElement(l.Fragment,null,l.createElement("p",{className:tM},(0,x.t)("design_systems.component_properties.bubbled_instances")),l.createElement(ty,{recordingKey:e}))):null}var n0=n(324666),n1=n(872429),n5=n(753243),n4=n(898536),n3=n(662294);function n6({recordingKey:e}){let[t,n]=(0,n4.Xw)();return l.createElement(e3.Zk,{className:"slides_align_panel--panel--4jgTN",...n},l.createElement(n3.l,{isHoveringOverPanel:t,inSlidesPanel:!0,recordingKey:e}))}var n2=n(421757),n7=n(427113),n8=n(973149),n9=n(723081),le=n(46878),lt=n(100197),ln=n(218973),ll=n(952675),lr=n(149658),li=n(623711),la=n(708918),ls=n(538697),lo=n(12519),lc=n(377835),lp=n(683570),ld=n(343559),lu=n(983724),lm=n(195601),lh=n(366501);function lE({panelClassName:e,children:t,hideBorderBottom:n}){return l.createElement("div",{className:p()("slides_panel--panel--lPYTn",{"slides_panel--withBorderBottom--CymRv":!n},e),"data-non-interactive":!0},t)}function l_({titleTx:e,input:t}){return l.createElement(lE,{panelClassName:"slides_panel--panelTitleInput--Paowl"},l.createElement(ld.s9,{titleTx:e,input:t}))}let ly="slides_animation_panel--row--cC8Np",lg="slides_animation_panel--rowInput--klQ98",lP="slides_animation_panel--rowWithPadding--CVhk5 slides_animation_panel--row--cC8Np",lS="slides_animation_panel--rowWithPaddingSpacer3--N0vBM slides_animation_panel--row--cC8Np",lb="slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce";var lf=n(579758);let lv=["SMART_ANIMATE","DISSOLVE","PUSH","SLIDE","SLIDE_OUT","MOVE","MOVE_OUT"],lw=["EASE_IN","EASE_OUT","EASE_IN_AND_OUT"],lT=["GENTLE","QUICK","BOUNCY","SLOW"],lI={EASE_IN:s.mgy.IN_CUBIC,EASE_OUT:s.mgy.OUT_CUBIC,EASE_IN_AND_OUT:s.mgy.INOUT_CUBIC,LINEAR:s.mgy.LINEAR,GENTLE:s.mgy.GENTLE_SPRING,QUICK:s.mgy.SPRING_PRESET_ONE,BOUNCY:s.mgy.SPRING_PRESET_TWO,SLOW:s.mgy.SPRING_PRESET_THREE},lk=e=>lT.includes(e),lN=["ON_CLICK","AFTER_TIMEOUT"],lC={[s.v$l.NONE]:{behavior:"INSTANT"},[s.v$l.DISSOLVE]:{behavior:"DISSOLVE"},[s.v$l.SLIDE_FROM_LEFT]:{direction:"LEFT",behavior:"SLIDE"},[s.v$l.SLIDE_FROM_RIGHT]:{direction:"RIGHT",behavior:"SLIDE"},[s.v$l.SLIDE_FROM_TOP]:{direction:"TOP",behavior:"SLIDE"},[s.v$l.SLIDE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE"},[s.v$l.SLIDE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"SLIDE_OUT"},[s.v$l.SLIDE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"SLIDE_OUT"},[s.v$l.SLIDE_OUT_TO_TOP]:{direction:"TOP",behavior:"SLIDE_OUT"},[s.v$l.SLIDE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE_OUT"},[s.v$l.PUSH_FROM_LEFT]:{direction:"LEFT",behavior:"PUSH"},[s.v$l.PUSH_FROM_RIGHT]:{direction:"RIGHT",behavior:"PUSH"},[s.v$l.PUSH_FROM_TOP]:{direction:"TOP",behavior:"PUSH"},[s.v$l.PUSH_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"PUSH"},[s.v$l.MOVE_FROM_LEFT]:{direction:"LEFT",behavior:"MOVE"},[s.v$l.MOVE_FROM_RIGHT]:{direction:"RIGHT",behavior:"MOVE"},[s.v$l.MOVE_FROM_TOP]:{direction:"TOP",behavior:"MOVE"},[s.v$l.MOVE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE"},[s.v$l.MOVE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"MOVE_OUT"},[s.v$l.MOVE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"MOVE_OUT"},[s.v$l.MOVE_OUT_TO_TOP]:{direction:"TOP",behavior:"MOVE_OUT"},[s.v$l.MOVE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE_OUT"},[s.v$l.SMART_ANIMATE]:{behavior:"SMART_ANIMATE"}},lA=new n9.el(!0),lO=new n9.VG,lM=new lr.Mk;function lR({behavior:e,duration:t,direction:n,triggerType:l,triggerDelay:r,easingType:i}){return{type:function(e,t){for(let[n,{behavior:l,direction:r}]of Object.entries(lC))if(l===e&&r===t)return n;return s.v$l.NONE}(e,n),duration:lk(i)?(e=>{let t=lL(e);return(0,la.J5)((0,la.w_)(t))})(i):t,easingType:function(e){let t=lI[e||"EASE_OUT"];return void 0!==t?t:s.mgy.OUT_CUBIC}(i),trigger:{type:"AFTER_TIMEOUT"===l?s.tbx.AFTER_DELAY:s.tbx.ON_CLICK,delay:"AFTER_TIMEOUT"===l&&r?r:0}}}let lL=e=>{switch(e){case"GENTLE":return[1,100,15,0];case"QUICK":return[1,300,20,0];case"BOUNCY":return[1,600,15,0];default:return[1,80,20,0]}},lx=[.1,.2,.3,.5,1,2];class lD extends ls.c${}let lF=[0,.05,.1,.2,.3,.5,1,2];class lV extends ls.c${}let lK=new n8.ag(n8.i5.MILLISECONDS,.01,10),lU=new n8.ag(n8.i5.MILLISECONDS,.001,30),lH=e=>{let t={type:s.v$l.NONE,duration:0,easingType:s.mgy.OUT_CUBIC,trigger:{type:s.tbx.ON_CLICK,delay:0}},n=o.AD;return e.forEach(e=>{let l=s.Ez5.slideAnimationBindings().getSlideTransition(e);l&&t.type===s.v$l.NONE&&(t=l,n=e)}),{appliedTransition:t,slideGuid:n}},lB=(e,t,n)=>l=>{let r={...t};if("behavior"===e){let e=t.direction;"INSTANT"===l||"DISSOLVE"===l||"SMART_ANIMATE"===l?e=void 0:void 0===e&&(e="LEFT"),r.direction=e,"INSTANT"===l&&(r.triggerType="ON_CLICK")}"easingType"===e&&l&&!lk(l)&&lk(t.easingType)&&(r.duration=.3);let i=lR({...r,[e]:l});es.l7.user("slide-transition",()=>{n.forEach(e=>{s.Ez5.slideAnimationBindings().setSlideTransition(e,i)}),Q.Y5.commit()})};function lG(){let e=(0,r.wA)(),t=(0,nS.Um)(),n=(0,lu.l5)(),{appliedTransition:i,slideGuid:a}=lH(n),o=(0,eo.Fk)((e,t)=>{if(e){let n=e.get(t);if(n)return n.name}return null},a),c=o?(0,x.t)("fullscreen.properties_panel.layer_header.node_type_slide",{slideNumber:o}):(0,x.t)("slides.properties_panel.slide_transition"),p=function(e){let{behavior:t,direction:n}=lC[e.type],l=function(e){for(let[t,n]of Object.entries(lI))if(n===e)return t;return"EASE_OUT"}(e.easingType),r=Math.round(1e3*e.duration)/1e3;if(lk(l)){let e=lL(l);r=(0,li.xX)((0,la.w_)(e))}let i=Math.round(1e3*e.trigger.delay)/1e3;return{behavior:t,direction:n,duration:r,easingType:l,triggerType:e.trigger.type===s.tbx.AFTER_DELAY?"AFTER_TIMEOUT":"ON_CLICK",triggerDelay:i}}(i),d=lB("triggerType",p,n),m=lB("triggerDelay",p,n),h=lB("behavior",p,n),E=lB("direction",p,n),_=lB("duration",p,n),y=lB("easingType",p,n),g=!("INSTANT"===p.behavior||"DISSOLVE"===p.behavior||"SMART_ANIMATE"===p.behavior),P="INSTANT"!==p.behavior,S="AFTER_TIMEOUT"===p.triggerType,b=l.createElement(ez.U,{svg:lf.A},l.createElement(n7.A,null));return l.createElement(tz.p,{name:"slides_animation_panel"},l.createElement(lE,null,(0,u.kc)().piper_transition_controls?l.createElement("p",{className:"slides_animation_panel--transitionTitle---2ON-"},c):l.createElement(ld.r,{titleTx:(0,x.tx)("slides.properties_panel.slide_transition")}),l.createElement("div",{className:(0,u.kc)().piper_transition_controls?lP:ly},l.createElement("label",null,(0,x.tx)("slides.properties_panel.slide_transition.style")),l.createElement(nz.E,{name:"slide_transition_style"},l.createElement(ls.l6,{formatter:lA,id:"slide-transitions-behavior-select",property:p.behavior,onChange:h,dispatch:e,dropdownShown:t},l.createElement(ls.c$,{value:"INSTANT",key:"INSTANT"}),l.createElement(ls.sK,null),lv.map(e=>l.createElement(ls.c$,{value:e,key:e}))))),g&&l.createElement("div",{className:ly},l.createElement("label",null,(0,x.tx)("slides.properties_panel.slide_transition.direction")),l.createElement(nz.E,{name:"slide_transition_direction"},l.createElement(lr.sP,{onChange:E,property:p.direction??null}))),(0,u.kc)().piper_transition_controls&&P&&l.createElement(l.Fragment,null,l.createElement(nz.E,{name:"slide_transition_easing"},l.createElement("div",{className:ly},l.createElement("label",null,(0,x.tx)("slides.properties_panel.slide_transition.curve")),l.createElement(ls.l6,{formatter:lM,id:"slide-transitions-easing-select",property:p.easingType,onChange:y,dispatch:e,dropdownShown:t},l.createElement(ls.c$,{value:"LINEAR",key:"LINEAR"}),l.createElement(ls.sK,null),lw.map(e=>l.createElement(ls.c$,{value:e,key:e})),l.createElement(ls.sK,null),lT.map(e=>l.createElement(ls.c$,{value:e,key:e}))))),l.createElement(tz.p,{name:"slides_duration"},l.createElement("div",{className:ly},l.createElement("label",null,(0,x.tx)("slides.properties_panel.slide_transition.duration")),l.createElement("div",{className:lg},l.createElement(nz.E,{name:"slides_duration_dropdown"},l.createElement(ll.ow,{value:{select:lo.pW,inputComponent:lo.gm}},l.createElement(ls.tV,{value:{chevron:lc.t}},l.createElement(ln.W0,{id:"slide-animation-duration",disabled:lk(p.easingType),onValueChange:_,value:p.duration,dropdownShown:t,min:.01,max:10,icon:b,dispatch:e,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("slides.properties_panel.slide_transition.duration"),tooltipForScreenReadersOnly:!0,enablePreview:!0},lx.map(e=>l.createElement(lD,{key:`duration-${e}`,value:e},lK.format(e)))))))))))),(0,u.kc)().piper_transition_controls&&P&&l.createElement(lE,null,l.createElement("div",{className:lP},l.createElement("label",null,(0,x.tx)("slides.properties_panel.slide_transition.timing")),l.createElement(ls.l6,{formatter:lO,id:"slide-transitions-trigger-select",property:p.triggerType,onChange:d,dispatch:e,icon:(0,le.e7)(p.triggerType),dropdownShown:t},lN.map(e=>l.createElement(ls.c$,{icon:(0,le.e7)(e),value:e,key:e})))),S&&l.createElement(tz.p,{name:"slides_delay"},l.createElement("div",{className:ly},l.createElement("label",null,(0,x.tx)("slides.properties_panel.slide_transition.delay")),l.createElement("div",{className:lg},l.createElement(nz.E,{name:"slides_delay_dropdown"},l.createElement(ll.ow,{value:{select:lo.pW,inputComponent:lo.gm}},l.createElement(ls.tV,{value:{chevron:lc.t}},l.createElement(ln.W0,{id:"slide-animation-delay",onValueChange:m,value:p.triggerDelay,dropdownShown:t,min:.001,max:30,icon:b,dispatch:e,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("slides.properties_panel.slide_transition.delay"),tooltipForScreenReadersOnly:!0,enablePreview:!0},lF.map(e=>l.createElement(lV,{key:`delay-${e}`,value:e},lU.format(e))))))))))),P&&l.createElement("div",{className:lS},l.createElement("div",{style:{width:"100%"}},l.createElement(lY,{appliedProperties:p}))),l.createElement("div",{className:lS},l.createElement(n2.IK,{variant:"secondary",onClick:()=>{var e;return e=lR(p),void es.l7.user("slide-transition-all-slides",()=>{s.Ez5.slideAnimationBindings().setSlideTransitionForAll(e),Q.Y5.commit()})}},(0,x.tx)("slides.properties_panel.slide_transition.apply_to_all"))))}function lY({appliedProperties:e}){let t=(0,lh.Jj)(),n=(0,lt.J2)(s.Ez5.slideDeck().slideGrid),r=(0,lh.Rn)(n,t),i="MOVE_OUT"===e.behavior||"SLIDE_OUT"===e.behavior,a=i?t:r??o.AD,c=i?r??o.AD:t,p=(0,lm.p)(a),d=(0,lm.p)(c),u=lk(e.easingType),m={behavior:e.behavior,direction:e.direction??null,shouldSmartAnimate:"SMART_ANIMATE"===e.behavior,duration:e.duration,easing:e.easingType,isSpringTransition:u,easingFunction:u?lL(e.easingType):[],preserveScroll:!1,resetVideoPosition:!0,openUrlInNewTab:!1,resetInteractiveComponents:!1,resetScrollPosition:!1};return u?l.createElement(lp.SA,{transition:m,isUI3:!0}):l.createElement(lW,{transition:m,belowThumbnailUrl:d,aboveThumbnailUrl:p})}class lW extends lp.ub{rectangleStateToCSSStyle(e,t,n,l){let r=this.cssEasingFunction(e),i=this.cssDuration(e);return{transition:n===lp.H_.RETURN_TO_START?"all ease-out 200ms":n===lp.H_.STATIC?"unset":`all ${i}s ${r}`,top:25.5+45*t.top,left:80+80*t.left,opacity:t.opacity,border:0}}renderSimpleScreenToScreenAnimationPreview(e,t,n,r,i,a,s){return l.createElement("div",{className:"slides_animation_panel--previewPanel--0XANz transition_preview--previewPanel--Gp-aI",onMouseEnter:this.onMouseEnterNew,onMouseLeave:this.onMouseLeaveNew},l.createElement("div",{className:p()(e,lb),style:t},l.createElement("img",{src:this.props.belowThumbnailUrl,alt:"",className:Z.cx.relative.wFull.hFull.$})),l.createElement("div",{className:p()(n,lb),style:r},l.createElement("img",{src:this.props.aboveThumbnailUrl,alt:"",className:Z.cx.relative.wFull.hFull.$})),l.createElement("div",{className:"slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}),l.createElement("div",{className:"slides_animation_panel--screenBorder--G7ZdP transition_preview--screenBorder--Fz-dz transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}))}}var lQ=n(730371),lz=n(831841),l$=n(978783),lX=n(623402),lj=n(555074),lJ=n(149988);function lZ(e){return l.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.486 5.143a1 1 0 0 0 0 1.715L4.39 8 2.486 9.143a1 1 0 0 0 0 1.715l4.485 2.69a2 2 0 0 0 2.058 0l4.486-2.69a1 1 0 0 0 0-1.715L11.61 8l1.905-1.142a1 1 0 0 0 0-1.715L9.029 2.45a2 2 0 0 0-2.058 0zM9.666 8l.973-.583 1.39-.834L13 6l-.972-.583-3.514-2.108a1 1 0 0 0-1.028 0L3.972 5.417 3 6l.972.583 1.39.834.971.583 1.152.691a1 1 0 0 0 1.03 0zm-4.304.583 1.609.966a2 2 0 0 0 2.058 0l1.61-.966 1.39.834L13 10l-.972.583-3.514 2.108a1 1 0 0 1-1.028 0l-3.514-2.108L3 10l.972-.583z",clipRule:"evenodd"}))}var lq=n(597616),l0=n(505113),l1=n(775664),l5=n(750029);let l4=l.forwardRef(function({isOpen:e,onMouseDown:t,children:n,recordingKey:r},i){return l.createElement(e9.GG,{forwardedRef:i,className:p()("slides_flyout_input--input--cM6kp ellipsis--ellipsis--Tjyfa",{"slides_flyout_input--selected--CgFEs":e}),onMouseDown:t,recordingKey:r},n,l.createElement(t2.O,null))});var l3=n(742934),l6=n(173915),l2=n(380620),l7=n(860601),l8=n(750693),l9=n(99123);function re({paint:e,onColorChange:t,openColorPicker:n,closeColorPicker:r,isPickerOpen:i,icon:a,recordingKey:s}){let[o,c]=l.useState(!1),d=l.useRef(null),u=()=>{i?(r(),d.current?.blur()):(n(),d.current?.focus(),d.current?.select())};return l.createElement("div",{className:p()(l9.oE,{[l9.in]:o})},l.createElement(rt,{onClick:u,recordingKey:h.Pt(s,"chit")},a),l.createElement(l8.So,{focusableRef:d,paint:e,onFocus:()=>{c(!0),n()},onBlur:()=>c(!1),onMouseDown:e=>{e.stopPropagation(),o&&r()},onColorChange:e=>{t(e),r()},onTypeMouseDown:l7.lQ,isUI3:!0,visible:!0,noBorderOnFocus:!0,recordingKey:s}),l.createElement(rt,{onClick:u,recordingKey:h.Pt(s,"chevron")},l.createElement(t2.O,null)))}function rt({onClick:e,recordingKey:t,children:n}){let r=(0,G.ft)()||(0,M.PN)(),i=t=>{t.stopPropagation(),t.preventDefault(),e()};return l.createElement(l2.E,{className:Z.cx.hFull.px4.bgTransparent.$,onClick:r?i:void 0,htmlAttributes:{onMouseDown:r?void 0:i},actionOnPointerDown:!0,recordingKey:t},n)}let rn={type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1,blendMode:"NORMAL"};function rl({paint:e,onChange:t,inheritStyleKey:n,inheritStyleName:i,inheritStyleId:a,pickerId:o,inheritStyleKeyField:c,hideCustomColorPickerFillTypeToggle:p,recordingKey:d}){let u=(0,r.d4)(e=>e.pickerShown&&e.pickerShown.id===o?e.pickerShown:null),m=(0,l.useRef)(null),h=!!e&&(0,z.hS)(e)&&(0,$.bn)(e.type),{openColorPicker:E,closeColorPicker:_}=function(e,t,n,i,a){let o=(0,r.wA)(),c=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),p=(0,l3.jj)(e);return{openColorPicker:l.useCallback(()=>{if(!n){if(i.current){let{x:e,y:n}=(0,eZ.cn)(i.current,a?l6.jP:n5.pg);o(K.u1({id:t,initialX:e-16,initialY:n})),p()}else console.error("rowRef.current is null")}},[t,n,o,i,a,p]),closeColorPicker:l.useCallback(()=>{c===s.m1T.GRADIENT&&Q.Y5.triggerAction("leave-edit-mode"),o(K.XE())},[o,c])}}(e,o,u,m,h);return l.createElement(l.Fragment,null,l.createElement("span",{ref:m},l.createElement(rr,{paint:e,onChange:t,inheritStyleKey:n,inheritStyleName:i,inheritStyleId:a,isPickerOpen:!!u,openColorPicker:E,closeColorPicker:_,recordingKey:d})),u&&e&&(h?l.createElement(l6.Ph,{paint:e,onChange:t,onClose:_,initialPosition:new eI.Mi(u.initialX,u.initialY),enableGradients:!0,hideCustomColorPickerFillTypeToggle:p,inheritStyleKeyField:c}):l.createElement(n5.GY,{paint:e,onChange:t,onClose:_,pickerShown:u,hideCustomColorPickerFillTypeToggle:p,inheritStyleKeyField:c})))}function rr({paint:e,onChange:t,inheritStyleKey:n,inheritStyleName:r,inheritStyleId:i,isPickerOpen:a,openColorPicker:s,closeColorPicker:o,recordingKey:c}){let[p]=(0,lj.lJ)("slidesDividedSwatchColors"),d=(0,l3.Gc)(),u=!!e&&(0,z.hS)(e)&&(0,$.bn)(e.type),m=!!e&&(0,z.hS)(e)&&(0,$.sb)(e.type),h=(0,l3.Mg)("FILL",n,i),E=(0,l.useMemo)(()=>(0,z.hS)(e)&&e&&e.color?[e.color]:Array.isArray(p)&&p.length>1?p:[{r:1,g:1,b:1,a:1}],[p,e]),_=(()=>{if((0,z.gl)(e))return null;let t=e?.colorVar?.value?.alias;return t?lq.dI(t):null})(),y=()=>(0,z.gl)(e)||(0,z.gl)(r)?(0,x.t)("fullscreen.mixed"):r||(d?(0,x.t)("slides.properties_panel.color_picker.multiple"):u?(0,x.t)("slides.properties_panel.fill.fill_type_gradient"):l1.TI.format(E[0])),g=l.useMemo(()=>d?l.createElement(lZ,null):h?l.createElement(nh.zi,{dsStyle:h,disableTooltip:!0}):l.createElement(ra,{colors:E,paint:e}),[d,h,E,e]),P=!d&&m&&!e.colorVar&&!h;return l.createElement(nz.E,{name:"slides_color_input"},P?l.createElement(re,{paint:e,onColorChange:e=>t((0,l3.NQ)(e)),openColorPicker:s,closeColorPicker:o,isPickerOpen:a,icon:g,recordingKey:c}):l.createElement(l4,{isOpen:a,onMouseDown:e=>{e.stopPropagation(),a?o():s()},recordingKey:c},l.createElement("span",{className:Z.cx.pl4.inlineFlex.gap6.overflowHidden.$},g,!r&&_?l.createElement(ri,{variableId:_,fallbackText:y()}):l.createElement(l0.o,{text:y()}))))}function ri({variableId:e,fallbackText:t}){let n=(0,n$.u)(e);return l.createElement(l0.o,{lastClassName:Z.cx.overflowHidden.noWrap.ellipsis.$,text:n?.name??t})}function ra({colors:e,paint:t}){if(!(e.length>1))return l.createElement(l5.J,{className:Z.cx.w14.h14.bRadius2.$,paint:t??rn,allowMouseDownPropagation:!0});{let t={type:"SOLID",color:e[0],opacity:1,blendMode:"NORMAL"},n={type:"SOLID",color:e[1],opacity:1,blendMode:"NORMAL"};return l.createElement("div",{className:Z.cx.relative.w14.h14.$},l.createElement("span",{className:Z.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 0%, 100% 0%, 0% 100%)"}},l.createElement(l5.J,{className:Z.cx.w14.h14.bRadius2.$,paint:t,allowMouseDownPropagation:!0})),l.createElement("span",{className:Z.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 100%, 100% 100%, 100% 0%)"}},l.createElement(l5.J,{className:Z.cx.w14.h14.bRadius2.$,paint:n,allowMouseDownPropagation:!0})))}}var rs=n(902237);function ro({legend:e,value:t,onChange:n,recordingKey:r,children:i}){return l.createElement("div",{className:Z.cx.py4.pr8.pl16.$},l.createElement(lz.I.Root,{legend:l.createElement(rs.q,null,e),value:t,onChange:n,recordingKey:r},i))}var rc=n(26659),rp=n(344764);class rd extends ls.c${}let ru=[0,2,4,8,16,24],rm=["NONE","SOLID","DASHED_BIG","DASHED_SMALL"],rh=rm.filter(e=>"NONE"!==e);function rE({recordingKey:e}){let t=(0,r.wA)(),n=(0,nS.Um)(),{smallNudgeAmount:i,bigNudgeAmount:a}=(0,b.sT)(),[s,o]=(0,lj.lJ)("strokeWeight"),[c,p]=(0,lj.lJ)("dashPattern"),[d,u]=(0,lj.lJ)("strokePaints"),[m]=(0,lj.lJ)("inheritFillStyleKeyForStroke"),[E]=(0,lj.lJ)("inheritFillStyleNameForStroke"),[_]=(0,lj.lJ)("styleIdForStrokeFill"),y=d?(0,z.hS)(d)?d[0]:z.oV:void 0,g=(0,lj.kl)("numSelectedByType"),P=g&&(0,z.hS)(g)&&(0,Y.Kl)(g,["LINE","TABLE","CONNECTOR"]),f=g&&(0,z.hS)(g)&&(0,Y.vx)(g,"TABLE"),v=l.useMemo(()=>({NONE:{value:void 0,displayText:(0,x.t)("slides.properties_panel.border_panel.style_none"),icon:l.createElement(l$.t,null)},SOLID:{value:[],displayText:(0,x.t)("slides.properties_panel.border_panel.style_solid"),icon:l.createElement(lX.y,null)},DASHED_BIG:{value:[20,24],displayText:(0,x.t)("slides.properties_panel.border_panel.style_dashed_big"),icon:l.createElement(te.B,{svg:rc.A,className:Z.cx.colorIconSecondary.$})},DASHED_SMALL:{value:[8,10],displayText:(0,x.t)("slides.properties_panel.border_panel.style_dashed_small"),icon:l.createElement(te.B,{svg:rp.A,className:Z.cx.colorIconSecondary.$})}}),[]),[w,T]=l.useState(()=>I(c));function I(e){if(!(0,z.gl)(e))return e&&y?(0,lQ.deepEquals)(e,v.SOLID.value)?"SOLID":(0,lQ.deepEquals)(e,v.DASHED_BIG.value)?"DASHED_BIG":(0,lQ.deepEquals)(e,v.DASHED_SMALL.value)?"DASHED_SMALL":"NONE":"NONE"}return(0,tJ.f4)(()=>{T(I(c))}),l.createElement(tz.p,{name:"slides_border_panel"},l.createElement(lE,null,l.createElement(ld.r,{titleTx:(0,x.tx)("slides.properties_panel.border_panel.title")}),l.createElement(ro,{legend:(0,x.tx)("slides.properties_panel.border_panel.style_title"),value:w,onChange:e=>{let t=v[e].value;("NONE"===w||(0,z.gl)(c))&&t&&Q.Y5.triggerActionInUserEditScope("add-stroke-to-selection"),t?p(t):u([]),T(e)},recordingKey:h.Pt(e,"borderStyle")},(P?rh:rm).map(e=>l.createElement(lz.I.Option,{key:e,value:e,icon:v[e].icon,"aria-label":v[e].displayText,htmlAttributes:{"data-onboarding-key":v[e].displayText}}))),"NONE"!==w&&y&&l.createElement(lJ.g,{leftLabel:(0,x.tx)("slides.properties_panel.border_panel.color"),leftInput:l.createElement(rl,{paint:y,onChange:e=>{u([e])},inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:m,inheritStyleName:E,inheritStyleId:_,pickerId:`${S.Yr}-border`,recordingKey:h.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1}),rightLabel:(0,x.tx)("slides.properties_panel.border_panel.width_slider_tooltip"),rightInput:l.createElement(nz.E,{name:"slides_corner_radius_dropdown"},l.createElement(ll.ow,{value:{select:lo.pW,inputComponent:lo.gm}},l.createElement(ls.tV,{value:{chevron:lc.t}},l.createElement(ln.YZ,{id:"border-width-select",onValueChange:e=>{o(e)},value:void 0===s||(0,z.gl)(s)?z.oV:s,dropdownShown:n,willShowDropdown:()=>(Q.Y5.commit(),Promise.resolve()),min:1,max:50,dispatch:t,recordingKey:h.Pt(e,"borderWidth"),smallNudgeAmount:i,bigNudgeAmount:a,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("slides.properties_panel.border_panel.width_slider_tooltip"),tooltipForScreenReadersOnly:!0,enablePreview:!0},ru.map(t=>l.createElement(rd,{key:`border-width-${t}`,value:t,disabled:f,recordingKey:h.Pt(e,"borderWidth","select",t)},t))))))})))}var r_=n(106075),ry=n(784940),rg=n(595869);class rP extends ls.c${}let rS=[0,8,16,24,32,64,96];class rb extends n8.X9{format(e){return 1e6===e?"Circular":`${e}`}}function rf({recordingKey:e}){let t=(0,r.wA)(),n=(0,nS.Um)(),{smallNudgeAmount:i,bigNudgeAmount:a}=(0,b.sT)(),o=(0,l.useMemo)(()=>new rb({min:0,smallNudgeAmount:i,bigNudgeAmount:a}),[i,a]),[c,p]=(0,lj.lJ)("cornerRadius");if(!(0,ry.Qr)(s.Sqb.CORNER_RADIUS))return null;let d=void 0===c||(0,z.gl)(c)?z.oV:c,u=l.createElement(ez.U,{svg:rg.A},l.createElement(r_.a,null));return l.createElement(tz.p,{name:"slides_corner_panel"},l.createElement(l_,{titleTx:(0,x.tx)("slides.properties_panel.corner"),input:l.createElement(nz.E,{name:"slides_corner_radius_dropdown"},l.createElement(ll.ow,{value:{select:lo.pW,inputComponent:lo.gm}},l.createElement(ls.tV,{value:{chevron:lc.t}},l.createElement(ln.YZ,{id:"corner-radius-select",onValueChange:e=>{p(e)},value:d,icon:u,dropdownShown:n,willShowDropdown:()=>(Q.Y5.commit(),Promise.resolve()),formatter:o,scrubbingDisabled:1e6===c,dispatch:t,recordingKey:h.Pt(e,"cornerRadius"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("slides.properties_panel.corner_radius"),tooltipForScreenReadersOnly:!1,enablePreview:!0},rS.map(t=>l.createElement(rP,{key:`corner-radius-${t}`,value:t,recordingKey:h.Pt(e,"cornerRadius","select",t)},t)),l.createElement(ls.sK,{key:"divider"}),l.createElement(rP,{key:"corner-radius-circular",value:1e6,recordingKey:h.Pt(e,"cornerRadius","select","circular")},(0,x.tx)("slides.properties_panel.corners_panel.circular"))))))}))}var rv=n(823223),rw=n(256296),rT=n(523099),rI=n(737947),rk=n(934576),rN=n(276625);let rC="slides_flapp_prop_panel--panelSelectorRow--8JJYh";function rA({selection:e}){let t=(0,r.wA)(),n=(0,nS.Um)(),i=(0,l.useMemo)(()=>Object.keys(e),[e])[0],a=(0,eo.Fk)((e,t)=>{let n=e.get(t);return n?.interactiveSlideConfigData?n.interactiveSlideConfigData:void 0},i),s=(0,l.useMemo)(()=>(function(e){if(!e||!e.startingPointsData)return[];try{return JSON.parse(e.startingPointsData)}catch(e){return[]}})(a),[a]),o=(0,l.useMemo)(()=>new rR(s),[s]),c=(0,l.useCallback)(e=>{es.l7.user("set_slides_embeddable_prototype_starting_point",()=>{let t=er.q.instance;t.get(i)?.setInteractiveSlideConfigData("activeStartingPointNodeId",e)})},[i]),p=(0,l.useCallback)(e=>{es.l7.user("set_slides_embeddable_prototype_show_device_frame",()=>{let t=er.q.instance;t.get(i)?.setInteractiveSlideConfigData("deviceFrameShownOverride",e.toString())})},[i]);if(!a)return null;let d=a.activeStartingPointNodeId??"";return l.createElement(tz.p,{name:"slides_embeddable_prototype_panel"},l.createElement(e3.Zk,null,l.createElement(rO,{fileName:function(e){if(e.fileName)return e.pageName?`${e.fileName} - ${e.pageName}`:e.fileName}(a),baseUrl:a.url,activeStartingPointNodeId:a.activeStartingPointNodeId}),l.createElement("div",{className:rC},l.createElement("label",null,(0,x.tx)("slides.properties_panel.embeddable_prototype.flow_label")),l.createElement(nz.E,{name:"slide_embeddable_prototype_flow_selector"},l.createElement(ls.l6,{disabled:0===s.length,formatter:o,id:"slide-embeddable-prototype-flow-selector",property:d,onChange:e=>{c(e)},dispatch:t,dropdownShown:n},s.map(e=>l.createElement(ls.c$,{value:e.id,key:e.id}))))),void 0!==a.deviceFramePreset&&""!==a.deviceFramePreset?l.createElement(rM,{showDeviceFrame:(0,rk.Wd)(a),onChange:p}):null))}function rO({fileName:e,baseUrl:t,activeStartingPointNodeId:n}){let r=(0,l.useCallback)(()=>{let e;if(t){try{e=new URL(t)}catch(e){return}n&&(0,rN.e)(e.searchParams,"starting-point-node-id",n),rI.Ay.redirect(e.toString(),"_blank")}},[t,n]);return l.createElement(ld.r,{titleTx:e?l.createElement("div",{className:Z.cx.textBodyMediumStrong.$},e):(0,x.tx)("slides.properties_panel.embeddable_prototype.default_title"),icon:l.createElement(e2.K,{"aria-label":(0,x.t)("slides.properties_panel.embeddable_prototype.open_prototype_label"),onClick:r,htmlAttributes:{"data-tooltip":(0,x.t)("slides.properties_panel.embeddable_prototype.open_prototype_label"),"data-tooltip-type":"text"}},l.createElement(rT.E,null))})}function rM({showDeviceFrame:e,onChange:t}){return l.createElement("div",{className:rC},l.createElement("label",null,(0,x.tx)("slides.properties_panel.embeddable_prototype.device_frame_label")),l.createElement(nz.E,{name:"slides_embeddable_prototype_device_frame_switch"},l.createElement(rv.d,{label:l.createElement(rw.h,null,(0,x.t)("slides.properties_panel.embeddable_prototype.device_frame_label")),checked:e,onChange:t})))}class rR{constructor(e){this.startingPointsData=e}format(e){return this.startingPointsData?.find(t=>t.id===e)?.name??""}}var rL=n(424928),rx=n(954625),rD=n(116226),rF=n(279702),rV=n(485463);function rK(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.146 6.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 1 0 0 6h.5a.5.5 0 0 1 0 1H9a4 4 0 0 1 0-8h1.293L9.146 6.854a.5.5 0 0 1 0-.708M14 8.5a.5.5 0 0 1 .5-.5h.5a4 4 0 0 1 0 8h-1.293l1.147 1.146a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 1 0 0-6h-.5a.5.5 0 0 1-.5-.5",clipRule:"evenodd"}))}function rU(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.854 6.854a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708zm-8.708-.708a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 0 0-2.143 5.1.5.5 0 0 1-.714.7A4 4 0 0 1 9 8h1.293L9.146 6.854a.5.5 0 0 1 0-.708m8.004 3.047a.5.5 0 0 1 .707.008A4 4 0 0 1 15 16h-1.293l1.147 1.145a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 0 0 2.143-5.1.5.5 0 0 1 .007-.707",clipRule:"evenodd"}))}var rH=n(43604),rB=n(978488),rG=n(30090),rY=n(931770),rW=n(53119),rQ=n(186126),rz=n(527718),r$=n(172834),rX=n(671209),rj=n(407058),rJ=n(384627),rZ=n(306143),rq=n(617398);function r0({value:e,onValueChange:t,dispatch:n,dataTooltipType:r=eJ.Ib.TEXT,dataTooltip:i,recordingKey:a}){return l.createElement(ln.w2,{"data-tooltip-type":r,"data-tooltip":i,value:e,onValueChange:t,dispatch:n,decimals:0,tooltipForScreenReadersOnly:!1,hidePercentSign:!0,childrenAtEnd:!0,inputClassName:Z.cx.w64.br0.$,recordingKey:a},l.createElement("span",{className:Z.cx.flex.w100.justifyEnd.pr4.eventsNone.colorTextSecondary.$},(0,x.tx)("fullscreen.scrubbable.percent")))}var r1=n(752256);function r5({value:e,min:t,max:n,step:r,bigStep:i,hints:a,onChange:s,ariaLabel:o,numberInput:c,sliderTrackableName:p,recordingKey:d}){return l.createElement("div",{className:"slides_slider_input_row--sliderInputRow--Z9EzC ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu"},l.createElement("div",{className:"slides_slider_input_row--slider--M8t1y"},l.createElement(nz.E,{name:p},l.createElement(r1.A,{min:t,max:n,step:r,bigStep:i,hints:a,rangeAnchor:t,mixed:(0,z.gl)(e),value:(0,z.hS)(e)?e:0,onChange:s,"aria-label":o,recordingKey:h.Pt(d,"slider")}))),l.createElement("div",{className:"slides_slider_input_row--input--E4qTs"},c))}var r4=n(676938);function r3({rowRef:e,recordingKey:t}){let[n,r]=l.useState(!1),[i,a]=l.useState(null),s=l.useCallback(()=>{n?r(!1):e.current&&(a((0,eZ.cn)(e.current,240)),r(!0))},[n,e]),o=l.useRef(null),c=l.useRef(null);return(0,r4.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[o,c]}),l.createElement(l.Fragment,null,l.createElement(nz.E,{name:"slides_blur_input"},l.createElement(l4,{isOpen:n,onMouseDown:s,ref:o,recordingKey:t},l.createElement("div",{className:Z.cx.inlineFlex.itemsCenter.$},l.createElement(rq.V,null),(0,x.tx)("slides.properties_panel.blur.label")))),n&&i&&l.createElement("div",{ref:c},l.createElement(eN.vx,{title:(0,x.t)("slides.properties_panel.blur.title"),headerSize:"small",initialPosition:i,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},l.createElement("div",{className:Z.cx.py12.pr8.$},l.createElement(r6,{recordingKey:t})))))}function r6({recordingKey:e}){let t=(0,r.wA)(),[n,i]=(0,lj.lJ)("blur"),a=l.useCallback(e=>i(100*e),[i]);return l.createElement(tz.p,{name:"slides_blur_controls"},l.createElement(r5,{min:0,max:1,step:.01,bigStep:.1,value:(0,z.gl)(n)?z.oV:(n||0)/100,onChange:a,ariaLabel:(0,x.t)("slides.properties_panel.blur.strength"),numberInput:l.createElement(nz.E,{name:"slides_blur_strength_input"},l.createElement(r0,{dataTooltip:(0,x.t)("slides.properties_panel.blur.strength"),value:(0,z.gl)(n)?z.oV:(n||0)/100,onValueChange:a,dispatch:t,recordingKey:h.Pt(e,"blurStrength","input")})),sliderTrackableName:"slides_blur_strength_slider",recordingKey:h.Pt(e,"blurStrength")}))}var r2=n(227944);let r7=`${S.Yr}-overlay`,r8={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:.4,blendMode:"NORMAL",visible:!0};function r9({rowRef:e,recordingKey:t}){let[n,r]=l.useState(!1),[i,a]=l.useState(null),s=l.useCallback(()=>{n?r(!1):e.current&&(a((0,eZ.cn)(e.current,240)),r(!0))},[n,e]),o=l.useRef(null),c=l.useRef(null);(0,r4.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[o,c]});let p=(0,lj.kl)("imageOverlayPaint"),d=(0,z.E7)(p??null)||r8;return l.createElement(l.Fragment,null,l.createElement(nz.E,{name:"slides_overlay_input"},l.createElement(l4,{isOpen:n,onMouseDown:s,ref:o,recordingKey:t},l.createElement("span",{className:Z.cx.inlineFlex.gap6.pl4.ellipsis.noWrap.overflowHidden.$},l.createElement(ra,{paint:d,colors:[]}),(0,x.tx)("slides.properties_panel.overlay")))),n&&i&&l.createElement("div",{ref:c},l.createElement(eN.vx,{title:(0,x.t)("slides.properties_panel.overlay"),headerSize:"small",initialPosition:i,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},l.createElement("div",{className:Z.cx.py12.pr8.$},l.createElement(ie,{recordingKey:t})))))}function ie({recordingKey:e}){let t=(0,r.wA)(),n=(0,r2.Zr)("add-image-overlay"),[i,a]=(0,lj.lJ)("imageOverlayPaint"),s=(0,z.gl)(i)||i&&n,o=e=>{(0,tU.assertDev)((0,z.hS)(i),"overlay paint should not be mixed");var t={...i||r8};t.opacity=e,a(t)};return l.createElement(tz.p,{name:"slides_overlay_controls"},l.createElement(r5,{min:0,max:1,step:.01,bigStep:.1,value:s?z.oV:i?.opacity||0,onChange:o,ariaLabel:(0,x.t)("slides.properties_panel.overlay.opacity_slider_aria_label"),numberInput:l.createElement(nz.E,{name:"slides_image_overlay_opacity_slider"},l.createElement(r0,{dataTooltip:(0,x.t)("fullscreen.scrubbable.opacity"),value:s?z.oV:i?.opacity||0,onValueChange:o,dispatch:t})),sliderTrackableName:"slides_image_overlay_opacity_slider",recordingKey:h.Pt(e,"opacity")}),l.createElement("div",{className:Z.cx.pt8.pb4.pr8.pl16.$},l.createElement(rl,{paint:s?z.oV:i||r8,onChange:e=>{(0,tU.assertDev)((0,z.hS)(i),"overlay paint should not be mixed");var t={...e};i&&e.color&&i.color&&l1.z5.format(e.color)!==l1.z5.format(i.color)&&(t.opacity=i.opacity),i||(t.opacity=.4),a(t)},pickerId:r7,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleKey:void 0,inheritStyleName:void 0,inheritStyleId:void 0,recordingKey:h.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1})))}let it="image-scale-mode-select";function il({paint:e,paintIndex:t,onChange:n,recordingKey:i,selectedPropertyType:a}){let o=(0,r.wA)(),c=(0,l.useMemo)(()=>new n9.D,[]),d=(0,r.d4)(e=>e.dropdownShown?.type===it?e.dropdownShown:null),[u,m]=(0,l.useState)(!1),[E,y]=(0,l.useState)(0),[g,P]=(0,l.useState)(0),[S,b]=(0,l.useState)(!1),[f,v]=(0,l.useState)(null),[w,T]=(0,l.useState)(!1),[I,k]=(0,l.useState)(!1),[N,C]=(0,l.useState)(0),[A,O]=(0,l.useState)(null),[M,R]=(0,l.useState)(null),L=(0,$.y7)(e),D=(0,l.useRef)(L);D.current=L;let F=(0,tZ.tS)(),V=!!e?.animatedImage,K=!!e?.video||e?.type==="VIDEO";(0,l.useEffect)(()=>{V&&D.current?.animationFrame!=null?(C(D.current.animationFrame),(0,rj.Bc)(D.current).then(e=>{O((0,rW.J)(e))})):K&&(0,rG.Fe)().then(e=>v(e))},[K,V,L?.animatedImage?.hash]);let U=function(){let e=(0,lj.kl)("videoMediaLoop");return{mediaLoop:e,autoplay:(0,lj.kl)("videoAutoplay"),muted:(0,lj.kl)("videoMuted"),numVideosSelected:(0,lj.kl)("numVideosSelected")}}();return e?l.createElement("div",null,l.createElement(_.Y,{isDragTarget:()=>!0,onTargetDragEnter:()=>(m(!0),h.aH),onTargetDragLeave:()=>(m(!1),h.aH),onTargetDrop:n=>{if(m(!1),Q.Y5.fileArrayToString){let l=Q.Y5.fileArrayToString(Array.from(n.files));s.glU.dropImageOnPaintThumbnail(e?.blendMode??"NORMAL",e?.opacity??1,l,t,a)}},recordingKey:h.Pt(i,"imageDragTarget")},l.createElement("div",{className:p()(Z.cx.relative.wAuto.h100.flex.itemsCenter.justifyCenter.radiusMedium.$,l9.xm,{[Z.cx.colorBorderSelected.bSolid.b1.$]:u})},L&&K?l.createElement(r$.A,{imagePaint:L,openFileKey:F||void 0,width:200,height:100,className:Z.cx.opacity1.block.$,currentTime:E,onUpdateCurrentTime:e=>y(e),setDuration:e=>P(e),playing:S,setPlaying:e=>b(e),videoJsLib:f,isVideoLoaded:w,setIsVideoLoaded:e=>T(e),userClickedControls:I,setUserClickedControls:e=>k(e)}):L&&V?l.createElement(rQ.Y,{imagePaint:L,width:200,height:100,animatedImage:A,animationFrame:N,onUpdateFrameData:e=>R(e),playing:S}):L?l.createElement(rz.K,{imagePaint:L,width:200,height:100,forceUpdate:!1}):null,l.createElement("div",{className:p()(Z.cx.absolute.top0.bottom0.left0.right0.flex.itemsCenter.justifyCenter.$,l9.CL)},l.createElement(nz.E,{name:"slides_media_upload"},l.createElement(rJ.v,{uploadImagePaint:()=>{Q.Y5.updateAppModel({currentSelectedProperty:{type:s.rrT.FILL,indices:[t]}});let n=e.blendMode||"NORMAL",l=e.opacity||1;s.glU.uploadPaintMedia(n,l)},recordingKey:h.Pt(i,"uploadMedia")}))))),l.createElement(el.Ad,{label:null,input:l.createElement(nz.E,{name:"slides_image_scale_mode"},l.createElement(ls.l6,{id:it,property:e.imageScaleMode??"FILL",onChange:t=>{"STRETCH"===t?Q.Y5.triggerActionInUserEditScope("crop-image"):n({...e,imageScaleMode:t})},formatter:c,dispatch:o,dropdownShown:d,targetDomNode:document.body,inputWidth:80,recordingKey:h.Pt(i,"imageScaleMode")},rj.GA.map((e,t)=>l.createElement(ls.c$,{key:t,value:e,recordingKey:h.Pt(i,"imageScaleMode",e)}))))}),l.createElement(ii,{recordingKey:i}),K&&l.createElement(l.Fragment,null,l.createElement("div",{className:l9.iS},l.createElement(rZ.P,{paint:e,currentTime:E||0,duration:g,onVideoTimeChange:e=>{y(e),b(!1)},disabled:!e.video,isVideoLoaded:w,setPlaying:e=>b(e),playing:!!e.video&&S,setUserClickedControls:e=>k(e)})),l.createElement("div",{className:Z.cx.pl16.pr8.flex.minH32.itemsCenter.$},l.createElement("div",{className:Z.cx.flex1.$},l.createElement(rV.S,{label:l.createElement(rw.J,{htmlAttributes:{"data-tooltip":(0,x.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":eJ.Ib.TEXT}},(0,x.tx)("proto.prototype_panel.autoplay")),onChange:e=>Q.Y5.updateSelectionProperties({videoAutoplay:e}),checked:!0===U.autoplay,mixed:(0,z.gl)(U.autoplay)})),l.createElement(ir,{icon:!0===U.mediaLoop?l.createElement(rK,{color:"var(--color-border-selected)"}):l.createElement(rU,null),enabled:!0===U.mediaLoop,onClick:()=>Q.Y5.updateSelectionProperties({videoMediaLoop:!U.mediaLoop}),recordingKey:h.Pt(i,"videoLoopToggle"),tooltip:(0,x.t)("proto.prototype_panel.loop"),trackingName:"slides_video_loop_toggle"}),l.createElement(ir,{icon:!0!==U.muted?l.createElement(rH.L,{color:"var(--color-border-selected)"}):l.createElement(rB.P,null),enabled:!0!==U.muted,onClick:()=>Q.Y5.updateSelectionProperties({videoMuted:!U.muted}),recordingKey:h.Pt(i,"videoSoundToggle"),tooltip:(0,x.t)("proto.prototype_panel.sound"),trackingName:"slides_video_sound_toggle"}))),V&&l.createElement("div",{className:l9.iS},l.createElement(rX.F,{paint:e,animationFrame:N,numFrames:A?A.numFrames():null,onGIFFrameChange:e=>{C(Math.round(e)),b(!1)},disabled:!A,setPlaying:e=>b(e),playing:!!A&&S,setGIFCoverFrame:t=>{if(!M)return;let n=t??N;(null!=t||n!==e.animationFrame)&&(Q.Y5.triggerAction("toggle-raster-edit-mode"),es.l7.user("update-gif-image-slides",()=>(0,rY.SK)({...e,animationFrame:n},M.data,s.rrT.FILL)),s.glU.setDefaultEditMode())}}))):null}function ir({enabled:e,onClick:t,icon:n,tooltip:r,trackingName:i,recordingKey:a}){return l.createElement(nz.E,{name:i},l.createElement(e9.GG,{className:p()(l9.BE,{[l9.Sn]:e}),onClick:t,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":r,"aria-label":r,recordingKey:a},n))}function ii({recordingKey:e}){let t=(0,l.useRef)(null);return l.createElement(lJ.g,{ref:t,leftLabel:null,leftInput:l.createElement(r9,{rowRef:t,recordingKey:h.Pt(e,"overlay")}),rightLabel:null,rightInput:l.createElement(r3,{rowRef:t,recordingKey:h.Pt(e,"blur")})})}let ia=`${S.Yr}-fill`,is=["NONE","SOLID","GRADIENT","MEDIA"],io={SOLID:"SOLID",GRADIENT:"GRADIENT_LINEAR",MEDIA:"IMAGE"};function ic({recordingKey:e}){let t=(0,r.d4)(e=>e.mirror.selectionProperties.numSelectedByType),n=!!t&&(0,Y.OU)(t,["SLIDE"]),i=t&&(0,Y.Kl)(t,["SLIDE","TEXT"]),[a]=(0,lj.lJ)("fillsType"),o=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,z.gl)(t)?z.oV:t?.[0]}),[c]=(0,lj.lJ)("imageOverlayPaint"),[p]=(0,lj.lJ)("inheritFillStyleKey"),[d]=(0,lj.lJ)("inheritFillStyleName"),[u]=(0,lj.lJ)("styleIdForFill"),m=l.useMemo(()=>({NONE:{displayText:(0,x.t)("slides.properties_panel.fill.fill_type_none"),icon:l.createElement(e8.f,null)},SOLID:{displayText:(0,x.t)("slides.properties_panel.fill.fill_type_solid"),icon:l.createElement(rL.H,null)},GRADIENT:{displayText:(0,x.t)("slides.properties_panel.fill.fill_type_gradient"),icon:l.createElement(rx.z,null)},MEDIA:{displayText:(0,x.t)("slides.properties_panel.fill.fill_type_media"),icon:l.createElement(rD.Z,null)}}),[]),E=(0,l3.CK)(),_=l.useCallback(e=>(0,z.gl)(e)?void 0:e?"RASTER"===e||c&&(0,z.hS)(c)?"MEDIA":e:i?"SOLID":"NONE",[i,c]),[y,g]=l.useState(_(a));l.useEffect(()=>{g(_(a))},[a,o,_]);let P=l.useCallback(e=>{y!==e&&("NONE"===e?Q.Y5.updateSelectionProperties({fillPaints:[]}):io[e]&&E($.Tm.initPaint(io[e],l6.li.color,(0,z._W)(o,{}),"slides-fill-panel"),rF.zk.YES),g(e))},[o,E,y]);(0,tJ.f4)(()=>{g(_(a))});let S=y&&(0,z.hS)(a)&&("SOLID"===y||"GRADIENT"===y),b=y&&(0,z.hS)(a)&&o&&(0,z.hS)(o)&&"MEDIA"===y;return l.createElement(tz.p,{name:"slides_fill_panel"},l.createElement(lE,null,l.createElement(ld.r,{titleTx:(()=>{if(t){if(n)return(0,x.tx)("slides.properties_panel.fill.slide_fill_title");if((0,Y.OU)(t,["TEXT"]))return(0,x.tx)("slides.properties_panel.fill.text_fill_title")}return(0,x.tx)("slides.properties_panel.fill.fill_title")})()}),l.createElement(ro,{legend:(0,x.tx)("slides.properties_panel.fill.type_label"),value:y,onChange:P,recordingKey:h.Pt(e,"fillType")},is.filter(e=>!(i&&"NONE"===e)).map(e=>l.createElement(lz.I.Option,{key:e,value:e,icon:m[e].icon,"aria-label":m[e].displayText,htmlAttributes:{"data-onboarding-key":m[e].displayText}}))),S&&l.createElement("div",{className:Z.cx.py4.pr8.pl16.$},l.createElement(rl,{paint:o,onChange:E,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleName:d,inheritStyleKey:p,inheritStyleId:u,pickerId:ia,recordingKey:h.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!0})),b&&l.createElement(il,{paint:o,paintIndex:0,onChange:E,recordingKey:e,selectedPropertyType:s.rrT.FILL})))}var ip=n(234945),id=n(690122),iu=n(721478),im=n(371623),ih=n(687881);let iE=l.memo(function({recordingKey:e}){let t=(0,r.d4)(ip.qd),n=(0,r.d4)(ip.dT),i=(0,r.d4)(tl.Z3),a=(0,z.E7)((0,lj.kl)("resettableInstanceOverrides")),{onlyInstances:s,onlyInstanceSublayers:o}=(0,id.p)(n);return s||o?l.createElement(e3.Zk,{className:ih.Mx},s&&l.createElement("div",{className:ih.Og},l.createElement(tn.e6,{containerWidth:tf.O2.RESIZABLE_SIDEBAR,propDimension:tf.OE.ASSIGNMENT,guids:t,recordingKey:e,enableHidingOverflowRowsInUI3:!0,hideIcon:!0,entrypointForInstanceSwapPicker:im.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL})),i.map(t=>l.createElement("div",{key:`bubbledInstance.${t[0]}`,className:ih.Wf},l.createElement(tn.ME,{containerWidth:tf.O2.RESIZABLE_SIDEBAR,propDimension:tf.OE.ASSIGNMENT,guids:t,hideErrors:!0,resettableInstanceOverrides:a&&a.bubbledInstanceOverrides?a.bubbledInstanceOverrides[t[0]]:void 0,instanceAndSublayerGUIDs:t,instanceNameDisplayOverride:iu.NA.NAME_ONLY,shouldHideInstanceTitleButtons:!0,hideIcon:!0,recordingKey:e,forBubbledProps:!0,highlightNodesOnHover:!0,entrypointForInstanceSwapPicker:im.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL_BUBBLED})))):l.createElement(e3.Zk,{className:ih.Mx})});var i_=n(992739),iy=n(447636);function ig({selection:e}){let t=(0,l.useMemo)(()=>Object.keys(e),[e]),n=t[0],r=(0,eo.Fk)((e,t)=>(function(e){let t;if(!e)return;let n=e.interactiveSlideElementType;if(null===n||n===s.a9h.EMBED)return;switch(n){case s.a9h.POLL:t=(0,x.t)("slides.flapp.embed.widget_poll");break;case s.a9h.FACEPILE:t=(0,x.t)("slides.flapp.embed.widget_stamps");break;case s.a9h.ALIGNMENT:t=(0,x.t)("slides.flapp.embed.widget_alignment");break;case s.a9h.YOUTUBE:t=(0,x.t)("slides.flapp.embed.widget_youtube")}let l=Object.keys(e.interactiveSlideParticipantData).length>0,r=e.interactiveSlideConfigData,i=(0,iy.aF)(r);return{displayName:t,currentTheme:i.theme,hasParticipantData:l,shouldShowBackground:!i.transparentMode}})(e.get(t)),n),i=(0,l.useCallback)(()=>{es.l7.user("reset_slides_interactive_widget_participant_data",()=>{let e=er.q.instance;e.get(n)?.resetInteractiveSlideParticipantData()})},[n]),a=(0,l.useCallback)(e=>{es.l7.user("set_interactive_widget_theme",()=>{let t=er.q.instance;t.get(n)?.setInteractiveSlideConfigData("theme",e)})},[n]),o=(0,l.useCallback)(e=>{es.l7.user("set_interactive_widget_hide_background",()=>{let t=er.q.instance;t.get(n)?.setInteractiveSlideConfigData("hideBackground",(!e).toString())})},[n]);return!r||t.length>1?null:l.createElement(tz.p,{name:"slides_interactive_widget_panel"},l.createElement(e3.Zk,null,l.createElement(ld.r,{titleTx:l.createElement("p",{className:Z.cx.textBodyMediumStrong.$},r.displayName),icon:l.createElement(iS,{canReset:r.hasParticipantData,onReset:i})}),l.createElement(iv,{currentTheme:r.currentTheme,onThemeSelected:a}),l.createElement(iT,{showBackground:r.shouldShowBackground,onChange:o}),l.createElement(iP,null)))}function iP(){return l.createElement("div",{className:Z.cx.p8.$},l.createElement("div",{className:Z.cx.colorBgSecondary.radiusMedium.p8.$},l.createElement("div",{className:Z.cx.textBodyMediumStrong.colorText.pb4.$},(0,x.tx)("slides.properties_panel.interactive_widget.usage_guidance_header")),l.createElement("div",{className:Z.cx.textBodyMedium.colorTextTertiary.$},(0,x.tx)("slides.properties_panel.interactive_widget.usage_guidance_text"))))}function iS({canReset:e,onReset:t}){let{showing:n,toggle:r}=(0,nS.BK)("RESET_INTERACTIVE_WIDGET_ICON_DROPDOWN_ID"),i=(0,l.useRef)(null);return l.createElement(l.Fragment,null,l.createElement(e2.K,{"aria-label":(0,x.t)("slides.properties_panel.interactive_widget.reset_label"),disabled:!e,onClick:()=>r(),ref:i},l.createElement(i_.m,null)),n&&i.current&&l.createElement(e0.Cf,{targetRect:i.current.getBoundingClientRect(),displayOverTarget:!0},l.createElement(eQ.c$,{disabled:!0},(0,x.tx)("slides.properties_panel.interactive_widget.reset_confirmation_title")),l.createElement(eQ.c$,{onClick:t},(0,x.tx)("slides.properties_panel.interactive_widget.confirm_reset_label"))))}let ib="flappThemeSelector";function iv({currentTheme:e,onThemeSelected:t}){let n=(0,r.wA)(),i=(0,nS.Um)();return l.createElement("div",{className:rC},l.createElement("label",null,(0,x.tx)("slides.properties_panel.interactive_widget.theme_selector_label")),l.createElement(nz.E,{name:"slides_interactive_widget_theme_selector"},l.createElement(ls.l6,{id:"slides-interactive-widget-theme-selector",formatter:iw,property:e,onChange:t,dispatch:n,dropdownShown:i,recordingKey:ib},l.createElement(ls.c$,{value:iy.Pm.Light,key:iy.Pm.Light,recordingKey:h.Pt(ib,"lightOption")}),l.createElement(ls.c$,{value:iy.Pm.Dark,key:iy.Pm.Dark,recordingKey:h.Pt(ib,"darkOption")}))))}let iw=new class{format(e){switch(e){case iy.Pm.Light:return(0,x.t)("slides.properties_panel.interactive_widget.light_theme_label");case iy.Pm.Dark:return(0,x.t)("slides.properties_panel.interactive_widget.dark_theme_label");case iy.Pm.Translucent:return(0,x.t)("slides.properties_panel.interactive_widget.transparent_theme_label")}}};function iT({showBackground:e,onChange:t}){return l.createElement("div",{className:rC},l.createElement("label",null,(0,x.tx)("slides.properties_panel.interactive_widget.background_label")),l.createElement(nz.E,{name:"slides_interactive_widget_background_switch"},l.createElement(rv.d,{label:l.createElement(rw.h,null,(0,x.t)("slides.properties_panel.interactive_widget.background_label")),checked:e,onChange:t,recordingKey:"flappBackgroundToggle"})))}var iI=n(334495);let ik=/^\w+:/;function iN({recordingKey:e}){let t=(0,r.wA)(),n=(0,nS.Um)(),[i,a]=(0,lj.lJ)("hyperlink"),c=(0,z.E7)(i),p=null;c&&void 0!==c.guid?p={type:"guid",guid:c.guid}:c&&void 0!==c.url?p={type:"url",url:c.url}:(0,z.gl)(i)&&(p=z.oV);let d=(0,lt.J2)(s.Ez5.slideDeck().slideGrid),u=(0,lh.rY)(d),m=l.useMemo(()=>u.reduce((e,t,n)=>(e.set(t,n),e),new Map),[u]),E=l.useMemo(()=>({format:e=>{if(null===e)return"";if((0,z.gl)(e))return(0,x.t)("fullscreen.mixed");if("guid"===e.type){let t=(0,o.dI)(e.guid),n=m.get(t);return void 0===n?"":(0,x.t)("slides.properties_panel.link_panel.slide_number",{orderNum:n+1})}return"url"===e.type?e.url:""},parse:e=>{if(!e)return null;let t=(0,x.t)("slides.properties_panel.link_panel.slide_number",{orderNum:""}),n=e.replace(t,"").trim();if(n.length>0){let e=parseInt(n)-1,t=(0,o.sH)(u[e]);if(t)return{type:"guid",guid:t}}return{type:"url",url:e}},isEqual:(e,t)=>(0,lQ.deepEquals)(e,t)}),[m,u]),_=es.nc.user("slides-link-change",l.useCallback(e=>{null===e?a({},rF.zk.YES):"guid"===e.type?a({guid:e.guid},rF.zk.YES):"url"===e.type&&a({url:e.url.match(ik)?e.url:`https://${e.url}`},rF.zk.YES),s.glU.hideHyperlinkEditor()},[a]));return l.createElement(tz.p,{name:"slides_link_panel"},l.createElement(lE,null,l.createElement(ld.r,{titleTx:(0,x.tx)("slides.properties_panel.link_panel.title")}),l.createElement(el.Ad,{input:l.createElement(ll.ow,{value:{select:lo.pW,inputComponent:lo.gm}},l.createElement(ls.tV,{value:{chevron:lc.t}},l.createElement(ll.a3,{id:"slides-link-combo-box",dispatch:t,inputClassName:iI.lb,dropdownShown:n,formatter:E,property:p,onChange:e=>{_(e)},placeholder:(0,x.t)("slides.properties_panel.link_panel.placeholder"),forceInputPlaceholder:null===p,recordingKey:h.Pt(e,"link")},u.map(t=>l.createElement(ls.c$,{value:{type:"guid",guid:(0,o.sH)(t)},key:t,recordingKey:h.Pt(e,t)}))))),label:null})))}var iC=n(668e3);class iA extends ls.c${}class iO extends n8.LN{isEqual(e,t){return 1e-5>Math.abs(e-t)}}let iM=[.1,.3,.5,.8,1];function iR({recordingKey:e}){let t=(0,r.wA)(),n=(0,nS.Um)(),[i,a]=(0,lj.lJ)("opacity"),s=new iO,o=void 0===i||(0,z.gl)(i)?z.oV:i,c=l.createElement(ez.U,{svg:rg.A},l.createElement(iC.N,null));return l.createElement(tz.p,{name:"slides_opacity_panel"},l.createElement(l_,{titleTx:(0,x.tx)("slides.properties_panel.opacity"),input:l.createElement(nz.E,{name:"slides_opacity_dropdown"},l.createElement(ll.ow,{value:{select:lo.pW,inputComponent:lo.gm}},l.createElement(ls.tV,{value:{chevron:lc.t}},l.createElement(ln.xW,{id:"opacity-select",onValueChange:e=>{a(e)},value:o,icon:c,dropdownShown:n,min:0,max:1,willShowDropdown:()=>(Q.Y5.commit(),Promise.resolve()),formatter:s,dispatch:t,recordingKey:h.Pt(e,"opacity"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("slides.properties_panel.opacity"),tooltipForScreenReadersOnly:!1,enablePreview:!0},iM.map(t=>l.createElement(iA,{key:`opacity-${t}`,value:t,recordingKey:h.Pt(e,"opacity","select",t)},s.format(t)))))))}))}function iL(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14.5 8h-6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5m-6-1A1.5 1.5 0 0 0 7 8.5v6A1.5 1.5 0 0 0 8.5 16h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 14.5 7z",clipRule:"evenodd"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M8.064 15.936A1.5 1.5 0 0 0 9.5 17h6a1.5 1.5 0 0 0 1.5-1.5v-6a1.5 1.5 0 0 0-1.064-1.436A1.5 1.5 0 0 1 16 8.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-.436-.064",clipRule:"evenodd"}))}function ix(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14.5 8h-6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5m-6-1A1.5 1.5 0 0 0 7 8.5v6A1.5 1.5 0 0 0 8.5 16h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 14.5 7z",clipRule:"evenodd"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 16v.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H16v5.5a1.5 1.5 0 0 1-1.5 1.5z",clipRule:"evenodd"}))}function iD(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.5 7h-6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5m-6-1A1.5 1.5 0 0 0 6 7.5v6A1.5 1.5 0 0 0 7.5 15h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 13.5 6z",clipRule:"evenodd"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 15v1.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H15v4.5a1.5 1.5 0 0 1-1.5 1.5z",clipRule:"evenodd"}))}let iF=["NONE","LIGHT","MEDIUM","STRONG"];function iV({recordingKey:e}){let t=(0,r.wA)(),[n,i]=(0,lj.lJ)("shadow"),a=l.useMemo(()=>({NONE:{value:null,displayText:(0,x.t)("slides.properties_panel.shadow_style_none"),icon:l.createElement(e8.f,null)},LIGHT:{value:{radius:3,x:0,y:1},displayText:(0,x.t)("slides.properties_panel.shadow_style_light"),icon:l.createElement(iL,null)},MEDIUM:{value:{radius:16,x:0,y:5},displayText:(0,x.t)("slides.properties_panel.shadow_style_medium"),icon:l.createElement(ix,null)},STRONG:{value:{radius:40,x:0,y:10},displayText:(0,x.t)("slides.properties_panel.shadow_style_strong"),icon:l.createElement(iD,null)}}),[]),[s,o]=l.useState(()=>c(n));function c(e){if(!(0,z.gl)(e)){if(!e)return"NONE";if(iK(e,a.LIGHT.value))return"LIGHT";if(iK(e,a.MEDIUM.value))return"MEDIUM";if(iK(e,a.STRONG.value))return"STRONG"}}let p=e=>{(0,z.hS)(n)&&n&&i({...n,opacity:e})};return(0,tJ.f4)(()=>{o(c(n))}),l.createElement(tz.p,{name:"slides_shadow_panel"},l.createElement(lE,null,l.createElement(ld.r,{titleTx:(0,x.tx)("slides.properties_panel.shadow")}),l.createElement(ro,{legend:(0,x.tx)("slides.properties_panel.shadow_style"),value:s,onChange:e=>{let t=a[e].value,l=(0,z.hS)(n)&&n?.opacity||.25;i(t?{offset:{x:t.x,y:t.y},radius:t.radius,spread:0,opacity:l}:null,rF.zk.YES),o(e)},recordingKey:h.Pt(e,"shadowStyle")},iF.map(e=>l.createElement(lz.I.Option,{key:e,value:e,icon:a[e].icon,"aria-label":a[e].displayText,htmlAttributes:{"data-onboarding-key":a[e].displayText}}))),!!n&&l.createElement(r5,{value:(0,z.gl)(n)?z.oV:n?.opacity??0,min:0,max:1,step:.01,bigStep:.1,onChange:p,ariaLabel:(0,x.t)("slides.properties_panel.shadow_opacity"),numberInput:l.createElement(nz.E,{name:"slides_shadow_opacity_input"},l.createElement(r0,{dataTooltip:(0,x.t)("slides.properties_panel.shadow_opacity"),value:(0,z.gl)(n)?z.oV:n?.opacity??0,onValueChange:p,recordingKey:h.Pt(e,"shadowOpacity","input"),dispatch:t})),sliderTrackableName:"slides_shadow_opacity_slider",recordingKey:h.Pt(e,"shadowOpacity")})))}function iK(e,t){return e.radius===t?.radius&&e.offset.x===t?.x&&e.offset.y===t?.y}var iU=n(966981),iH=n(392592),iB=n(179243),iG=n(592747),iY=n(452883);function iW({recordingKey:e}){let t=(0,r.wA)(),n=(0,iY.$)(),{Sprig:i}=(0,iU.A)(),a=(0,tZ.tS)(),o=(0,lu.l5)(),c=l.useCallback((e,l)=>es.l7.user("swap-slide-theme",()=>{let r=(0,iB.Dh)(e);if(!r)return;let c=new Set(r.variableIDs);l&&(l=l.filter(e=>c.has(e)));let p=s.Ez5.slideThemeLibBindings().swapSelectedSlidesToNewTheme(e,l||[]);p===s.qYO.NO_THEME_COLORS?t(iH.F.enqueue({message:(0,x.t)("slides.properties_panel.theme.shuffle_no_change_visual_bell")})):p===s.qYO.NONE_AVAILABLE&&t(iH.F.enqueue({message:(0,x.t)("slides.properties_panel.theme.no_swap_available")})),a&&tH.az.trackDefinedEvent("slides.editor.theme_swap",{fromThemeId:n,toThemeId:e,fileKey:a,slideIds:o.join(",")}),Q.Y5.triggerAction("commit"),i("track","swap_slide_theme")}),[t,i,n,a,o]),p=l.useCallback(()=>{let e=s.Ez5.slideThemeLibBindings().insertDefaultLocalTheme(s.zMY.LIGHT);s.Ez5.slideThemeLibBindings().setThemeName(e,"Template style"),s.Ez5.slideThemeLibBindings().setThemeIdOnSelection(e)},[]);return l.createElement(tz.p,{name:"slides_theme_panel"},l.createElement(e3.Zk,null,l.createElement(ld.r,{titleTx:(0,x.tx)("slides.properties_panel.theme.panel_title")}),l.createElement("div",{className:Z.cx.grid.px16.$},l.createElement(iG.n,{selectedThemeId:n,onChange:c,onCreateNewTheme:p,allowShuffle:!0,allowEditTheme:!!(0,u.kc)().piper_rename_theme,recordingKey:h.Pt(e,"themeDropdown")}))))}var iQ=n(993086),iz=n(923793),i$=n(226129),iX=n(343427),ij=n(794272),iJ=n(75540),iZ=n(238093),iq=n(282647),i0=n(872442),i1=n(688998),i5=n(599677),i4=n(231139),i3=n(937348),i6=n(304022),i2=n(176019),i7=n(564092),i8=n(533573),i9=n(841983),ae=n(863336);function at({recordingKey:e}){let{inheritTextStyleKey:t,styleIdForText:n}=(0,ij.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey||null,styleIdForText:e.mirror.selectionProperties.styleIdForText||null})),i=(0,iZ.WH)(t,n,"TEXT"),a=(0,r.d4)(e=>e.fonts),s=l.useMemo(()=>(0,iJ.pn)(a),[a]),o=(0,nS.Um)(),[c,p]=l.useState(null===i);l.useEffect(()=>{o||p(!i?.node_id)},[i?.node_id]);let[d,u]=l.useState(null),m=l.useCallback(()=>{i&&u(i)},[i]),E=(0,r.d4)(e=>e.mirror.sceneGraphSelection);return l.useEffect(()=>{u(null)},[E]),l.createElement(tz.p,{name:"slides_type_panel"},l.createElement(lE,{panelClassName:"slides_type_panel--typePanel--BLBhl"},l.createElement(ae.X,{mainStyle:i,inheritTextStyleKey:t,styleIdForText:n,previouslyAppliedStyle:d,recordingKey:h.Pt(e,"textStyle")}),c&&l.createElement(an,{fonts:a,versionsForStyles:s,recordingKey:e,savePreviouslyAppliedStyleOnFontChange:m}),l.createElement(ar,{versionsForStyles:s,recordingKey:e}),l.createElement(aa,{recordingKey:e}),!c&&l.createElement(el.Ad,{input:l.createElement(n2.IK,{variant:"secondary",onClick:()=>p(!0),recordingKey:h.Pt(e,"showDetails")},(0,x.tx)("slides.properties_panel.text.show_details")),label:null})))}function an({fonts:e,versionsForStyles:t,savePreviouslyAppliedStyleOnFontChange:n,recordingKey:i}){let a=(0,r.wA)(),s=(0,z._W)((0,lj.kl)("missingFont"),!1),o=!!Q.Y5?.isFontListLoaded(),c=s||!o,p=(0,lj.kl)("fontFamily"),d=(0,lj.kl)("fontStyle"),u=(0,lj.kl)("fontSize"),m=(0,lj.kl)("lineHeight"),E=(0,lj.kl)("letterSpacing"),{bigNudgeAmount:_,smallNudgeAmount:y}=(0,b.sT)(),g=(0,r.d4)(e=>e.mirror.selectionProperties.fontVariations),P=p?(0,i2.LM)({fontFamily:p,fontStyle:d,fonts:e,versionsForStyles:t}):void 0,S=(0,i6.B)(),{consumedVariable:f,clearVariableConsumption:v}=(0,i7.u3)(["FONT_FAMILY"]),w=f?(0,i8.MH)(f):null,T=(0,n$.u)(w??void 0),I=p?l.createElement(iq.ay,{id:"slides-type-panel-font-family",fontFamily:p,editingStyleGuid:void 0,onChange:l=>{n(),(0,i2.PK)({fontFamily:l,lineHeightInContext:S,fonts:e,fontVariations:g,versionsForStyles:t})},boundVariable:T??void 0,onDetachVariableClick:v,fonts:e,versionsForStyles:t,showPlaceholder:!1,disabled:c,hideTypographyVariableOptions:!0,recordingKey:h.Pt(i,"fontFamily")}):null,k=p&&d?l.createElement(nz.E,{name:"slides_font_style"},l.createElement(i1.zz,{id:"slides-type-panel-font-style",fontFamily:p,fontStyle:d,editingStyleGuid:void 0,onChange:(e,t,l)=>{n(),(0,i1.zD)({fontStyle:e,shouldCommit:t,fontVariations:l,lineHeightInContext:S,showVariableFontSettings:l7.lQ,showTypeVariablePicker:l7.lQ})},fonts:e,versionsForStyles:t,fontVariations:g,fontVariationAxes:P?.variationAxes,dropdownAlignment:"right",showMissingIcon:!1,hideVariableFontOptions:!0,hideTypographyVariableOptions:!0,recordingKey:h.Pt(i,"fontStyle")})):null,N=u?l.createElement(nz.E,{name:"slides_font_size"},l.createElement(i0.Z,{id:"slides-type-panel-font-size",fontSize:u,onChange:n,disabled:c,editingStyleGuid:void 0,hideVariableOptions:!0,recordingKey:h.Pt(i,"fontSize")})):null,C=l.createRef(),A=m?l.createElement(i4.a,{lineHeight:m,lineHeightInContext:S,onChange:n,disabled:c,rowElementRef:C,editingStyleGuid:void 0,disableVariables:!0,recordingKey:h.Pt(i,"lineHeight")}):null,O=E?l.createElement(i5.I,{dispatch:a,letterSpacing:E,disabled:c,onChange:n,editingStyleGuid:void 0,rowElementRef:C,bigNudgeAmount:_,smallNudgeAmount:y,disableVariables:!0,recordingKey:h.Pt(i,"letterSpacing")}):null;return l.createElement(l.Fragment,null,I,l.createElement(lJ.g,{leftLabel:(0,x.tx)("slides.properties_panel.text.weight_label"),leftInput:k,rightLabel:(0,x.tx)("slides.properties_panel.text.font_size_label"),rightInput:N}),l.createElement(lJ.g,{ref:C,leftLabel:null,leftInput:A,rightLabel:null,rightInput:O}))}function al(e){return e.toLowerCase().includes("italic")}function ar({versionsForStyles:e,recordingKey:t}){let{isBold:n,isItalic:r,isUnderline:i,isUnorderedList:a,fontFamily:s}=(0,ij.R)(e=>({isBold:(0,i9.N)(e.mirror.selectionProperties.fontStyle?.toString()||""),isItalic:al(e.mirror.selectionProperties.fontStyle?.toString()||""),isUnderline:"UNDERLINE"===e.mirror.selectionProperties.textDecoration,isUnorderedList:"UNORDERED_LIST"===e.mirror.selectionProperties.textLineType,fontFamily:e.mirror.selectionProperties.fontFamily})),o=s&&(0,z.hS)(s)&&e[s]?Object.keys(e[s]):[],c=o.every(e=>!(0,i9.N)(e)),p=o.every(e=>!al(e));return l.createElement(el.Ad,{label:null,input:l.createElement("div",{className:Z.cx.flex.wFull.gap4.$},l.createElement(ai,{selected:n,disabled:c,onClick:()=>{Q.Y5.triggerActionInUserEditScope("toggle-bold")},icon:l.createElement(iQ.j,{color:n?"var(--color-border-selected)":void 0}),tooltip:(0,x.t)("slides.properties_panel.text.bold"),trackingName:"slides_bold_button",recordingKey:h.Pt(t,"bold")}),l.createElement(ai,{selected:r,disabled:p,onClick:()=>{Q.Y5.triggerActionInUserEditScope("text-toggle-italic")},icon:l.createElement(iz.s,{color:r?"var(--color-border-selected)":void 0}),tooltip:(0,x.t)("slides.properties_panel.text.italic"),trackingName:"slides_italic_button",recordingKey:h.Pt(t,"italic")}),l.createElement(ai,{selected:i,disabled:!1,onClick:()=>{Q.Y5.triggerActionInUserEditScope("text-toggle-underline")},icon:l.createElement(i$.W,{color:i?"var(--color-border-selected)":void 0}),tooltip:(0,x.t)("slides.properties_panel.text.underline"),trackingName:"slides_underline_button",recordingKey:h.Pt(t,"underline")}),l.createElement(ai,{selected:a,disabled:!1,onClick:()=>{Q.Y5.triggerActionInUserEditScope("text-toggle-unordered-list")},icon:l.createElement(iX.Z,{color:a?"var(--color-border-selected)":void 0}),tooltip:(0,x.t)("slides.properties_panel.text.unordered_list"),trackingName:"slides_unordered_list_button",recordingKey:h.Pt(t,"unorderedList")}))})}function ai({selected:e,disabled:t,onClick:n,icon:r,tooltip:i,trackingName:a,recordingKey:s}){return l.createElement(nz.E,{name:a},l.createElement(e9.GG,{className:p()("slides_type_panel--formatButton--71QdB",{"slides_type_panel--selected--dHazD":e,"slides_type_panel--disabled--Vd8xM":t}),onClick:n,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":i,"aria-label":i,recordingKey:s},r))}function aa({recordingKey:e}){let t=(0,lj.kl)("textAlignVertical")||z.oV;return l.createElement(lJ.g,{leftLabel:null,leftInput:l.createElement(nz.E,{name:"slides_text_align_horizontal"},l.createElement(i3.jw,{recordingKey:h.Pt(e,"textAlignHorizontal")})),rightLabel:null,rightInput:l.createElement(nz.E,{name:"slides_text_align_vertical"},l.createElement(i3.Ln,{textAlignVertical:t,recordingKey:h.Pt(e,"textAlignVertical")}))})}var as=n(390487),ao=n(69961),ac=n(75215),ap=n(251518),ad=n(31687),au=n(781867),am=n(721489),ah=n(374626),aE=n(57392),a_=n(715762),ay=n(507662),ag=n(664241),aP=n(258376);function aS({recordingKey:e}){let t=(0,ah.md)(aE.I7);return(0,i7.Tt)()&&!(0,u.kc)().ds_variables_relax_modes&&t?l.createElement(af,{recordingKey:e}):null}let ab="VARIABLES_INCOMPATIBLE_MODES_UPDATE_DROPDOWN";function af({recordingKey:e}){let t=(0,r.wA)(),n=(0,nS.Um)(),i=l.useRef(null),a=n&&n.type===ab,s=l.useCallback(()=>{i.current&&t(e$.j7({type:ab,data:{targetRect:i.current.getBoundingClientRect()}}))},[t]),o=l.useCallback(()=>{t(ee.to({type:ay.T,data:{initialTab:t4.Wv.UPDATES,entrypoint:a_.r6.VARIABLE_MODES_ACCEPT_UPDATES_DROPDOWN_OPTION}}))},[t]);return l.createElement(l.Fragment,null,l.createElement("div",{ref:i},l.createElement(tr.YW,{recordingKey:h.Pt(e,"updateIcon"),selected:!!a,svg:aP.A,className:ag.l_,dataTestId:"updatesModesButton","data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("variables.layer_panel.header.update_button_direct.tooltip"),onMouseDown:e=>e.stopPropagation(),onClick:s})),a&&(i.current?l.createElement(e0.Cf,{targetRect:i.current.getBoundingClientRect(),maxWidth:226,disableDropdownScrollContainer:!0,propagateCloseClick:!0},l.createElement(l.Fragment,null,l.createElement(eQ.c$,{className:ag.Ig,recordingKey:h.Pt(e,"description"),key:"description",disabled:!0},(0,x.t)("variables.layer_panel.header.update_button.dropdown.description")),l.createElement(eQ.wv,null),l.createElement(eQ.c$,{onClick:o,recordingKey:h.Pt(e,"review-update"),key:"review_update"},(0,x.t)("variables.layer_panel.header.update_button_direct.dropdown.option")))):null))}function av(e){let t=(0,l.useRef)(null),n=(0,eW.DP)(),r=e=>Q.Y5.updateSelectionProperties({backgroundEnabled:e}),i=e=>{Q.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},a=(0,tY.xx)(e=>{let t=(0,z.E7)(e.backgroundColor),n=(0,z.E7)(e.backgroundOpacity);return null!=t&&null!=n?{...t,a:n}:e.backgroundColor||z.oV}),s=l.createElement(aw,{backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,pickerShown:e.pickerShown,chitRowRef:t,recordingKey:e.recordingKey}),o=()=>l.createElement("span",{className:"background_panel--visible--2-4Ns"},l.createElement(au.B,{visible:e.backgroundEnabled,onChange:r,recordingKey:h.Pt(e,"visibleToggle")}));return l.createElement(tz.p,{name:"background_panel"},l.createElement(e3.Zk,null,l.createElement("div",null,l.createElement(e3.fI,{className:"background_panel--panelTitleRow--uNINf"},l.createElement(e3.xw,null,(0,x.tx)("fullscreen.properties_panel.page")),l.createElement(aS,{recordingKey:"pageLevel"}),l.createElement(am.M,{showLibrarySets:!0,recordingKey:"pageLevel"})),"ui2"===n.version?l.createElement(l.Fragment,null,l.createElement(e3.fI,{forwardedRef:t},s,o())):l.createElement(el.DE,{ref:t,label:null,input:s,icon:o()})),e.hasExports?"ui3"===n.version&&ao.nt.ui3ClipContentControl.getValue()?l.createElement(el.Ad,{label:l.createElement(l.Fragment,null),input:l.createElement(rV.S,{muted:!0,mixed:e.exportBackgroundDisabled===z.oV,checked:!1===e.exportBackgroundDisabled,onChange:i,recordingKey:h.Pt(e,"exportDisableCheckbox"),label:l.createElement(rw.J,{htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":eJ.Ib.TEXT}},(0,x.tx)("fullscreen.properties_panel.show_in_exports")),htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":eJ.Ib.TEXT}})}):l.createElement(e3.fI,{className:"background_panel--checkboxLabelRow--r-hmK"},l.createElement(ac.t,{className:"background_panel--checkbox--6U3j-",id:"export-background-disabled",property:e.exportBackgroundDisabled===z.oV?z.oV:!e.exportBackgroundDisabled,onChange:i,recordingKey:h.Pt(e,"exportDisableCheckbox")}),l.createElement(e3.JU,{className:"background_panel--checkboxLabel--ITthj",htmlFor:"export-background-disabled","data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports")},(0,x.tx)("fullscreen.properties_panel.show_in_exports"))):void 0,e.pickerShown?.id===S.k8&&l.createElement(ap.sk,{disabledVariableIds:new Set,title:(0,x.t)("fullscreen.properties_panel.background"),initialPosition:new eI.Mi(e.pickerShown.initialX,e.pickerShown.initialY),color:(0,z.hS)(a(e))?(0,z.E7)(a(e)):{r:1,g:1,b:1,a:1},boundVariable:null,onChange:(e,t)=>{let n=e.a;e.a=1,Q.Y5.updateSelectionProperties({backgroundColor:e,backgroundOpacity:n,backgroundEnabled:!0},{shouldCommit:t})},recordingKey:h.Pt(e,"colorPicker")}),l.createElement(ad.wu,{showExplicitOnly:!0,recordingKey:"backgroundPanel-variableModeEntries"})))}function aw(e){let t=(0,r.wA)(),n=(0,tY.xx)(e=>{let t=(0,z.E7)(e.backgroundColor),n=(0,z.E7)(e.backgroundOpacity);return null!=t&&null!=n?{...t,a:n}:e.backgroundColor||z.oV}),i=l.useMemo(()=>(0,z.hS)(e.backgroundOpacity)&&"number"==typeof e.backgroundOpacity&&isNaN(e.backgroundOpacity)?0:e.backgroundOpacity,[e.backgroundOpacity]),a=(0,z.E7)(e.backgroundColor),s=(0,z.E7)(e.backgroundEnabled),o={color:a??void 0,opacity:(0,z.E7)(i)??void 0,type:"SOLID",blendMode:"NORMAL",visible:s??void 0};return l.createElement("div",{className:"background_panel--colorValueContainer---lsls paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},l.createElement(l8.y7,{recordingKey:e.recordingKey,togglePicker:()=>{if(e.pickerShown&&e.pickerShown.id===S.k8)t(K.XE());else{(0,u.kc)().ce_properties_panel_tracking&&(0,tH.sx)("editor-background-panel-color-picker-show");let n=e.chitRowRef.current?(0,eZ.cn)(e.chitRowRef.current):{x:0,y:0};t(K.u1({id:S.k8,initialX:n.x,initialY:n.y})),t(g.sw())}},chitOverride:{color:n(e),opacity:i},paint:o,onChange:(t,n)=>{let l=!(0,r.bN)(t.color,e.backgroundColor),i=t.opacity!==e.backgroundOpacity;Q.Y5.updateSelectionProperties({backgroundColor:l?t.color:void 0,backgroundOpacity:i?t.opacity:void 0,backgroundEnabled:0!==t.opacity},{shouldCommit:n})}}))}var aT=n(889449),aI=n(33136),ak=n(44159);function aN(e){let t=(0,aI.t)();return e.readOnly?l.createElement(ak.lc,{...e}):t.nodesAreAllInsideStacks&&"AUTO"===t.stackPositioning?null:l.createElement(e3.Zk,null,l.createElement(e3.fI,null,l.createElement(e3.xw,{extended:!0},(0,x.tx)("fullscreen.properties_panel.constraints_panel.constraints"))),l.createElement(ak.lc,{...e}))}function aC(e){return l.createElement(tz.p,{name:"constraints_panel"},l.createElement(aN,{...e}))}var aA=n(233711),aO=n(60968),aM=n(464558),aR=n(366165),aL=n(280400),ax=n(693601);let aD=`You are a programmatic designer.  You manipulate scene graphs based on a JSX representation.
You will look at a source JSX and apply changes to it based on a users instructions.
Utilize good design principles and make things look really nice.
Available Node Types: FRAME, ELLIPSE, TEXT, ROUNDED_RECTANGLE
Available Props:
- x,y: number, position relative to parent node
- width,height: number, size of node
- cornerRadius: number, roundness of corners
- fills: Comma separated string of fills of format "solid #ffffff" or "image <hash-of-image>"
- strokes: Comma separated string of strokes of format "1px solid inside #ffffff
- fontName: string of font name. Only use fonts available in google fonts.
- fontSize: number, font size in pixels
- effects: Comma separated string of effects.  "drop_shadow|inner_shadow <x-offset>px <y-offset>px <spread>px <radius>px #000000" or "layer_blur|background_blur <radius>px"
- characters: The of a text node. This is an attribute, not text inside the node.
Do not respond with anything besides the new JSX. No explanation and no codeblocks.
`;function aF({jsx:e,updateJSX:t}){let[n,r]=(0,l.useState)("change the circles fills to 6px strokes"),[i,a]=(0,l.useState)(!1);async function s(){a(!0);let l=await ef.Ay.anthropic.getClaudeCompletions({model:"claude-3-5-sonnet-20240620",max_tokens:8192,system:[{type:"text",text:aD+"\n\n"+e,cache_control:{type:"ephemeral"}}],messages:[{role:"user",content:n}]});if(0===l.content.length||"text"!==l.content[0].type)throw Error("Invalid response from Cortex");t(l.content[0].text),a(!1)}return l.createElement("div",null,l.createElement("textarea",{style:{width:"100%",height:"60px",display:"block",fontSize:"20px"},value:n,onChange:e=>r(e.target.value),placeholder:"Prompt to edit nodes"}),l.createElement(n2.$n,{onClick:s,disabled:i},i?"Communing":"Make Edits"))}function aV(){let[e,t]=(0,l.useState)(""),n=(0,q.uQ)(),[r,i]=(0,l.useState)("jsx"),a=(0,l.useRef)(null),s=(0,l.useCallback)(async e=>{t(await (0,ax.oy)(e,{includeIDs:!1,filterFunction:e=>e.visible}))},[t]),o=(0,l.useCallback)(async e=>{let n=await (0,ax.Mb)(e);if(t(n),a.current){let e=btoa(n);a.current.src="data:text/html;base64,"+e}},[t]);async function c(e){let t=await (0,ax.LZ)(e,{includeIDs:!1});if(!t)throw Error("Couldn't parse jsx");es.l7.user("jsx-debugging",()=>{let e=er.q.instance.getDirectlySelectedNodes()[0],n=e.parentNode;e.removeSelfAndChildren(),n?.appendChild(t),er.q.instance.getCurrentPage()?.setSelectionToSingleNode(t.guid)})}return(0,l.useEffect)(()=>{if(!n)return;let e=er.q.instance.get(n);e&&("jsx"===r?s(e):o(e))},[n,r,s,o]),l.createElement("div",{style:{padding:16}},l.createElement(aL.A.Root,{value:r,onChange:i,legend:l.createElement(rs.s,null,"HTML / JSX")},l.createElement(aL.A.Option,{value:"jsx",key:"jsx",label:l.createElement(rw.J,null,"JSX")}),l.createElement(aL.A.Option,{value:"html",key:"html",label:l.createElement(rw.J,null,"HTML")})),l.createElement("div",null,l.createElement("textarea",{rows:15,value:e,style:{padding:10,width:"100%"},onChange:e=>t(e.target.value)})),"html"===r&&l.createElement("iframe",{title:"html-export-preview",style:{height:"300px"},ref:a}),l.createElement(n2.$n,{onClick:()=>c(e)},"Update"),"jsx"===r&&l.createElement(aF,{jsx:e,updateJSX:e=>{t(e),c(e)}}))}var aK=n(613023),aU=n(841368),aH=n(201706),aB=n(877953),aG=n(499777),aY=n(567488),aW=n(714939),aQ=n(224690),az=n(760066),a$=n(290022),aX=n(493424),aj=n(468570),aJ=n(414879),aZ=n(782033);function aq(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m12.378 6.379 4.25 2.479a.75.75 0 0 1 .372.648v4.99a.75.75 0 0 1-.372.647l-4.25 2.48a.75.75 0 0 1-.756 0l-4.25-2.48A.75.75 0 0 1 7 14.495.495.495 0 0 0 6.505 14h-.01a.495.495 0 0 0-.495.495c0 .623.33 1.198.868 1.512l4.25 2.479a1.75 1.75 0 0 0 1.764 0l4.25-2.48a1.75 1.75 0 0 0 .868-1.51v-4.99a1.75 1.75 0 0 0-.868-1.512l-4.25-2.48a1.75 1.75 0 0 0-1.764 0l-4.25 2.48A1.75 1.75 0 0 0 6 9.506c0 .273.222.494.495.494h.01A.495.495 0 0 0 7 9.506a.75.75 0 0 1 .372-.648l4.25-2.48a.75.75 0 0 1 .756 0M10.063 12.5a2 2 0 1 0 0-1H5.5a.5.5 0 0 0 0 1zM11 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0",clipRule:"evenodd"}))}var a0=n(861726),a1=n(416580),a5=n(175290),a4=n(83909),a3=n(113058),a6=n(301462),a2=n(878319),a7=n(219101),a8=n(986175),a9=n(824374),se=n(161115);let st=new n9.SU;class sn extends ls.c${}class sl extends ls.l6{}class sr extends l.PureComponent{render(){let e=this.props.includePassThrough?se.j4:se.r5;return l.createElement(sl,{id:si(this.props.id),className:this.props.className,inputClassName:this.props.inputClassName,chevronClassName:this.props.chevronClassName,property:this.props.property,formatter:st,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,willShowDropdown:this.props.willShowDropdown,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey,dropdownWidth:this.props.isUI3?120:"auto",icon:this.props.isUI3?l.createElement(a8.N,null):l.createElement(a9.M,{value:(0,z.E7)(this.props.property),defaultBlendMode:this.props.includePassThrough?"PASS_THROUGH":"NORMAL"}),enablePreview:!0},e.map((e,t)=>"SELECT_DIVIDER"===e?l.createElement(ls.sK,{key:t}):l.createElement(sn,{key:t,value:e,recordingKey:h.Pt(this.props,e)})))}}function si(e){return`blend-mode-select-${e}`}sr.displayName="BlendMode";var sa=n(697652),ss=n(83695),so=n(731262),sc=n(282263),sp=n(952277),sd=n(171975),su=n(77763),sm=n(737834),sh=n(435091);let sE=(0,aQ.Tn)();function s_(e){let t=l.useCallback(e=>{Q.Y5.updateSelectionProperties({visible:e})},[]),n=l.useMemo(aQ.On,[]),{isDefReferencedBySelection:r,visibilityIsBoundToComponentProp:i}=(0,ij.R)(e=>({isDefReferencedBySelection:!!n(e,aH.R.VISIBLE),visibilityIsBoundToComponentProp:sE(e,(0,ip.qd)(e),aH.R.VISIBLE)})),a=(0,n$.SG)(["VISIBLE"]).data??[],[s]=(0,lj.lJ)("visible"),{consumedVariable:o}=(0,i7.u3)(["VISIBLE"]),c=l.useRef(null),[p,d]=sw("visibility-icon"),m=sT(),E=(0,n$.u)(m),_=!!o&&!!E,y=_||i||r,g=!_&&!i&&a.length>0,P=s?(0,x.t)("fullscreen.properties_panel.tooltip_hide"):(0,x.t)("fullscreen.properties_panel.tooltip_show"),S=l.createElement("span",{className:sh.RK},l.createElement(au.B,{disabled:y,visible:s,onChange:t,recordingKey:h.Pt(e,"visibleToggle")})),b=(0,ti.R)();return l.createElement("div",{className:sh.RK},l.createElement(az.JQ,{ref:c,currentFieldValue:!!(0,z.gl)(s)||s,isActive:p,disabled:!g,onPickerOpen:()=>d(c.current),recordingKey:h.Pt(e,"visibilityVariableControl"),dataTestId:"visibility-variable-control",openOnRightClick:!0},b?(0,u.kc)().ce_tv_fpl_toggle_button?l.createElement(sd.f,{onIcon:l.createElement(su.j,null),offIcon:l.createElement(sm._,null),checked:!y&&!s,mixed:!y&&(0,z.gl)(s),disabled:y,onChange:()=>t(s===z.oV||!s),recordingKey:h.Pt(e,"visibleToggle"),"aria-label":P,variant:"highlighted",htmlAttributes:{"data-test-id":"visibility-variable-control","data-tooltip":P,"data-tooltip-type":eJ.Ib.TEXT}}):l.createElement(tr.YW,{selected:!y&&!s,disabled:y,onClick:()=>t(s===z.oV||!s),recordingKey:h.Pt(e,"visibleToggle"),dataTestId:"visibility-variable-control","data-tooltip":P,"data-tooltip-type":eJ.Ib.TEXT},s?l.createElement(sm._,null):l.createElement(su.j,null)):S))}var sy=n(82131),sg=n(490393),sP=n(424148),sS=n(144919);function sb(e){let{blendMode:t,opacity:n,visible:i}=e,a="ui3"===(0,eW.DP)().version,o=l.useRef(null),c=l.useMemo(aQ.On,[]),d=l.useMemo(aQ.Tn,[]),{dropdownShown:m,isDefReferencedBySelection:E,selectedGUIDs:_,visibilityIsBoundToComponentProp:y}=(0,ij.R)(e=>({dropdownShown:e.dropdownShown,isDefReferencedBySelection:!!c(e,aH.R.VISIBLE),selectedGUIDs:(0,ip.qd)(e),visibilityIsBoundToComponentProp:d(e,(0,ip.qd)(e),aH.R.VISIBLE)})),g=(0,z.gl)(i),P=(0,r.wA)(),S=l.useCallback((e,t=rF.zk.YES)=>{a4.wt.shouldReportForShouldCommit(t)&&a6.F.trackFromFullscreen("editor-blend-mode-change",{blendMode:e}),Q.Y5.updateSelectionProperties({blendMode:e,visible:!0},{shouldCommit:t})},[]),b=l.useCallback((e,t)=>{Q.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!E&&Q.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[E]),f=l.useRef(null),[,v]=sw("layer-panel"),{clearVariableConsumption:w}=(0,i7.u3)(["VISIBLE"]),{variableConsumptionMap:T}=(0,i7.R1)(),I=sT(),k=(0,n$.u)(I),N=k?.name,C=sf();return l.createElement(tz.p,{name:"layer_panel"},l.createElement(e3.Zk,null,l.createElement(e3.fI,{className:sy.LO},l.createElement(sa.Tu,{isPanelBodyCollapsedAtom:null},l.createElement(e3.xw,{isPanelBodyCollapsedAtom:null},(0,x.tx)("fullscreen.layer_panel.layer")),l.createElement(aS,{recordingKey:"frameLevel"}),!C&&l.createElement(aY.yQ,{nodeField:aH.R.VISIBLE,defaultValue:i,guids:_}),l.createElement(am.M,{showLibrarySets:!1,recordingKey:"frameLevel"}))),l.createElement(sa.JH,{isPanelBodyCollapsedAtom:null},l.createElement(e3.fI,null,l.createElement(sr,{id:"layer-blend-mode",className:sh.jK,inputClassName:sh.Df,chevronClassName:sh.ai,property:t,dispatch:P,dropdownShown:m,onChange:S,willShowDropdown:()=>((0,tH.sx)("editor-blend-mode-dropdown-show"),Promise.resolve()),includePassThrough:!0,recordingKey:h.Pt(e,"blendMode"),isUI3:a}),l.createElement(a7.e,{condition:!0,wrapper:t=>l.createElement(az.sA,{recordingKey:h.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:s.rXF.FLOAT,currentFieldValue:(0,z.hS)(n)?n:void 0,inputClassName:p()({[sh.ke]:!0,[sh.TQ]:!0}),hideIcon:!0,inputRef:o,hasBindingContextMenu:!0},t)},l.createElement(ln.Pd,{isTokenizable:!0,value:n,onValueChange:b,mixedMathHandler:sk,dispatch:P,recordingKey:h.Pt(e,"opacity"),forwardedRef:o,noBorderOnHover:!0})),l.createElement(s_,{recordingKey:e.recordingKey})),g&&!E&&l.createElement(e3.fI,{dataTestId:"mixed-visibility-label"},l.createElement(e3.UZ,{className:sg.Pf},(0,x.tx)("fullscreen.layer_panel.replace_mixed_visibility",{svg:l.createElement("div",{className:sh.dY},l.createElement(ez.U,{svg:sS.A},l.createElement(a0.l,null)))}))),l.createElement("div",{className:sh.I0},l.createElement(aW.L,{nodeField:aH.R.VISIBLE,currentValue:e.visible})),(0,u.kc)().prototype_expressions_nodefields?T.VISIBLE&&l.createElement(a5.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},l.createElement(ss.y3,{targetVariableData:T.VISIBLE.isMixed?void 0:T.VISIBLE,onClick:()=>{v(f.current)},isNarrowPanel:!0,isInCell:!1,showVariableThumbnails:!0,isInConditional:!1,isMixed:T.VISIBLE.isMixed}),l.createElement(e2.K,{onClick:()=>w(),"aria-label":(0,x.t)("variables.binding_ui.detach_variable_tooltip"),recordingKey:"detachVisibilityVariable",htmlAttributes:{"data-tooltip":(0,x.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(ez.U,{svg:sP.A},l.createElement(a1.U,null)))):C&&!y&&l.createElement(a5.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},l.createElement(sp.P,{value:N||(0,x.t)("fullscreen.mixed"),isStandalone:!0,styleOverride:{width:"auto"},isDeleted:!!k&&(0,i8.eF)(k)}),l.createElement(e2.K,{onClick:()=>w(),"aria-label":(0,x.t)("variables.binding_ui.detach_variable_tooltip"),recordingKey:"detachVisibilityVariable",htmlAttributes:{"data-tooltip":(0,x.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(ez.U,{svg:sP.A},l.createElement(a1.U,null)))),l.createElement(ad.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}))))}function sf(){let{consumedVariable:e}=(0,i7.u3)(["VISIBLE"]),t=sT(),n=(0,n$.u)(t);return!!e&&!!n}let sv=()=>{let e=(0,ij.R)(e=>(0,ip.qd)(e)),t=(0,aY.Yc)(aH.R.VISIBLE,e),n=(0,u.kc)().ds_variable_props_unified_ui&&!t,r=l.useCallback(e=>{es.l7.user("add-prop-ref",()=>s.glU.addComponentPropRef(aH.R.VISIBLE,e.value.explicitDefId))},[]);return l.useMemo(()=>n?r:void 0,[n,r])},sw=e=>(0,sc.JV)(["VISIBLE"],s.rXF.BOOLEAN,void 0,{requestedTypes:[s.rXF.BOOLEAN,s.rXF.FLOAT,s.rXF.STRING],variableFilters:{[a2.t.MUST_INCLUDE_ONE_OF]:{[s.rXF.STRING]:so.O4},[a2.t.HIDE_IN_DEFAULT_VIEW]:{[s.rXF.FLOAT]:!0}},mapVariableIdToTypedValue:sc.eT,metadata:e},void 0,sv());function sT(){let e;let{consumedVariable:t}=(0,i7.u3)(["VISIBLE"]);if(t){if((0,z.hS)(t)&&t.type===s.Z_n.ALIAS)e=t.value;else if((0,z.hS)(t)&&t.type===s.Z_n.EXPRESSION){for(let n of(0,i8.Pr)(t))if(n.type===s.Z_n.ALIAS){e=n.value;break}}}return e}class sI extends a3.M{getValueForNode(e){return e.opacity}setValueForNode(e,t){es.l7.user("set-opacity",()=>{a4.wt.reportAnyPropertyChange(["opacity"]),e.opacity=t})}}let sk=new sI,sN=(0,aQ.Tn)();function sC(e){let t=l.useMemo(aQ.On,[]),{isDefReferencedBySelection:n,visibilityIsBoundToComponentProp:r}=(0,ij.R)(e=>({isDefReferencedBySelection:!!t(e,aH.R.VISIBLE),visibilityIsBoundToComponentProp:sN(e,(0,ip.qd)(e),aH.R.VISIBLE)})),[i]=(0,lj.lJ)("visible"),{consumedVariable:a}=(0,i7.u3)(["VISIBLE"]),s=l.useRef(null),[o,c]=sw("binding-icon"),d=sT(),u=(0,n$.u)(d),m=!!a&&!!u||r||n;return l.createElement("div",{className:sh.RK},l.createElement(az.JQ,{ref:s,currentFieldValue:!!(0,z.gl)(i)||i,isActive:o,disabled:m,onPickerOpen:()=>c(s.current),recordingKey:h.Pt(e,"visibilityVariableControl"),dataTestId:"visibility-variable-control",openOnRightClick:!1,inputClassName:p()({"appearance_panel_visibility_binding_icon--iconButtonSelected--At-wP":o,"appearance_panel_visibility_binding_icon--iconButton--EALe5":!o&&!m,"appearance_panel_visibility_binding_icon--iconButtonDisabled--VnIWe":m})},l.createElement(aq,null)))}let sA="layer-blend-mode-select",sO=new n9.SU;class sM extends ls.c${}class sR extends ls.l6{renderInput(){return l.createElement(e2.K,{recordingKey:(0,h.Pt)(this.props.recordingKey,"blendMode"),"aria-label":(0,x.t)("properties.dropdown.apply_blend_mode"),onClick:this.onMouseDown,actionOnPointerDown:!0,htmlAttributes:{"data-tooltip":(0,x.t)("properties.dropdown.apply_blend_mode"),"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(a9.M,{value:this.props.property,defaultBlendMode:"PASS_THROUGH"}))}}function sL(e){let t=(0,ao.o3)(ao.nt.ui3ConstraintsV2),[n,i]=(0,se.sL)(),a=(0,r.wA)(),s=(0,nS.Um)(),o=(0,n1.cJ)(),c=!(0,se.qg)(n,"PASS_THROUGH"),p=se.j4.map((t,n)=>{let r="LINEAR_BURN"===t&&o;return"SELECT_DIVIDER"===t?l.createElement(ls.sK,{key:n}):l.createElement(sM,{key:n,value:t,disabled:r,recordingKey:h.Pt(e,"blendMode",t)})});return t&&c&&s?.type!==sA||s?.type===si(sx)?l.createElement(nQ.d,{"aria-label":(0,x.t)("properties.dropdown.remove_blend_mode"),toggled:!0,actionOnPointerDown:!0,onClick:()=>i("PASS_THROUGH"),htmlAttributes:{"data-tooltip":(0,x.t)("properties.dropdown.remove_blend_mode"),"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(a9.M,{value:n,defaultBlendMode:"PASS_THROUGH"})):l.createElement(sR,{id:sA,className:"selection_blend_mode_icon_button--container--Wv9Hd",dropdownClassName:"selection_blend_mode_icon_button--blendModeSelectDropdown--WcwN1 blend_mode_select--blendModeSelectDropdown--jlg6p",property:n,onChange:i,formatter:sO,dispatch:a,dropdownShown:s,onMouseDown:G.dG,minTop:6,recordingKey:h.Pt(e,"blendMode"),enablePreview:!0,dropdownAlignment:"right",willShowDropdown:()=>((0,tH.sx)("editor-blend-mode-dropdown-show"),Promise.resolve())},p)}let sx="layer-blend-mode";function sD(e){let t=(0,r.wA)(),[n,i]=(0,se.sL)(),a=(0,ao.o3)(ao.nt.ui3ConstraintsV2),s=(0,ij.R)(e=>e.dropdownShown);return!a||(s?.type===sA||(0,se.qg)(n,"PASS_THROUGH"))&&s?.type!==si(sx)?null:l.createElement(el.DE,{label:(0,x.t)("fullscreen.properties_panel.appearance_panel.blend_mode"),input:l.createElement(sr,{id:sx,className:sh.jK,inputClassName:sh.Df,chevronClassName:sh.ai,property:n,dispatch:t,dropdownShown:s,onChange:i,willShowDropdown:()=>((0,tH.sx)("editor-blend-mode-dropdown-show"),Promise.resolve()),includePassThrough:!0,recordingKey:h.Pt(e,"blendMode"),isUI3:!0}),icon:l.createElement(e2.K,{htmlAttributes:{"data-tooltip":(0,x.t)("general.remove"),"data-tooltip-type":eJ.Ib.TEXT},"aria-label":(0,x.t)("general.remove"),onClick:()=>i("PASS_THROUGH"),actionOnPointerDown:!0},l.createElement(e8.f,null))})}function sF(){let{consumedVariable:e,clearVariableConsumption:t}=(0,i7.u3)(["VISIBLE"]),n=sT(),r=(0,n$.u)(n),i=r?.name,a=!!e&&!!r,s=l.useMemo(aQ.Tn,[]),o=(0,n$.BQ)(n),c=(0,ij.R)(e=>s(e,(0,ip.qd)(e),aH.R.VISIBLE));return!a||c?null:l.createElement(el.DE,{appendedClassName:"component_bound_vibisility_row--row--Pss97",input:l.createElement(sp.P,{value:i||(0,x.t)("fullscreen.mixed"),isStandalone:!0,classNameOverride:"component_bound_vibisility_row--pillCover--q5iKl",styleOverride:{width:"auto"},isDeleted:!!r&&(0,i8.eF)(r),fullWidth:!0,varaiablePillContainerClassName:"component_bound_vibisility_row--ui3RowVariablePillContainer--ocnP8",thumbnailValue:"MIXED"!==o?o:void 0}),icon:l.createElement("div",{className:"component_bound_vibisility_row--detachVisibilityIcon--FcjEN"},l.createElement(e2.K,{onClick:()=>t(),"aria-label":(0,x.t)("variables.binding_ui.detach_variable_tooltip"),recordingKey:"detachVisibilityVariable",htmlAttributes:{"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(a1.U,null))),label:null})}var sV=n(866577);function sK(e){let t=(0,ry.Df)(),n=(0,aB.C)("fpl_dialog_trigger"),i=(0,ry.Jo)(),a=(0,aG.kG)("corner-smoothing"),[o]=(0,lj.lJ)("rectangleCornerRadiiIndependent"),c=(0,lj.kl)("visible"),p=!i.rectangleCornerRadii,d=t.cornerRadius,[m,E]=l.useState(null),[_]=(0,lj.lJ)("opacity"),y=t.rectangleCornerRadii,g=t.rectangleCornerRadii&&!!m,P=!i.cornerRadius,S=P||p,b=(0,l.useRef)(null),f=l.useRef(null),v=sf(),w=l.useMemo(aQ.On,[]),{isDefReferencedBySelection:T,selectedGUIDs:I}=(0,ij.R)(e=>({isDefReferencedBySelection:!!w(e,aH.R.VISIBLE),selectedGUIDs:(0,ip.qd)(e)})),k=(0,aY.Yc)(aH.R.VISIBLE,I),N=(0,u.kc)().ds_variable_props_unified_ui&&(!k||T),C=l.useCallback((e,t)=>{Q.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!T&&Q.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[T]),A=(0,l.useCallback)(()=>{a.hide(),Q.Y5.deselectProperty()},[a]),O=(0,r.wA)(),M=l.useCallback(()=>{(0,u.kc)().ce_properties_panel_tracking&&(0,tH.sx)("editor-transform-panel-change",{key:"rectangleCornerRadiiIndependent",value:!(0,z._W)(o,!1)}),!g&&b.current?E((0,eZ.cn)(b.current,parseInt(sV.Je,10))):E(null)},[o,g]),R=n?l.createElement(nQ.d,{actionOnPointerDown:!0,toggled:g,onClick:M,"aria-label":(0,x.t)("fullscreen.properties_panel.transform_panel.independent_corners"),disabled:S,recordingKey:h.Pt(e,"rectangleCornerToolIndependentToggle")},l.createElement(aK.Q,null)):l.createElement(e3.YW,{selected:g,onClick:M,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.transform_panel.independent_corners"),recordingKey:h.Pt(e,"rectangleCornerToolIndependentToggle"),disabled:S},l.createElement(aK.Q,null)),L=(0,u.kc)().ce_tv_fpl_dialog_trigger_button?l.createElement(nQ.d,{recordingKey:h.Pt(e,"cornerSmoothingToggle"),"aria-label":(0,x.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),toggled:a.showing,disabled:P,htmlAttributes:{onMouseDown:e=>{(0,a$._)(a,b,e)},"data-tooltip":(0,x.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),"data-tooltip-type":eJ.Ib.TEXT}},l.createElement(aU.J,null)):l.createElement(e3.YW,{onMouseDown:e=>{(0,a$._)(a,b,e)},recordingKey:h.Pt(e,"cornerSmoothingToggle"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),selected:a.showing,disabled:P},l.createElement(aU.J,null));return l.useEffect(()=>{E(null)},[I]),l.createElement(e3.Zk,null,l.createElement(ld.Wv,{titleTx:(0,x.tx)("fullscreen.appearance_panel.appearance")},!v&&!N&&l.createElement(aY.yQ,{nodeField:aH.R.VISIBLE,defaultValue:c,guids:I}),l.createElement(aS,{recordingKey:"frameLevel"}),l.createElement(am.M,{showLibrarySets:!1,recordingKey:"frameLevel"}),l.createElement(s_,{recordingKey:e.recordingKey}),N&&l.createElement(sC,{recordingKey:e.recordingKey}),l.createElement(sL,{recordingKey:e.recordingKey})),l.createElement(el.fn,{ref:b,leftInput:l.createElement(az.sA,{recordingKey:h.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:s.rXF.FLOAT,currentFieldValue:(0,z.hS)(_)?_:void 0,inputRef:f,hasBindingContextMenu:!0},l.createElement(ln.Pd,{inputClassName:"appearance_panel--input--h3br5 raw_components--flushLeft--YH-5P",ui3RightJustifyPercentSign:!1,noBorderOnHover:!0,isTokenizable:!0,value:_,onValueChange:C,mixedMathHandler:sU,dispatch:O,recordingKey:h.Pt(e,"opacity"),forwardedRef:f},l.createElement("div",{className:"appearance_panel--opacityIconContainer---kdX-"},l.createElement(iC.N,null)))),rightInput:l.createElement(aX.C,{recordingKey:e.recordingKey,disabled:!d||g||P}),icon:d?y?l.createElement(nz.E,{name:"independent_corner_radius_toggle"},R):L:null,leftLabel:(0,x.tx)("fullscreen.properties_panel.section_appearance.label_opacity"),rightLabel:d?(0,x.tx)("fullscreen.properties_panel.transform_panel.corner_radius"):null}),(t.count||t.starInnerScale)&&l.createElement(aZ.cU,{countShown:t.count,countDisabled:!i.count,starInnerScaleShown:t.starInnerScale,starInnerScaleDisabled:!i.starInnerScale,recordingKey:e.recordingKey}),t.arcData&&l.createElement(aZ.Je,{arcDataDisabled:!i.arcData,recordingKey:e.recordingKey}),l.createElement(sD,{recordingKey:e.recordingKey}),l.createElement(aW.L,{nodeField:aH.R.VISIBLE,currentValue:c}),l.createElement(ad.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}),l.createElement(sF,null),g&&m&&l.createElement(aJ.$,{initialPosition:m,onClose:M,recordingKey:h.Pt(e,"advanced")}),a.showing&&l.createElement(aj.T,{initialPosition:a.initialPosition,onClose:A,recordingKey:h.Pt(e,"advanced")}))}let sU=new sI;var sH=n(89586);let sB="mask_panel--maskTypeDropdown--3Etsx";class sG extends ls.l6{}class sY extends ls.c${}class sW extends l.PureComponent{constructor(){super(...arguments),this.onMaskTypeChange=(e,t=rF.zk.YES)=>{Q.Y5.updateSelectionProperties({maskType:e},{shouldCommit:t})},this.maskTypeFormatter={format:e=>{switch(e){case"ALPHA":return(0,x.t)("fullscreen.mask_panel.alpha");case"OUTLINE":return(0,x.t)("fullscreen.mask_panel.vector");case"LUMINANCE":return(0,x.t)("fullscreen.mask_panel.luminance")}},formatExtended:e=>{switch(e){case"ALPHA":return{text:(0,x.t)("fullscreen.mask_panel.alpha_extended")};case"OUTLINE":return{text:(0,x.t)("fullscreen.mask_panel.vector_extended")};case"LUMINANCE":return{text:(0,x.t)("fullscreen.mask_panel.luminance_extended")}}}},this.stopPropagation=e=>e.stopPropagation()}render(){let e=l.createElement(e3.fI,null,l.createElement(sG,{id:"mask-type-dropdown",className:sB,property:this.props.maskType,formatter:this.maskTypeFormatter,onChange:this.onMaskTypeChange,dispatch:this.props.dispatch,dropdownClassName:sB,dropdownShown:this.props.dropdownShown,onMouseDown:this.stopPropagation,recordingKey:h.Pt(this.props,"maskType"),enablePreview:!0},l.createElement(sY,{value:"ALPHA",recordingKey:h.Pt(this.props,"maskType","alpha")}),l.createElement(sY,{value:"OUTLINE",recordingKey:h.Pt(this.props,"maskType","outline")}),l.createElement(sY,{value:"LUMINANCE",recordingKey:h.Pt(this.props,"maskType","luminance")})));return l.createElement(tz.p,{name:"mask_panel"},l.createElement(e3.Zk,null,l.createElement(e3.fI,null,l.createElement(e3.xw,null,(0,x.tx)("fullscreen.mask_panel.mask"))),e))}}sW.displayName="MaskPanel";var sQ=n(536825),sz=n(819785),s$=n(695038);function sX({addProperty:e,children:t,contentsVisibleOrMixed:n,minusDisabled:r,plusDisabled:i,recordingKey:a,removeProperty:s,showButton:o,title:c,dataTestId:p,shouldHideButton:d}){let{version:u}=(0,eW.DP)(),m=(0,l.useCallback)(()=>{!1!==n||i||e()},[e,n,i]),E=n===z.oV,_=!E&&!n;null==o&&(o=!0===n?"-":"+");let y="+"===o?l.createElement(e2.K,{recordingKey:h.Pt(a,"addButton"),onClick:e,disabled:i,"aria-label":(0,x.t)("fullscreen.properties_panel.add"),htmlAttributes:{onMouseDown:G.dG,"data-testid":p??""}},l.createElement(ez.U,{svg:tx.A,fallbackSvg:nc.A},l.createElement(eY.e,null))):l.createElement(e2.K,{recordingKey:h.Pt(a,"removeButton"),onClick:s,disabled:r,"aria-label":(0,x.t)("fullscreen.properties_panel.remove"),htmlAttributes:{onMouseDown:G.dG,"data-testid":p??""}},l.createElement(ez.U,{svg:sz.A,fallbackSvg:s$.A},l.createElement(sQ.O,null)));return"ui3"===u?l.createElement(l.Fragment,null,c&&l.createElement(ld.r,{onMouseDown:m,faded:_,isEmpty:_,titleTx:l.createElement("span",null,c),icon:d?void 0:y}),E&&l.createElement(e3.fI,null,l.createElement(e3.UZ,{className:sg.Pf},(0,x.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!E&&!_&&t):l.createElement(l.Fragment,null,c&&l.createElement(e3.fI,{onMouseDown:m,className:_?sg.et:void 0,recordingKey:h.Pt(a,"panelTitle")},l.createElement(e3.xw,{faded:_,extended:!0},l.createElement("div",{className:sg.yr},c)),l.createElement(e3.$4,null,d?null:y)),E&&l.createElement(e3.fI,null,l.createElement(e3.UZ,{className:sg.Pf},(0,x.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!E&&!_&&t)}class sj extends h.uA{constructor(){super(...arguments),this.noop=()=>{}}render(){return l.createElement(tz.p,{name:"remove_group_fill_and_stroke_panel"},l.createElement(e3.Zk,null,l.createElement(sX,{title:"Background",addProperty:this.noop,removeProperty:s.glU.clearFillAndStrokePaintsOnSelectedGroups,contentsVisibleOrMixed:!0},l.createElement(e3.fI,{className:"remove_group_fill_and_stroke_panel--labelContainer--ngqjq"},l.createElement(e3.UZ,{className:"remove_group_fill_and_stroke_panel--label--orOpK"},(0,x.tx)("fullscreen.remove_group_fill_and_stroke.background_color_group_unsupported"))))))}}var sJ=n(456363),sZ=n(632430),sq=n(832637),s0=n(529358),s1=n(376503),s5=n(161459);let s4="pencil_tool_panel--advancedStroke--1497y";var s3=n(362679),s6=n(13556),s2=n(306413);function s7(e){let t="stroke-settings",[n,i]=(0,ah.fp)(sJ.GI),a=n.paints||[],o=(0,r.wA)(),c=l.useContext(k.zK),p=()=>null!=c,d=e=>e.stopPropagation(),m=l.useRef(null),E=()=>{if(e.pickerShown?.id===t)o(K.XE());else{if(!m)return;let e=eH.findDOMNode(m.current),n=(0,eZ.cn)(e);o(K.u1({id:t,initialX:n.x,initialY:n.y}))}},_=e=>{i({paints:e}),$.Tm.clearCache()},y=e=>{let{strokeWeight:t,dashPattern:n}=e,l=(0,z.E7)(t);l&&i({strokeWeight:l});let r=(0,z.E7)(n);r&&i({dashPattern:r})},g=e=>{let t=a.filter((t,n)=>!e.has(n));0===t.length&&(t=[a[0]]),_(t)},P=(e,{fromSearch:t}={})=>{o(sZ.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:t}))},{version:S}=(0,eW.DP)(),b=!!n.styleId||a.length>0,f=e.pickerShown?.id===t,v=!e.userFlags.dismissed_shift_to_draw_straight_lines_hint,w=l.createElement(s0.v9,{strokeWeight:n.strokeWeight||s5.wv,onChange:y,recordingKey:h.Pt(e,"weight")}),T=l.createElement(s1.qR,{className:"ui3"===S?void 0:"pencil_tool_panel--dashCap--OD1E2",dashCap:(0,s1.Hd)(n.strokeCap||"ROUND")||"ROUND",onChange:e=>{i({strokeCap:e})},recordingKey:h.Pt(e,"dashCap")}),I=(0,u.kc)().ce_tv_fpl_dialog_trigger_button?l.createElement("span",{className:s4},l.createElement(nQ.d,{onClick:E,toggled:f,"aria-label":(0,x.t)("fullscreen.pencil_tool.advanced_stroke_settings"),recordingKey:h.Pt(e,"more"),htmlAttributes:{onMouseDown:d,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.pencil_tool.advanced_stroke_settings")}},l.createElement(ez.U,{svg:s3.A,fallbackSvg:s6.A},l.createElement(aU.J,null)))):l.createElement(e3.YW,{svg:s3.A,fallbackSvg:s6.A,className:s4,onClick:E,onMouseDown:d,selected:f,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.pencil_tool.advanced_stroke_settings"),recordingKey:h.Pt(e,"more")});return l.createElement("div",{className:"pencil_tool_panel--pencilPanelContainer--O-fFF"},l.createElement(e3.Zk,null,l.createElement(l8.W4,{title:(0,x.t)("fullscreen.pencil_tool.stroke"),propertyList:a,onChange:_,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:s.rrT.STROKE_PRESET,styleType:"FILL",addProperty:()=>{Q.Y5.triggerAction("add-stroke-to-selection")},onDeleteProperty:e=>g(e),onReorder:()=>{$.Tm.clearCache()},renderProperty:(t,n,r,i,c,d,u,m,E)=>{let _=p()?"preview-paint":"paint",y=$.Tm.getId(n,s.rrT.STROKE_PRESET,_),b=a.slice(0,n).some(e=>e.visible);return l.createElement(l8.Gg,{key:`paint-${n}`,id:y,index:n,inheritStyleKeyField:"inheritFillStyleKeyForStroke",singletonRow:1===a.length,selectedPropertyType:s.rrT.STROKE_PRESET,paint:t,selected:e.stylePickerShown.isShown?e.pickerShown?.id===y:r,isDragging:i,hasFocus:c,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,onChange:d,onApplyStyle:P,onMouseDown:u,onMouseMove:m,onMouseUp:E,onRemovePaint:a.length>1?()=>g(new Set([n])):void 0,hideVisibilityToggle:1===a.length,currentSelectedGradientStop:e.currentSelectedGradientStop,currentTool:s.NLJ.VECTOR_PENCIL,colorFormat:e.colorFormat,dispatch:o,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,editModeType:e.editModeType,defaultColor:$.Em,library:e.library,openFile:e.openFile,recordingKey:h.Pt(e,n),variableScopes:new Set([s.j0r.STROKE]),isUI3:"ui3"===S,hasVisiblePaintBelow:b})},recordingKey:e.recordingKey,sceneGraphSelection:e.sceneGraphSelection,library:e.library,modalShown:e.modalShown,openFile:e.openFile,inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:n.styleId||null,inheritStyleID:null,selectedStyleProperties:e.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,stylePickerShown:e.stylePickerShown,onToggleListLayout:()=>{o(K.Y({isListLayout:!e.stylePickerListLayout}))},removeAllProperties:null,onApplyStyle:P,defaultColor:$.rC}),b&&("ui3"===S?l.createElement(el.fn,{ref:m,leftLabel:(0,x.tx)("fullscreen.properties_panel.section_stroke.label_weight"),leftInput:w,rightLabel:(0,x.tx)("fullscreen.properties_panel.section_stroke.label_end_cap"),rightInput:T,icon:I}):l.createElement(e3.fI,{ref:m},w,T,I))),v&&l.createElement("div",{className:"pencil_tool_panel--hintPanel--917wK"},l.createElement(sq.u,{title:(0,x.t)("fullscreen.pencil_tool.hold_shift_to_draw_straight_lines"),icon_DEPRECATED:s2.A,userFlag:"dismissed_shift_to_draw_straight_lines_hint",hintText:(0,x.t)("fullscreen.pencil_tool.now_vertical_horizontal_and_diagonal_lines_are_a_breeze")})),f&&e.pickerShown&&l.createElement(s1._2,{onChange:y,strokePanelMode:s.yTM.PENCIL,strokePanelTerminalPointCount:2,strokeCap:n.strokeCap||"ROUND",strokeJoin:"ROUND",maxStrokeWeight:n.strokeWeight||s5.wv,dashPattern:n.dashPattern,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,recordingKey:h.Pt(e,"advanced")}))}function s8(e){let t=(0,b.Ku)(),n=(0,ij.R)(e=>({currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,library:e.library,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,colorPicker:e.colorPicker,styleSets:e.styleSets,openFileKey:e.openFile?.key||null,reposById:e.repos,teams:e.teams,editModeType:e.mirror.appModel.activeCanvasEditModeType,currentTool:e.mirror.appModel.currentTool,sceneGraphSelection:e.mirror.sceneGraphSelection,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,inheritStyleKey:e.mirror.selectionProperties.inheritFillStyleKeyForStroke||null,selectedStyleProperties:e.mirror.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,userFlags:e.userFlags}));return l.createElement(s7,{...n,...e,colorFormat:t})}var s9=n(438377),oe=n(270296),ot=n(976404),on=n(818),ol=n(516398),or=n(10199),oi=n(946689),oa=n(927990),os=n(984031),oo=n(144119),oc=n(125944),op=n(641160);function od({initialPosition:e,styleNameInputPrefix:t,styleType:n,inheritStyleKeyField:i,onCreate:a,recordingKey:o}){let c=(0,r.wA)(),p=(0,r.d4)(e=>e.mirror.selectedStyleProperties),d=(0,r.d4)(e=>e.mirror.sceneGraphSelection),u=l.useRef(Object.keys(d).length>0),[m,E]=l.useState(!u.current&&void 0),_="ui3"===(0,eW.DP)().version,y=(0,oo.sO)(),[P,S]=l.useState((0,iY.$)()),b=y&&(0,oc.Rc)(n),{styleRef:f,createStyle:v}=(0,oa.u)({inheritStyleKeyField:i,isCreatingFromSelection:u.current,trackingOptions:{styleType:n}}),w=h.of(o,"submit",()=>{let e=v();b&&s.Ez5.slideThemeLibBindings().addStyleToLocalTheme(e||"",P),c(K.XE()),c(K.Uv()),c(g.sw()),a&&a(e||"")}),T=(0,r.d4)(e=>{let t=e.mirror.selectedStyleProperties;switch(n){case"FILL":return t.fillPaints&&"length"in t.fillPaints&&t.fillPaints.length>0;case"GRID":return t.layoutGrids&&t.layoutGrids.length>0;case"EFFECT":return t.effects&&t.effects.length>0;default:return!0}});return p.styleType?l.createElement(k.zK.Provider,{value:k.zM.CREATE_STYLE},l.createElement(eN.vx,{title:(e=>{switch(e){case"FILL":return(0,x.t)("design_systems.create_style.color");case"TEXT":return(0,x.t)("design_systems.create_style.text");case"EFFECT":return(0,x.t)("design_systems.create_style.effect");case"EXPORT":return(0,x.t)("design_systems.create_style.export");case"GRID":return(0,x.t)("design_systems.create_style.grid");default:return(0,x.t)("design_systems.create_style.create_new_style_generic")}})(p.styleType),headerSize:"small",initialWidth:N.tA,initialPosition:e,onClose:()=>{c(g.sw())},recordingKey:h.Pt("createStyleModal"),dragHeaderOnly:!0},l.createElement("div",{className:op.FY},l.createElement(os.O8,{type:p.styleType,recordingKey:"createStyleModal",styleNameInputPrefix:t,isInspectPanel:!1,selectedStyleProperties:p,showProperties:m,onEnterPressed:w,showSlideThemeField:b,slideThemeId:P,setSlideThemeId:S}),!f&&l.createElement("div",{className:"create_style_modal--errorMessage--8ZpFE"},(0,x.tx)("design_systems.create_style.an_error_occurred_while_creating_the_style")),l.createElement(or.AutoLayout,{horizontalAlignItems:u.current?void 0:"end",verticalAlignItems:"center",spacing:u.current?"auto":void 0,padding:_?8:16},u.current&&l.createElement(e3.JU,{className:m?"create_style_modal--fadedShowMorePropertiesLabel--g8ydZ":"create_style_modal--showMorePropertiesLabel--mJpGe",onClick:()=>E(!m)},m?(0,x.tx)("design_systems.create_style.hide_options"):(0,x.tx)("design_systems.create_style.show_more_options")),l.createElement(oi.$$,{style:{justifySelf:"right"},onClick:w,disabled:!T||!f,tabIndex:0},(0,x.tx)("design_systems.create_style.create_style")))))):null}var ou=n(663668);function om(e){let t=(0,r.wA)(),n=(0,o.dI)(e.selectedStyleProperties.guid),i="",a="",[s,c]=(0,eo.Fk)((t,n)=>{if(e.externalStyle)return["",""];let l=t.get(n);return[l?.name||"",l?.styleDescription||""]},n);return e.externalStyle?(i=e.externalStyle.name||"",a=e.externalStyle.description_rt?(0,ou.A)(e.externalStyle.description_rt):e.externalStyle.description||""):(0,o.dI)(e.selectedStyleProperties.guid)&&(i=s,a=(0,ou.A)(c)),l.createElement(k.zK.Provider,{value:k.zM.EDIT_STYLE},l.createElement(os.O8,{type:e.selectedStyleProperties.styleType,recordingKey:e.recordingKey,onEnterPressed:()=>t(g.sw()),styleName:i,styleDescription:a,...e}))}var oh=n(595755),oE=n(511617),o_=n(154483),oy=n(733169),og=n(132135),oP=n(321487),oS=n(216158);let ob=(0,o_.fv)();function of(e){let t=(0,tq.IW)(e.stylePreviewShown),n=ob(t),r=oS.M4.File.useValue(n).data,i=(0,oy.S)(r?.key).unwrapOr(!1);if(!t||!r)return null;let a=(0,og.to)(r);return a=(0,oE.dR)(a,{"node-id":encodeURIComponent((0,oP.E)(t.node_id))}),l.createElement(tz.p,{name:"external_style_options"},l.createElement(e3.Zk,{key:"external-style-options"},i&&l.createElement(e3.fI,null,l.createElement(oi.N_,{className:op.lf,href:a,target:"_blank",trusted:!0},(0,x.tx)("fullscreen.properties_panel.go_to_style_definition_to_edit")))))}function ov(e){let t=e.target;if(t){let n=t.tagName,l=t.type;n&&"INPUT"===n.toUpperCase()&&l&&"TEXT"===l.toUpperCase()||t.isContentEditable||e.preventDefault()}}function ow({children:e,showRightSidebarPill:t}){let n=l.useRef(null);(0,ol.C_)(n);let r=(0,ot.U1)(n),i=(0,on.b)();return l.createElement("div",{ref:r,className:p()(op.KE,{[op.tM]:t,[op.Ph]:i})},e)}function oT(e){if(!e.stylePreviewShown.isShown||![s.FAf.DESIGN,s.FAf.SITE,s.FAf.INSPECT].includes(e.propertiesPanelTab))return null;let t=e.selectedStyleProperties,n=new eI.Mi(e.stylePreviewShown.rowLeft-N.tA,e.stylePreviewShown.rowTop);if(e.stylePreviewShown.isCreating){let{styleType:t,inheritStyleKeyField:r,styleNameInputPrefix:i}=e.stylePreviewShown;return l.createElement(od,{recordingKey:"createStyleModal",initialPosition:n,styleNameInputPrefix:i,styleType:t,inheritStyleKeyField:r})}{let r=!(0,nu.eE)(e.stylePreviewShown.style,e.openFile),i=r||!e.openFile?.canEdit||e.appModel.topLevelMode===s.lyf.BRANCHING,a=(0,o.dI)(t.guid);return(a&&e.library.local.styles[a]&&!e.library.local.styles[a].is_soft_deleted||r)&&e.selectedStyleProperties.guid?l.createElement(k.zK.Provider,{value:k.zM.EDIT_STYLE},l.createElement(eN.vx,{title:function(e,t){if(t)switch(e){case"FILL":return(0,x.t)("design_systems.styles.view_color_style");case"TEXT":return(0,x.t)("design_systems.styles.view_text_style");case"EFFECT":return(0,x.t)("design_systems.styles.view_effect_style");case"GRID":return(0,x.t)("design_systems.styles.view_grid_style");default:return(0,x.t)("design_systems.styles.view_style")}else switch(e){case"FILL":return(0,x.t)("design_systems.styles.edit_color_style");case"TEXT":return(0,x.t)("design_systems.styles.edit_text_style");case"EFFECT":return(0,x.t)("design_systems.styles.edit_effect_style");case"GRID":return(0,x.t)("design_systems.styles.edit_grid_style");default:return(0,x.t)("design_systems.styles.edit_style")}}(t.styleType,i),key:(0,tq.Gj)(e.stylePreviewShown.style),headerSize:"small",initialWidth:N.tA,initialPosition:n,onClose:e.onCloseStylePreviewModal,recordingKey:e.recordingKey,dragHeaderOnly:!0},l.createElement("div",{className:op.FY},l.createElement(eV.VF,{isVisible:!0},()=>l.createElement(oI,{selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,propertiesPanelTab:e.propertiesPanelTab,appModel:e.appModel,stylePreviewShown:e.stylePreviewShown,library:e.library,dispatch:e.dispatch,recordingKey:e.thumbnailRecordingKey})),l.createElement(eV.VF,{isVisible:r},()=>l.createElement(of,{stylePreviewShown:e.stylePreviewShown,user:e.user}))))):null}}function oI(e){let t=(0,tq.IW)(e.stylePreviewShown),n=e.openFile?.canEdit,r=!!t||!n||e.appModel.isReadOnly;return l.createElement(om,{key:"style-preview-panel",selectedStyleProperties:e.selectedStyleProperties,isInspectPanel:e.propertiesPanelTab===s.FAf.INSPECT,stylePreviewShown:e.stylePreviewShown,externalStyle:t,isRenaming:e.library.isRenamingSelectedStyle,viewOnly:r,recordingKey:e.recordingKey})}function ok(e){return l.createElement(T.vL,{name:"propertiesPanel",focusOnMount:!0,handleKeyDown:e.onKeyDown},l.createElement(_.V,{className:p()(op.Lp,{[op.Ph]:e.isInsetEditorEnabled})},l.createElement(R.P,{ref:e.refMainScrollContainer,className:p()(op.ux,op.KE,S.Dm,{[op.eu]:e.shouldAnimate,[op.Ph]:e.isInsetEditorEnabled}),width:oe.iP,hideScrollbar:!0,scrollingDisabled:!0},l.createElement("div",{className:op.eh,"data-non-interactive":!0},l.createElement(oh.B7,null))),e.stylePreviewShown.isShown&&e.stylePreviewModal))}var oN=n(101505),oC=n(843495),oA=n(94500),oO=n(178248),oM=n(205135),oR=n(994481);class oL extends h.o6{render(){return l.createElement(e3.Zk,null,l.createElement(e3.fI,null,l.createElement(e3.xw,null,(0,x.tx)("proto.menu.background"))),l.createElement(ox,{...this.props}))}}function ox(e){let t=l.useRef(null),n=l.useRef(null),r=(0,tj.GS)(),{dispatch:i,pickerShown:a,prototypeBackgroundColor:s}=e,o=l.useCallback(()=>{let e=r?eH.findDOMNode(n.current):eH.findDOMNode(t.current);if(a&&a.id===S.$T)i(K.XE());else if(e&&e instanceof HTMLElement){let t=(0,eZ.cn)(e);i(K.u1({id:S.$T,initialX:t.x,initialY:t.y}))}},[i,a,r]),c=l.useCallback((e,t)=>{i((0,oA._P)({name:"Prototype Background Modified"})),Q.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[i]),p=(0,z._W)(s,{r:0,g:0,b:0,a:1}),d=l.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},l.createElement(l5.J,{onClick:o,color:p,opacity:p.a,recordingKey:h.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),l.createElement(oM.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:l1.TI,property:p,onChange:c,recordingKey:h.Pt(e,"colorInput"),noBorderOnFocus:!0}));return l.createElement(l.Fragment,null,r?l.createElement(oR.TN,{ref:n},d):l.createElement(e3.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},d),a&&a.id===S.$T&&l.createElement(ap.sk,{disabledVariableIds:new Set,title:(0,x.t)("proto.menu.background"),initialPosition:new eI.Mi(a.initialX??0,a.initialY??0),color:p,boundVariable:null,onChange:c,recordingKey:h.Pt(e,"colorPicker")}))}oL.displayName="PrototypeBackgroundPanel";var oD=n(992271),oF=n(410465),oV=n(371435),oK=n(761725);let oU="prototype_device_panel--deviceSelect--wnOgI",oH="prototype_device_panel--deviceDropdown--ufbuZ",oB="prototype_device_panel--deviceOption--rvW-q",oG="prototype_device_panel--inactiveLabel--UEKyk prototype_device_panel--activeLabel--l162n",oY="prototype_device_panel--labelInactive--pv4Sf",oW="prototype_device_panel--deviceDropdownChevron--kq9TV",oQ="prototype_device_panel--deviceDropdownInput--AxG9E";var oz=n(537545),o$=n(64111);class oX extends oF.I{}class oj extends oF.Y{}class oJ extends l.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>oD.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return oD.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=oD.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;Q.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let r=l.createElement(o3,{dispatch:this.props.dispatch,presetIdentifier:this.deviceInfo().presetIdentifier,dropdownShown:this.props.dropdownShown,onChange:this.onModelChange,recordingKey:h.Pt(this.props,"modelDropdown")}),i=t?l.createElement(oR.dx,{left:r,right:n}):l.createElement(oR.TN,null,r);return l.createElement("div",null,!this.props.isUI3&&l.createElement(e3.hl,null,l.createElement(e3.UZ,{className:oY},(0,x.tx)("presets.device_panel.model"))),this.props.isUI3?i:l.createElement(e3.fI,null,r))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,z._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=l1.z5.format(t),r=t.r>.9&&t.g>.9&&t.b>.9,i=`1px solid ${r?"#EFEFEF":"transparent"}`,a=l.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:i}},l.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return l.createElement("div",null,!this.props.isUI3&&l.createElement(e3.hl,null,l.createElement(e3.UZ,{className:oY},(0,x.tx)("presets.device_panel.preview"))),this.props.isUI3?l.createElement(oR.TN,{appendedClassName:oK.Rk},a):l.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},a))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,l=t.rotation;l=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",Q.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:l}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=l.createElement(o1,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,dropdownShown:this.props.dropdownShown,recordingKey:h.Pt(this.props,"deviceDropdown")}),n=l.createElement(oX,{property:this.currentDeviceOrientation(),onChange:this.onChangeOrientation,recordingKey:h.Pt(this.props,"orientationControl"),className:"prototype_device_panel--orientationControl--YdZ-v"},l.createElement(oj,{value:"PORTRAIT",svg:o$.A}),l.createElement(oj,{value:"LANDSCAPE",svg:oz.A})),r=(0,oD.$X)(e.type||"NONE",e.presetIdentifier),i=l.createElement(e3.fI,null,t,r&&n),a=this.deviceInfo()&&this.shouldShowModelDropdown(),s=r&&!a?l.createElement(oR.dx,{left:t,right:n}):l.createElement(oR.TN,null,t),o=l.createElement(oZ,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:h.Pt(this.props,"deviceSizeInputs")});return l.createElement(e3.Zk,null,l.createElement(e3.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},l.createElement(e3.xw,{extended:this.props.isUI3},this.props.isUI3?(0,x.tx)("presets.device_panel.prototype_settings"):(0,x.tx)("presets.device_panel.device"))),this.props.isUI3?s:i,this.renderModelDropdown(!!a,r,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&o,this.props.isUI3&&l.createElement(ox,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:h.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&o)}}function oZ(e){let t=l.useCallback(t=>{Q.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=l.useCallback(t=>{Q.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),r=l.createElement(ln.$j,{className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.x,onValueChange:t,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("presets.device_panel.device_width_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:h.Pt(e,"deviceWidth")},l.createElement("span",{className:oG},(0,x.tx)("proto.device_panel.width"))),i=l.createElement(ln.$j,{className:"prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.y,onValueChange:n,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("presets.device_panel.device_height_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:h.Pt(e,"deviceHeight")},l.createElement("span",{className:oG},(0,x.tx)("proto.device_panel.height")));return(0,tj.GS)()?l.createElement(oR.dx,{left:r,right:i}):l.createElement(e3.fI,null,r,i)}oJ.displayName="PrototypeDevicePanel";class oq extends ls.l6{}class o0 extends ls.c${}class o1 extends h.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,x.t)("proto.frame_preset_panel.no_device"):(0,x.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,x.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,x.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,oA.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,oA._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:ah.zl.get(oV.h).modalStatus===oV.b.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,oD.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let r=n.framePresetSize;return l.createElement(o0,{value:n,key:t,recordingKey:h.Pt(this.props,n.deviceName)},l.createElement("div",{className:oB},l.createElement("span",null,n.getI18nDeviceName()),l.createElement("span",null,r.x,"\u200A\xd7\u200A",r.y)," "))}}render(){let e;return e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":oD.hY[this.props.prototypeDevice.presetIdentifier]||"NONE",l.createElement(oq,{className:oU,chevronClassName:oW,inputClassName:oQ,id:"prototype-device-select",property:e,formatter:this.formatter,onChange:this.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:oH,recordingKey:h.Pt(this.props,"select")},l.createElement(o0,{value:"NONE",recordingKey:h.Pt(this.props,"NONE")}),l.createElement(ls.sK,null),oD.r6.map(this.renderPresetOption),l.createElement(ls.sK,null),oD.J_.map(this.renderPresetOption),l.createElement(ls.sK,null),oD.AG.map(this.renderPresetOption),l.createElement(ls.sK,null),oD.$w.map(this.renderPresetOption),l.createElement(ls.sK,null),l.createElement(o0,{value:"CUSTOM",recordingKey:h.Pt(this.props,"CUSTOM")},l.createElement("div",{className:oB},l.createElement("span",null,(0,x.tx)("proto.frame_preset_panel.custom_size")),l.createElement("span",null,(0,x.tx)("proto.frame_preset_panel.fit")))),l.createElement(o0,{value:"PRESENTATION",recordingKey:h.Pt(this.props,"PRESENTATION")},l.createElement("div",{className:oB},l.createElement("span",null,(0,x.tx)("proto.frame_preset_panel.presentation")),l.createElement("span",null,(0,x.tx)("proto.frame_preset_panel.fill")))),l.createElement(ls.sK,null),oD.dr.map(this.renderPresetOption))}}o1.displayName="DeviceDropdown";class o5 extends ls.l6{}class o4 extends ls.c${}class o3 extends h.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=oD.hY[e];return t?t.getI18nStyleName():(0,x.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return l.createElement(o4,{value:n,key:t,recordingKey:h.Pt(this.props,n)},oD.hY[n].getI18nStyleName())}}render(){let e=oD.hY[this.props.presetIdentifier];if(!e)return null;let t=oD.yr[e.deviceName],n=this.props.presetIdentifier;return l.createElement(o5,{className:oU,chevronClassName:oW,inputClassName:oQ,id:"prototype-style-select",property:n,formatter:this.formatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:oH,recordingKey:h.Pt(this.props,"select")},t.map(this.renderStyleOption))}}o3.displayName="ModelDropdown";var o6=n(939683),o2=n(529004),o7=n(348425),o8=n(634238),o9=n(497306),ce=n(113468),ct=n(248752);function cn(e){return e??"Default"}let cl=l.createContext({getNodeName:cn}),cr=l.memo(function({getNodeName:e=cn,children:t}){let n=l.useMemo(()=>({getNodeName:e}),[e]);return l.createElement(cl.Provider,{value:n},t)});var ci=n(73349),ca=n(38340),cs=n(908946),co=n(987850),cc=n(239737),cp=n(222478),cd=n(709731),cu=n(30075),cm=n(384775),ch=n(119081),cE=n(351631);function c_(){let e=(0,r.wA)(),t=(0,r.d4)(e=>(0,v.Yh)(e.mirror.appModel,cp.JT.MAGIC_LINK)),n=(0,cc.vh)(),{withinMeter:i}=(0,co.X)(cp.JT.MAGIC_LINK);return n&&i?l.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},l.createElement(e2.K,{recordingKey:h.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,x.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),onClick:()=>{(0,cm.$I)({moduleToOpen:{type:"custom",module:l.createElement(ch.p,null),name:cu.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,oA.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,cd.B3)(cp.JT.MAGIC_LINK),t&&(0,cd.Ag)(cp.JT.MAGIC_LINK,cE.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip-show-above":!0}},l.createElement(cs.B,null))):null}var cy=n(422237);let cg=(0,cy.ex)("prototype_info",function(e){let{tooltipText:t}=e;return l.createElement("div",{className:Z.cx.flex.justifyCenter.itemsCenter.$},l.createElement("span",{className:Z.cx.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var cP=n(764257),cS=n(333483),cb=n(146935);let cf="prototype_interaction_list--warningIcon--Mgr5O";var cv=n(612325);let cw=new n9.JV,cT=new n9.Eq,cI=new n9.sX,ck=l.memo(function({inSites:e}){let t=(0,r.wA)(),n=(0,r.d4)(cA),i=(0,r.d4)(cO),a=(0,r.d4)(cF),c=(0,r.d4)(cR),p=(0,r.d4)(cL),u=(0,r.d4)(cx),m=(0,ca.a2)(),h=(0,ca.R)(),E=(0,r.d4)(cV),_=(0,r.d4)(cM),y=Object.keys(u).length>1,g=cK(),P=function(){let e=cK(),t=(0,r.d4)(cD);return!!e&&!!t&&t.selectionOverrides[s.YnC.PROTOTYPE_INTERACTIONS]}(),b=(0,tZ.q5)(),f=(0,o6.U)(),v=l.useMemo(()=>new n9.cP(p),[p]),w=l.useCallback(e=>v.format(e),[v]),T=l.useRef(null),I=e=>{Q.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:rF.zk.NO_BUT_TRACK_AS_EDIT}),Q.Y5.commit()},k=(0,oO.Zj)(Object.keys(u),p),N=l.createElement(cN,{interactionGroups:m,inheritedInternalInteractionGroups:h,mixed:y,isOrInInstance:g,openFile:b,dispatch:t,currentSelectedProperty:c,onChange:(e,t)=>{let l=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),r=new Set,a=[];for(let e of l){let t=o.dI(e.id);if(t&&!r.has(t))a.push(e);else{if(!(t=s.glU.generateUniqueID()))continue;let n=o.sH(t);if(!n)continue;a.push({...e,id:n})}t&&r.add(t)}t===ce.J.NORMAL?a=[...a,...i]:t===ce.J.INHERITED_INTERNAL&&(a=[...n,...a]),I(a)},onAddProperty:e=>{e.stopPropagation();let t=[],l=[];for(let e of Object.keys(u)){let n=s.glU.generateUniqueID();if(!n)return;let r=o.sH(n);if(!r)return;let i={id:r,sourceNodeID:o.sH(e)??o.Hr,event:{interactionType:function(e){let t=new Set;for(let{event:n}of e)t.add(n.interactionType);for(let e of cU)if(!t.has(e))return e;return"ON_KEY_DOWN"}(m)}};i.stateManagementVersion=1,i.actions=[{connectionType:"NONE"}],t.push(i);let a=(0,o9.kh)(p,e);l.push(a?a.guid:"")}let r=t.map(e=>o2.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(r.length>0){s.glU.setSelectedInteractions(r);let e=eH.findDOMNode(T.current),t=(0,eZ.cn)(e);cW(new eI.Mi(t.x,t.y+(0,d.jz)(cb.rightNavGridRowHeight)))}let a=[...n,...t,...i];f("prototype_interaction_added",{interactionCount:a.length,sourceTlfIds:JSON.stringify(l)}),I(a)},onDeleteProperty:(e,t)=>{let n=(t===ce.J.NORMAL?m:h).filter((t,n)=>e.has(n)),l=[];for(let e of n)l.push(...e.interactions);let r=cY(l);es.l7.user("delete-prototype-interactions",()=>s.glU.deleteInteractions(r)),Q.Y5.deselectProperty()},shouldIgnoreKeyboardEvents:a.length>0||c.type!==s.rrT.PROTOTYPE_INTERACTION&&c.type!==s.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,isValidPrototypingSourceSelected:E,showResetInteractionsButton:P,toggleScrollBehaviorPicker:()=>{if(_?.id===S.AO)t(K.XE());else{let e=eH.findDOMNode(T.current),n=(0,eZ.cn)(e);t(K.u1({id:S.AO,initialX:n.x,initialY:n.y}))}},headerAccessory:k&&l.createElement(c_,null),inSites:e});return l.createElement(cr,{getNodeName:w},e?N:l.createElement(e3.Zk,{"data-onboarding-key":"prototypePanel",ref:T,"data-testid":"prototype-interaction-list"},N))});function cN(e){let t=l.useRef(!1);return l.createElement(l.Fragment,null,l.createElement(ct.h6,{title:e.inSites?"":(0,x.t)("proto.title_interactions"),stylePickerShown:{isShown:!1},addProperty:e.onAddProperty,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,hideAddButton:!e.isValidPrototypingSourceSelected,renderProperty:(n,r,i,a,s,o,c,p,d)=>e.inSites&&(0,cP.p4)(n.interactions)?l.createElement(l.Fragment,{key:r}):l.createElement(cC,{interactionGroups:e.interactionGroups,interactionGroup:n,index:r,selected:i,hasFocus:s,isDragging:a,singletonRow:e.interactionGroups.length<=1,onMouseDown:c,onMouseMove:p,onMouseUp:d,dispatch:e.dispatch,category:ce.J.NORMAL,autoOpenVariablePicker:t,recordingKey:h.Pt("prototypeInteractionList",r),key:r,inSites:e.inSites}),openFile:e.openFile,onChange:t=>e.onChange(t,ce.J.NORMAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:s.rrT.PROTOTYPE_INTERACTION,propertyList:e.interactionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,ce.J.NORMAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:"prototypeInteractionList",boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,showResetInteractionsButton:e.showResetInteractionsButton,onResetInteractions:es.nc.user("reset-instance-interactions",()=>s.glU.resetSymbolOverrides(s.YnC.PROTOTYPE_INTERACTIONS)),headerAccessory:e.headerAccessory}),e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0&&l.createElement(e3.fI,null,l.createElement(e3.UZ,{className:"prototype_interaction_list--label--dGwgy"},(0,x.tx)("proto.interaction_list.variant_interactions"))),e.isOrInInstance&&l.createElement(ct.h6,{title:"",stylePickerShown:{isShown:!1},addProperty:l7.lQ,hideAddButton:!0,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,renderProperty:(n,r,i,a,s,o,c,p,d)=>l.createElement(cC,{interactionGroups:e.inheritedInternalInteractionGroups,interactionGroup:n,key:r,index:r,selected:i,hasFocus:s,isDragging:a,singletonRow:e.inheritedInternalInteractionGroups.length<=1,onMouseDown:c,onMouseMove:p,onMouseUp:d,dispatch:e.dispatch,category:ce.J.INHERITED_INTERNAL,autoOpenVariablePicker:t,recordingKey:h.Pt("prototypeInheritedInternalInteractionList",r)}),openFile:e.openFile,onChange:t=>e.onChange(t,ce.J.INHERITED_INTERNAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:s.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,propertyList:e.inheritedInternalInteractionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,ce.J.INHERITED_INTERNAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:h.Pt("prototypeInheritedInternalInteractionList")}))}function cC({interactionGroups:e,interactionGroup:t,index:n,hasFocus:i,isDragging:a,selected:c,singletonRow:d,onMouseDown:m,onMouseMove:E,onMouseUp:_,dispatch:y,category:g,recordingKey:P,inSites:b}){let f=(0,tj.GS)(),{getNodeName:v}=l.useContext(cl),w=(0,r.d4)(cF),T=(0,ca.a2)(),I=(0,r.d4)(cM),k=I?.id===S.o$?I:null,N=(0,r.d4)(cL),[C,A]=l.useState(!1),O=(0,ah.md)(o8.NE)?cT:cw,M=function(e,t){let n=new Set(t.map(e=>{let t=o2.s(e);return t?o.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=o.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,w),R=l.useRef(null),L=l.useRef(null),D=l.useCallback(()=>{let e=f&&b?L.current:eH.findDOMNode(R.current);cW((0,eZ.cn)(e))},[b,f]),F=l.useCallback(()=>{s.glU.setSelectedInteractions([]),y(K.XE()),Q.Y5.deselectProperty()},[y]),V=n=>{if(!R||!L)return;let l=cG(t);if(n.metaKey||n.ctrlKey)M?l=w.filter(e=>!l.includes(e)):l.push(...w);else if(n.shiftKey){var r;let n,i;let a=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===a)return;let s=function(e,t){let n=1/0,l=e;for(let r of t){let t=Math.abs(e-r);t<n&&(l=r,n=t)}return l}(a,function(e,t){let n=new Set,l=new Set(t);for(let t=0;t<e.length;t++)cG(e[t]).some(e=>l.has(e))&&n.add(t);return n}(e,w)),o=(n=a,i=s,a>s&&(n=s,i=a),e.slice(n,i+1));for(let e of(l=[...w],o))l.push(...cG(e))}s.glU.setSelectedInteractions(l),Q.Y5.updateAppModel({currentSelectedProperty:{type:g===ce.J.NORMAL?s.rrT.PROTOTYPE_INTERACTION:s.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),l.length?k&&k.shouldPin?b&&(l.length>1||l.includes(w[0]))&&F():D():F()},U=!1,H=null,B=null;for(let e of t.interactions)if(!H&&e.actions&&e.actions.length>0)H=e.actions[0],B=e;else if(cB(H,v,f)!=cB((e.actions??[])[0],v,f)){U=!0;break}let G=()=>{let e=cY(t.interactions);s.glU.hoverInteractions(e),A(!0)},Y=()=>{s.glU.hoverInteractions([]),A(!1)},W=e=>{e.stopPropagation()},z=e=>{e.stopPropagation();let n=cY(t.interactions);es.l7.user("delete-prototype-interactions",()=>s.glU.deleteInteractions(n)),Q.Y5.deselectProperty(),Q.Y5.commit()},$=!1,X=!1;if(g===ce.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=N.get(o.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{$=!0;break}}}let l=s.glU.getContainingStateGroupOrSelf(o.dI(e.sourceNodeID??o.Hr))||"";if(""===l||""!==n&&l!==n){$=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),l=e.some(e=>"ON_HOVER"===e.event.interactionType);X=n&&l}$=g!==ce.J.INHERITED_INTERNAL&&$;let j=function(e,t,n){if(e!==ce.J.INHERITED_INTERNAL)return null;let l=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,l=void 0!==t.actions&&t.actions.length>=1;if(!n||!l)return!1;let r=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),i=e.actions.every(e=>o.fn(e.transitionNodeID));var a=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){a=!0;break}return r&&i&&a}(e.interactions[0],t.interactions[0]));return l?.interactions[0]??null}(g,t,e),J=(0,tG.ZC)(j),Z=(0,o6.U)();l.useEffect(()=>{null===J&&j&&Z("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:j.event?.interactionType})});let q=g===ce.J.INHERITED_INTERNAL&&T.some(e=>e.key===t.key)&&!j,ee=c&&i,et=M&&!c,en=new n9.js,er=(0,n9.mj)(H),ei=B?.actions?.length??0,ea=(0,u.kc)().sts_interaction_interop&&ei>1?(0,x.t)("sites.panel.interaction_summary",{numActions:ei}):U||!H||"NONE"===er?void 0:en.format(er),eo=l.createElement(el.Y9,{ref:L,"data-testid":`prototypeInteractionItem-${n}`,singletonRow:d,dragging:a,onMouseDown:m,onMouseMove:E,onMouseUp:_,onMouseEnter:G,onMouseLeave:Y,recordingKey:h.Pt(P,"draggableRow"),onClick:(0,u.kc)().sts_interaction_interop?V:l7.lQ},l.createElement(el.s2,{label:null,leftIcon:l.createElement(e3.YW,{onClick:(0,u.kc)().sts_interaction_interop?l7.lQ:V,selected:et&&!!k,recordingKey:h.Pt(P,"interactionIcon"),onMouseDown:W,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":cH(t.event,O,!!b),className:C&&(0,u.kc)().sts_interaction_interop?cS.zY:void 0},(0,le.e7)(t.event.interactionType)),input:l.createElement(e9.D8,{onClick:(0,u.kc)().sts_interaction_interop?l7.lQ:V,onMouseDown:W,recordingKey:h.Pt(P,"interactionText")},cH(t.event,O,!!b),ea&&l.createElement("span",{className:"prototype_interaction_list--summaryText--hGpp4"},"\xa0\xb7\xa0",ea)),rightIcon:l.createElement("div",{hidden:(0,u.kc)().sts_interaction_interop&&!C},l.createElement(e2.K,{onClick:z,"aria-label":(0,x.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:h.Pt(P,"removeButton"),htmlAttributes:{onMouseDown:W}},l.createElement(ez.U,{svg:sz.A,fallbackSvg:s$.A},l.createElement(sQ.O,null))))}));return b?eo:l.createElement("div",null,l.createElement(t3.e,{ref:R,className:f?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,selected:ee,selectedSecondary:et,singletonRow:d,dragging:a,onMouseDown:m,onMouseMove:E,onMouseUp:_,onMouseEnter:G,onMouseLeave:Y,recordingKey:h.Pt(P,"draggableRow")},l.createElement(e9.D8,{className:p()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":ee,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":et}),onClick:V,onMouseDown:W,recordingKey:P},$?l.createElement(te.B,{className:cf,svg:cv.A,"data-tooltip-type":eJ.Ib.SPECIAL,"data-tooltip":cg,"data-tooltip-text":(0,x.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip")}):X?l.createElement(te.B,{className:cf,svg:cv.A,"data-tooltip-type":eJ.Ib.SPECIAL,"data-tooltip":cg,"data-tooltip-text":(0,x.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip")}):q&&l.createElement(te.B,{className:cf,svg:cv.A,"data-tooltip-type":eJ.Ib.SPECIAL,"data-tooltip":cg,"data-tooltip-text":(0,x.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip")}),l.createElement("div",{className:X||$||q?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},cH(t.event,O,!!b)),l.createElement(o7.t,{className:"prototype_interaction_list--actionIcon--x-haP",svg:U?(0,le.Yb)("NONE"):(0,le.Yb)((0,n9.mj)(H))}),l.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},U?(0,x.t)("proto.variant_actions.mixed"):g===ce.J.INHERITED_INTERNAL?(0,x.t)("proto.variant_actions.change_to"):cB(H,v,f))),l.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},l.createElement(e2.K,{onClick:z,"aria-label":(0,x.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:h.Pt(P,"removeButton"),htmlAttributes:{onMouseDown:W}},l.createElement(ez.U,{svg:sz.A,fallbackSvg:s$.A},l.createElement(sQ.O,null))))))}function cA(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function cO(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function cM(e){return e.pickerShown}function cR(e){return e.mirror.appModel.currentSelectedProperty}function cL(e){return e.mirror.sceneGraph}function cx(e){return e.mirror.sceneGraphSelection}function cD(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function cF(e){return e.mirror.appModel.selectedInteractions}function cV(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function cK(){let e=(0,r.d4)(cx),t=(0,r.d4)(cL);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let cU=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function cH(e,t,n){let l=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,ci._i)(e.keyTrigger.keyCodes),r=(0,ci.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return(0,u.kc)().sts_interaction_interop&&n?(0,ci.U8)(t):l+" ("+(0,ci.U8)(t)+")";if(r)return(0,u.kc)().sts_interaction_interop&&n?r:l+" ("+r+")"}return l}function cB(e,t,n){let l=new n9.js(n);if(!e)return l.format("NONE");let r=(0,n9.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return l.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,z.gl)(e.connectionURL))return(0,x.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return l.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return cI.format(e)}return e.transitionNodeID?(0,z.gl)(e.transitionNodeID)?(0,x.t)("fullscreen.mixed"):t(o.dI(e.transitionNodeID)):l.format("NONE")}function cG(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>o2.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function cY(e){let t=[];for(let n of e){let{sourceNodeID:e,id:l}=n;e&&l&&t.push(o2.d({nodeID:e,interactionID:l}))}return t}function cW(e){Q.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:s.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}var cQ=n(386560);function cz(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879V6a1 1 0 0 0-1.707-.707L9.586 8H6.5A1.5 1.5 0 0 0 5 9.5v5a1.5 1.5 0 0 0 .974 1.405L6.879 15H6.5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.44A1 1 0 0 0 14 18zm3.854-5.975a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.707l11-11a.5.5 0 0 1 .708 0m-2.354 4.53v-.056l.681-.68A3 3 0 0 1 15.5 14.6v-1.277c.311-.352.5-.816.5-1.323s-.189-.97-.5-1.323M18 12a4 4 0 0 0-1.112-2.767l.708-.707a5.002 5.002 0 0 1-2.096 8.246V15.71A4 4 0 0 0 18 12",clipRule:"evenodd"}))}var c$=n(553738),cX=n(647215),cj=n(477633),cJ=n(564734),cZ=n(68710),cq=n(632319);function c0({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,z.gl)(e)&&(0,z.gl)(t)?n=(0,x.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:l.createElement(te.B,{svg:cj.A,className:cX.eT}),speakerSvg:l.createElement(te.B,{svg:cZ.A,className:cX.To})}):(0,z.gl)(e)?n=(0,x.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:l.createElement(te.B,{svg:cj.A,className:cX.eT})}):(0,z.gl)(t)&&(n=(0,x.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:l.createElement(te.B,{svg:cZ.A,className:cX.To})})),n?l.createElement(e3.fI,null,l.createElement(e3.UZ,{className:cX.pc},n)):null}let c1=e=>(0,z.gl)(e)?"mixed":e,c5=e=>!0===e,c4=function(e){let t=()=>{let t=!c5(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,oA._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:c1(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,oA._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:c1(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},r=l.createElement("span",{className:(0,tj.GS)()?void 0:cX.hW},l.createElement(rV.S,{label:l.createElement(rw.J,{htmlAttributes:{"data-tooltip":(0,x.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":eJ.Ib.TEXT}},(0,x.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,oA._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:c1(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:c5(e.videoPlayback.autoplay),mixed:(0,z.gl)(e.videoPlayback.autoplay)})),i=(0,tj.GS)()?l.createElement(sd.f,{checked:c5(e.videoPlayback.mediaLoop),mixed:(0,z.gl)(e.videoPlayback.mediaLoop),onIcon:l.createElement(ez.U,{svg:cj.A},l.createElement(rK,null)),offIcon:l.createElement(ez.U,{svg:cJ.A},l.createElement(rU,null)),onChange:t,recordingKey:h.Pt(e,"videoLoopToggle"),"aria-label":(0,x.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,x.t)("proto.prototype_panel.loop"),"data-tooltip-type":eJ.Ib.TEXT}}):l.createElement(c$.m,{toggled:c5(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?cj.A:cJ.A,fallbackSvg:e.videoPlayback.mediaLoop?cj.A:cJ.A,onMouseDown:t,recordingKey:h.Pt(e,"videoLoopToggle"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:cX.BM}),a=(0,tj.GS)()?l.createElement(sd.f,{checked:c5(!e.videoPlayback.muted),mixed:(0,z.gl)(e.videoPlayback.muted),onIcon:l.createElement(ez.U,{svg:cZ.A},l.createElement(rH.L,null)),offIcon:l.createElement(ez.U,{svg:cq.A},l.createElement(cz,null)),onChange:n,recordingKey:h.Pt(e,"videoSoundToggle"),"aria-label":(0,x.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,x.t)("proto.prototype_panel.sound"),"data-tooltip-type":eJ.Ib.TEXT}}):l.createElement(c$.m,{toggled:!e.videoPlayback.muted,svg:c5(e.videoPlayback.muted)?cq.A:cZ.A,fallbackSvg:c5(e.videoPlayback.muted)?cq.A:cZ.A,onMouseDown:n,recordingKey:h.Pt(e,"videoSoundToggle"),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:cX.BM}),s=(0,tj.GS)()?l.createElement(el.pG,{input:r,leftIcon:i,rightIcon:a}):l.createElement(e3.fI,{className:cX.kh},r,l.createElement("div",{className:cX.zc},i,a));return l.createElement(e3.Zk,null,l.createElement(e3.fI,null,l.createElement(e3.xw,{extended:!0},(0,x.tx)("proto.prototype_panel.video"))),s,l.createElement(c0,{videoPlayback:e.videoPlayback}))};var c3=n(420450),c6=n(955136);function c2(e){let{type:t}=e;return l.createElement("div",{className:Z.cx.flex.justifyCenter.itemsCenter.$},l.createElement(te.B,{className:Z.cx.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?c3.A:c6.A}),l.createElement("span",{className:Z.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,x.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let c7=(0,cy.ex)("prototype_scroll_horizontal_info",c2,()=>({type:"horizontal",unconstrainWidth:!0})),c8=(0,cy.ex)("prototype_scroll_vertical_info",c2,()=>({type:"vertical",unconstrainWidth:!0})),c9="scroll_behavior_panel--inactiveLabel--IexW8",pe="scroll_behavior_panel--inactiveLabelContainer--lQjAi";var pt=n(591363);function pn(e){let{scrollDirection:t,showScrollWarning:n,disableOverflowBehaviorItem:i,disableScrollBehaviorItem:a,dropdownShown:o,updateSelectionProperties:c}=e,p=(0,r.wA)(),[d,u]=function(){let e=(0,lt.J2)(s.Ez5.propertiesPanelState().shownPropertiesPanels)[s.ibQ.OVERFLOW_ITEM],t=(0,n1.cJ)(),n=(0,lj.kl)("isSection"),l=(0,lj.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!l]}(),m=(0,tj.GS)()?l.createElement(ld.mS,{titleTx:(0,x.tx)("proto.scroll_panel.scroll_behavior_title")}):l.createElement(e3.fI,null,l.createElement(e3.xw,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,x.tx)("proto.scroll_panel.scroll_behavior_title")));return d||u?l.createElement(tz.p,{name:"scroll_behavior_panel"},l.createElement(e3.Zk,null,m,u&&l.createElement(e3.fI,null,l.createElement("div",{className:pe},l.createElement("span",{className:c9},(0,x.tx)("proto.scroll_panel.position_dropdown.position"))),l.createElement(pc,{recordingKey:h.Pt(e,"scrollBehavior"),dropdownShown:o,disabled:a})),d&&l.createElement(e3.fI,null,l.createElement("div",{className:pe},l.createElement("span",{className:c9},(0,x.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),n&&l.createElement(te.B,{className:"scroll_behavior_panel--infoIcon--FeXbf",svg:pt.A,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":eJ.Ib.SPECIAL,"data-tooltip":"HORIZONTAL"===t?c7:c8,"data-tooltip-show-immediately":!0}),l.createElement(pa,{className:n?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:t,dispatch:p,dropdownShown:o,onChange:e=>{p((0,oA._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,z._W)(t,"MIXED")}})),c({scrollDirection:e})},disabled:i,recordingKey:h.Pt(e,"scrollDirection")})))):null}class pl extends ls.c${}class pr extends ls.l6{}let pi=["NONE","HORIZONTAL","VERTICAL","BOTH"];class pa extends l.PureComponent{render(){return l.createElement(pr,{id:"scroll-direction-select",className:this.props.className,chevronClassName:"scroll_behavior_panel--scrollDirectionChevron--5keRt",inputClassName:"scroll_behavior_panel--scrollDirectionInput--vJSqu",property:this.props.property||"NONE",formatter:n9.Rk,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,disabled:this.props.disabled,recordingKey:this.props.recordingKey,dataTestId:"scroll-direction-dropdown"},pi.map(e=>l.createElement(pl,{key:e,value:e,recordingKey:h.Pt(this.props,e)})))}}pa.displayName="ScrollDirectionDropdown";class ps extends ls.l6{}class po extends ls.c${}function pc(e){let t=(0,r.wA)(),n=(0,lj.kl)("scrollBehavior"),{fixedScrollingDisabled:i}=(0,ij.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),a="scroll-behavior-select",o=e.dropdownShown&&e.dropdownShown.type===a?n9.Ge:n9.wi;return l.createElement(ps,{id:a,className:"scroll_behavior_panel--scrollPosition--YAyUM",formatter:o,property:n||"SCROLLS",onChange:e=>{t((0,oA._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?s.KjJ.FIXED:"STICKY_SCROLLS"===e?s.KjJ.STICKY_SCROLLS:s.KjJ.SCROLLS;es.l7.user("set-scroll-behavior",()=>s.X3B.aggressivelySetScrollBehaviorOfSelection(n)),Q.Y5.commit()},dispatch:t,dropdownShown:e.dropdownShown,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",recordingKey:e.recordingKey,disabled:e.disabled,dataTestId:"scroll-behavior-dropdown"},l.createElement(po,{value:"SCROLLS"}),l.createElement(po,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:i}),l.createElement(po,{value:"STICKY_SCROLLS"}))}var pp=n(105020),pd=n(548183),pu=n(854547),pm=n(654784),ph=n(351731);function pE(){return l.createElement(sq.u,{idForTests:"create-connection-hint",title:(0,x.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:pu.A,iconFallback:pm.A,hintText:(0,x.t)("proto.onboarding.select_a_frame_or_object_hint")})}function p_(){return l.createElement(sq.u,{idForTests:"delete-connection-hint",title:(0,x.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:pp.A,iconFallback:pd.A,hintText:(0,x.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function py(){return l.createElement(sq.u,{idForTests:"play-button-hint",title:(0,x.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:ph.A,hintText:(0,x.t)("proto.onboarding.use_the_play_button_hint")})}function pg({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r}){let i=0===r&&!e,a=0!==r&&!t,s=!n,o=l.useMemo(()=>i?oN.c.CREATING_A_CONNECTION:a?oN.c.REMOVING_A_CONNECTION:s?oN.c.RUNNING_YOUR_PROTOTYPE:null,[i,a,s]);return o?l.createElement(B.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:o}},l.createElement(e3.Zk,null,l.createElement("div",null,i&&l.createElement(pE,null),a&&l.createElement(p_,null),s&&l.createElement(py,null)))):null}class pP extends l.PureComponent{constructor(){super(...arguments),this.onClickShowPrototypeSettings=()=>{this.props.dispatch((0,oA._P)({name:"Show Prototype Settings Clicked"})),oC.wr()}}renderOnboardingPanel(){let e=!!this.props.userFlags.dismissed_create_connection_hint,t=!!this.props.userFlags.dismissed_delete_connection_hint,n=!!this.props.userFlags.dismissed_play_button_hint,r=this.props.selectionProperties.numTransitionsOnCurrentPage;return l.createElement(pg,{dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r})}renderPrototypeSettingsPanel(){return l.createElement(tz.p,{name:"show_prototype_settings_panel"},l.createElement(e3.Zk,{className:this.props.isUI3?op.rq:void 0},l.createElement(en.z,{onClick:this.onClickShowPrototypeSettings,recordingKey:h.Pt(this.props,"prototypeSettingsButton")},(0,x.tx)("proto.menu.show_prototype_settings"))))}renderDevicePanel(){(0,tU.assertDev)((0,z.hS)(this.props.selectionProperties.prototypeDevice),"should not have mixed device selection");let e=(0,oA.Qx)(this.props.selectionProperties.prototypeDevice);return l.createElement(oJ,{key:"device-panel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,prototypeDevice:e,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:"devicePanel",isUI3:this.props.isUI3,pickerShown:this.props.pickerShown})}render(){let e=!(0,z.hS)(this.props.selectionProperties.transitionNodeID)||o.fn((0,z.E7)(this.props.selectionProperties.transitionNodeID)),t=this.props.selectionProperties.numSelected??!1,n=!this.props.isSites&&!!this.props.selectionProperties.numVideosSelected,r=this.props.selectionProperties.isInstanceSelected||this.props.selectionProperties.isInstanceSublayerSelected,i=this.props.selectionProperties.isInstanceSublayerSelected,a=!this.props.isSites&&this.props.selectionProperties.prototypeStartingPointsInfo&&this.props.selectionProperties.prototypeStartingPointsInfo.length>0,s=!this.props.isSites&&!e,c=!this.props.isSites&&((this.props.selectionProperties.isValidPrototypingSourceSelected??!0)||this.props.selectionProperties.isSectionSelected&&(0,oO.YR)());if(!t)return l.createElement("div",null,!this.props.isSites&&this.renderDevicePanel(),!this.props.isUI3&&l.createElement(oL,{recordingKey:h.Pt(this.props,"backgroundPanel"),prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,pickerShown:this.props.pickerShown,dispatch:this.props.dispatch}),a&&l.createElement(nY.A,null),!this.props.isSites&&s&&this.renderOnboardingPanel(),l.createElement(as.Mw,{panelName:as.ON.PROTOTYPE}));{let e=l.createElement(pn,{dropdownShown:this.props.dropdownShown,scrollDirection:this.props.selectionProperties.scrollDirection??"NONE",showScrollWarning:this.props.selectionProperties.showWontScrollWarning??!1,disableOverflowBehaviorItem:!!r,disableScrollBehaviorItem:!!i,recordingKey:h.Pt(this.props,"scrollBehaviorPanel"),updateSelectionProperties:Q.Y5.updateSelectionProperties});return l.createElement("div",null,!this.props.isSites&&this.props.selectionProperties.isTopLevelFrameAndValidPrototypeSourceSelected&&l.createElement(cQ.A,{recordingKey:h.Pt(this.props,"startingPointPanel")}),c&&l.createElement(ck,null),e,n&&l.createElement(c4,{updateSelectionProperties:Q.Y5.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:function(e){let{videoMediaLoop:t,videoAutoplay:n,videoMuted:l,numVideosSelected:r}=e;return(0,tU.assertNotNullish)(t),(0,tU.assertNotNullish)(n),(0,tU.assertNotNullish)(l),(0,tU.assertNotNullish)(r),{autoplay:n,muted:l,mediaLoop:t,numVideosSelected:r}}(this.props.selectionProperties)}),!this.props.isSites&&this.renderPrototypeSettingsPanel(),s&&this.renderOnboardingPanel(),l.createElement(as.Mw,{panelName:as.ON.PROTOTYPE}))}}}pP.displayName="PrototypePanel";let pS=(0,B.kp)(function(e){let{bigNudgeAmount:t,smallNudgeAmount:n}=(0,b.sT)(),r=(0,tj.GS)(),i=(0,n1.cJ)();return l.createElement(pP,{...e,bigNudgeAmount:t,smallNudgeAmount:n,isUI3:r,isSites:i})},eU.e0.PROTOTYPE_PANEL);var pb=n(139689),pf=n(146394),pv=n(155300);let pw={[s.eVK.TOP_LEFT]:"anchor_point_selector--apTopLeft--jsueH",[s.eVK.TOP_CENTER]:"anchor_point_selector--apTopMiddle--Wp-kD",[s.eVK.TOP_RIGHT]:"anchor_point_selector--apTopRight--mbC5X",[s.eVK.MIDDLE_LEFT]:"anchor_point_selector--apMiddleLeft--G-YlO",[s.eVK.MIDDLE_CENTER]:"anchor_point_selector--apMiddleMiddle--gut-r",[s.eVK.MIDDLE_RIGHT]:"anchor_point_selector--apMiddleRight--VZnhH",[s.eVK.BOTTOM_LEFT]:"anchor_point_selector--apBottomLeft--30X3n",[s.eVK.BOTTOM_CENTER]:"anchor_point_selector--apBottomMiddle--ySpzF",[s.eVK.BOTTOM_RIGHT]:"anchor_point_selector--apBottomRight--rXs-P"},pT={[s.eVK.TOP_LEFT]:"top_left",[s.eVK.TOP_CENTER]:"top_center",[s.eVK.TOP_RIGHT]:"top_right",[s.eVK.MIDDLE_LEFT]:"middle_left",[s.eVK.MIDDLE_CENTER]:"middle_center",[s.eVK.MIDDLE_RIGHT]:"middle_right",[s.eVK.BOTTOM_LEFT]:"bottom_left",[s.eVK.BOTTOM_CENTER]:"bottom_center",[s.eVK.BOTTOM_RIGHT]:"bottom_right"};function pI(e){let{value:t,anchorPoint:n,onAnchorPointChange:r,disabled:i,dataTestId:a}=e,s=l.useCallback(()=>{r(t)},[r,t]),o=t===n;return l.createElement("button",{className:`anchor_point_selector--anchorPointButton--JCPGp ${pw[t]}`,onClick:s,disabled:i,"data-testid":a},l.createElement("div",{className:p()("anchor_point_selector--anchorPointButtonInner--LSo9Y",{"anchor_point_selector--apButtonActive--eNX6V":o,"anchor_point_selector--disabled--YCcFc":i}),"data-testid":o?`${a}.active`:void 0}))}let pk=e=>"INPUT"===e.tagName;function pN(e){let{anchorPoint:t,onAnchorPointChange:n,disabled:r,restoreFocusElements:i}=e,[a,o]=l.useState(document.activeElement),c=e=>{n(e),a&&pk(a)&&i?.includes(a)&&a.focus()};return l.createElement("div",{className:p()("anchor_point_selector--anchorPointSelector--ZC9rv",{"anchor_point_selector--anchorPointSelectorDisabled--JScxh":r}),onMouseDown:()=>{o(document.activeElement)}},l.createElement(l.Fragment,null,l.createElement(pI,{disabled:r,value:s.eVK.TOP_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.TOP_LEFT]}`}),l.createElement(pI,{disabled:r,value:s.eVK.TOP_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.TOP_CENTER]}`}),l.createElement(pI,{disabled:r,value:s.eVK.TOP_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.TOP_RIGHT]}`})),l.createElement(l.Fragment,null,l.createElement(pI,{disabled:r,value:s.eVK.MIDDLE_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.MIDDLE_LEFT]}`}),l.createElement(pI,{disabled:r,value:s.eVK.MIDDLE_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.MIDDLE_CENTER]}`}),l.createElement(pI,{disabled:r,value:s.eVK.MIDDLE_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.MIDDLE_RIGHT]}`})),l.createElement(l.Fragment,null,l.createElement(pI,{disabled:r,value:s.eVK.BOTTOM_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.BOTTOM_LEFT]}`}),l.createElement(pI,{disabled:r,value:s.eVK.BOTTOM_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.BOTTOM_CENTER]}`}),l.createElement(pI,{disabled:r,value:s.eVK.BOTTOM_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${pT[s.eVK.BOTTOM_RIGHT]}`})))}let pC=s.eVK.MIDDLE_CENTER;var pA=(e=>(e.TextInput="text-input",e.Selector="selector",e))(pA||{}),pO=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(pO||{});function pM(e,t){return(0,i.areClose)(e,0)?((0,O.x1)("clampScaleValue","scale is 0",{originalValue:e,newValue:t}),1):(0,i.clamp)(t/e,.01,100)}var pR=n(336417),pL=n(127285),px=n(360882),pD=n(614851),pF=n(59466);let pV=[.25,.5,.75,1,2,3,4,5,10];class pK extends ll.a3{}class pU extends ls.c${}let pH=new class{constructor(){this.MAX_SCALE=100,this.MIN_SCALE=.01}parse(e){let t=(0,px.q)(e),n=(0,pL.O4)(t,1);if(null!==n.value&&isFinite(n.value)){let t=(0,px.v)(e);return{value:n.value,anchorPoint:null===t?void 0:t}}throw new n8.LS("Could not parse input",n.error)}format(e){if(null==e)return"";let t=parseFloat(e.value.toFixed(2));return`${t}x`}getNudgeAmount(e){return e?1:.5}incrementBy(e,t){return{value:e.value+t,anchorPoint:e.anchorPoint}}snap(e,t){return{value:(0,i.snapToNearestMultiple)(e.value,t),anchorPoint:e.anchorPoint}}clamp(e){return{value:(0,i.clamp)(e.value,this.MIN_SCALE,this.MAX_SCALE),anchorPoint:e.anchorPoint}}isEqual(e,t){return e.value===t.value&&e.anchorPoint===t.anchorPoint}},pB=l.forwardRef((e,t)=>{let{disabled:n,scale:i,onScaleChange:a,recordingKey:s,onInputKeyDown:o}=e,c=(0,r.wA)(),p=(0,r.d4)(e=>e.dropdownShown),d=h.c1(s),u=(0,tj.GS)(),m=pV.map((e,t)=>l.createElement(pU,{key:t,value:{value:e},recordingKey:d("scaleInput",e)})),E={smallNudgeAmount:1,bigNudgeAmount:10,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01,"data-tooltip":"","data-tooltip-type":eJ.Ib.TEXT,dispatch:c,value:{value:i},onValueChange:(e,t)=>{a(e.value,pO.Scrub,t),t&&Q.Y5.commit()},scrubbingDisabled:n,formatter:pH},_=l.createElement(ez.U,{svg:pF.A},l.createElement(pR.l,null));return l.createElement(ll.ow,{value:{select:u?lo.pW:void 0,inputComponent:u?lo.gm:void 0}},l.createElement(ls.tV,{value:{chevron:u?lc.t:void 0}},l.createElement(pK,{scrubbableControlProps:E,id:"scale-input-fullscreen.scale_panel.scale",forwardedRef:t,className:"scale_row--scaleCombobox--jimxi",property:{value:i},onKeyDown:o,onChange:(e,t,n)=>{a(e.value,n===ll.G7.Input?pO.Input:pO.Select,t??rF.zk.NO,e.anchorPoint),t&&Q.Y5.commit()},formatter:pH,dispatch:c,dropdownShown:p,onMouseDown:e=>{e.stopPropagation()},recordingKey:d("scaleInput"),disabled:n,icon:_,iconClassName:pD.QK,dropdownWidth:104,dataTestId:"scale_panel.scale"},m)))});l.forwardRef((e,t)=>l.createElement(e3.fI,null,l.createElement(pB,{...e,ref:t})));let pG="scale_width_height_row--condensedWidthHeightRow--VOTEM",pY="scale_width_height_row--condensedScrubbableInput--XxHxl",pW={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function pQ(e){let{disabled:t,scale:n,property:a,selectionRegionsBounds:s,selectionRegionsOriginalBounds:o,onScaleChange:c,recordingKey:p,forwardedRef:d,onKeyDown:u}=e,m="width"===a?pO.Width:pO.Height,E=(0,r.wA)(),_=h.c1(p),y=function(){if(s&&s.length){let e=s[0][a];return s.every(t=>(0,i.areClose)(t[a],e,.005))?e:z.oV}return z.oV}(),g=(0,ry.Xs)(),P=(0,z.gl)(y)?pW:{},S=(0,tj.GS)();return l.createElement(ln.$j,{noBorderOnHover:!0,dispatch:E,forwardedRef:d,className:pY,inputClassName:pD.hF,disabled:t,floatingPointFormat:S?void 0:{maxNumDigits:4},onKeyDown:u,dataTestId:`scale_panel.${a}`,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":"width"===a?(0,x.t)("fullscreen.properties_panel.transform_panel.width"):(0,x.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${a}Input.input`),min:(0,z.gl)(y)?.01:1,value:y??0,mixedMathHandler:{getValue:()=>n,onChange:(e,t,n)=>{let l=t(e);Number.isNaN(l)||c((0,i.clamp)(l,.01,100),m,n)}},onValueChange:(e,t)=>{!Number.isNaN(e)&&y&&y!==z.oV&&o&&o.length&&c(pM(o[0][a],e),m,t)},...g,...P},l.createElement("span",{className:`${pD.QK} svg`},"width"===a?(0,x.tx)("fullscreen.properties_panel.transform_panel.w"):(0,x.tx)("fullscreen.properties_panel.transform_panel.h")))}function pz(e){let{widthRef:t,heightRef:n,onWidthInputKeyDown:r,onHeightInputKeyDown:i,...a}=e;return l.createElement(pQ,{...a,property:"width",forwardedRef:t,onKeyDown:r})}function p$(e){let{widthRef:t,heightRef:n,onWidthInputKeyDown:r,onHeightInputKeyDown:i,...a}=e;return l.createElement(pQ,{...a,property:"height",forwardedRef:n,onKeyDown:i})}function pX(e){return l.createElement(e3.fI,{className:pG},l.createElement(pz,{...e}),l.createElement(p$,{...e}))}function pj(e){let t=l.createElement(pz,{...e}),n=l.createElement(p$,{...e});return l.createElement(el.fn,{leftLabel:(0,x.t)("fullscreen.properties_panel.transform_panel.width"),leftInput:t,rightLabel:(0,x.t)("fullscreen.properties_panel.transform_panel.height"),rightInput:n,icon:null})}var pJ=n(889012),pZ=n.n(pJ);let pq="scale_panel--scalePanelRow--Cbovd",p0="scale_panel--scalePanel--EfJhl";var p1=n(630834);let p5=()=>{Q.Y5.triggerAction("set-tool-default")};function p4(e){let t=(0,r.d4)(e=>e.mirror.sceneGraphSelection),n=(0,lj.kl)("selectionRegions"),a=(0,z.E7)(n),o=(0,tG.ZC)(a),c=l.useRef(0),[p,d]=(0,l.useState)(void 0),m=(0,tG.ZC)(p),E=l.useRef(null),_=(0,lj.kl)("selectionResizable"),y=(0,z._W)(_,!1),g=(0,tJ.p8)("activeUserAction"),P=(0,tG.ZC)(g),S=(0,lt.J2)(s.Ez5.propertiesPanelState().shownPropertiesPanels),b=(0,tG.ZC)(S),[f,v]=(0,l.useState)(!1),w=l.useRef(null),T=l.useRef(null),I=l.useRef(null),k=(0,tJ.p8)("currentTool"),N=(0,tG.ZC)(k),C=k!==s.NLJ.SCALE,A=!y||C,O=(0,tj.GS)(),[M,R]=(0,l.useState)(pC),L=(0,lt.J2)(s.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint),D=h.qP(e.recordingKey??"","anchorPointChange",R),[F,V]=(0,l.useState)(void 0),K=(0,l.useCallback)(e=>{void 0===F?V(e):F!==e&&V(null)},[F]),{trackScaleChangeEvent:U,trackScaleToolDismissed:H,trackAnchorPointChange:B}=function(){let e=(0,o6.am)(),t=(0,l.useCallback)(t=>{e("scale_tool_panel_set_value",{key:"height",...t})},[e]),n=(0,l.useMemo)(()=>pZ()(t,3e3),[t]),r=(0,l.useCallback)((e,l)=>l?n(e):t(e),[n,t]),i=(0,l.useCallback)(t=>e("scale_tool_panel_set_value",{key:"width",...t}),[e]),a=(0,l.useMemo)(()=>pZ()(i,3e3),[i]),s=(0,l.useCallback)((e,t)=>t?a(e):i(e),[a,i]),o=(0,l.useCallback)(t=>e("scale_tool_panel_set_value",{key:"scale",...t}),[e]),c=(0,l.useMemo)(()=>pZ()(o,3e3),[o]),p=(0,l.useCallback)((e,t)=>t?c(e):o(e),[c,o]),d=(0,l.useCallback)(t=>e("scale_tool_panel_dismissed",{...t}),[e]);return{trackScaleChangeEvent:p,trackWidthChangeEvent:s,trackHeightChangeEvent:r,trackAnchorPointChange:(0,l.useCallback)(t=>e("scale_tool_set_anchor_point",{...t}),[e]),trackScaleToolDismissed:d}}();(0,l.useEffect)(()=>{g===s.QOV.RESIZING&&M!==L&&(K(L),D(L))},[g,M,D,K,L]);let[G,Y]=(0,l.useState)(1),[W,$]=(0,l.useState)(!1),[X,j]=(0,l.useState)(!1),[J,Z]=(0,l.useState)(!0),q=(0,l.useCallback)((e,t)=>{p&&p.length&&(s.glU.setScale(e,t,p.map(e=>({origin:{x:e.x,y:e.y},size:{x:e.width,y:e.height}})),null!==F),j(!0),K(t))},[p,F,K]);(0,l.useEffect)(()=>{$(!0)},[t]),(0,l.useEffect)(()=>{!b?.[s.ibQ.SCALE_ITEM]&&S?.[s.ibQ.SCALE_ITEM]&&$(!0)},[S,b]);let ee=(0,l.useCallback)(()=>X?(j(!1),!0):g===s.QOV.RESIZING||g===s.QOV.DEFAULT&&P===s.QOV.RESIZING,[g,X,P]);(0,l.useLayoutEffect)(()=>{if(o&&o.length&&a&&a.length&&o.length===a.length)for(let e=0;e<a.length;e++){let{x:t,y:n,width:l,height:r}=a[e].bounds,{x:s,y:c,width:p,height:d}=o[e].bounds;if(p!==l||d!==r){if(!ee()&&!W){$((0,i.areClose)(p,l)!==(0,i.areClose)(d,r));break}}else if(s!==t||c!==n){K(null);break}}},[o,a,ee,K,W]),(0,l.useLayoutEffect)(()=>{let e=!1;if((0,u.kc)().ce_scale_tool_skew&&a){let t=E.current??a.map(e=>(e.bounds.width||1)/(e.bounds.height||1)),n=s.glU.getSelectionAngleSum();if(a.length===t.length){E.current=[];for(let l=0;l<a.length;++l){let r=(a[l].bounds.width||1)/(a[l].bounds.height||1);(e||(0,pv.o)(r,t[l],1e-4))&&(0,pv.o)(n,c.current,1e-4)||(e=!0),E.current.push(r),c.current=n}}}(e||W)&&(Y(1),D(pC),s.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint.set(pC),V(void 0),d(s.glU.getSelectionRegionsBounds().map(({origin:e,size:t})=>({x:e.x,y:e.y,width:t.x,height:t.y}))),v(!1),$(!1))},[W,a,D,L]),(0,l.useLayoutEffect)(()=>{a&&a.length&&p&&p.length&&(a!==o||(0,u.kc)().ce_scale_tool_skew&&p!==m)&&(J?Y(pM(p[0].width,a[0].bounds.width)):Z(!0))},[m,a,p,o,J]),(0,l.useEffect)(()=>{let e=k===s.NLJ.SCALE&&N!==s.NLJ.SCALE;e&&Object.keys(t).length>0&&e&&[s.QOV.DEFAULT,s.QOV.SELECTING_TEXT].includes(g)&&w.current&&(w.current.focus(),w.current.select())},[g,k,N,t]),(0,l.useEffect)(()=>{let e=()=>{w.current&&(v(!1),w.current.focus(),w.current.select())};return pf.h.subscribeScaleToolActivated(e),()=>{pf.h.unsubscribeScaleToolActivated(e)}},[]),(0,l.useEffect)(()=>{let e=e=>{e.target!==w.current&&e.target!==T.current&&e.target!==I.current&&v(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let et=(0,l.useCallback)(e=>{let t="Escape"===e.key,n="Enter"===e.key;!f&&(n||t)&&p5()},[f]),en=l.createElement(e3.$4,null,l.createElement(e2.K,{onClick:()=>{p5(),H({selectionCount:Object.keys(t).length})},"aria-label":(0,x.t)("fullscreen.scale_panel.close")},l.createElement(ez.U,{svg:p1.default,fallbackSvg:p1.default},l.createElement(pb.A,null)))),er=l.createElement(pB,{scale:G,onInputKeyDown:et,onScaleChange:es.nc.user("change-scale",(e,t,n,l)=>{Y(e),Z(!1),void 0!==l&&(0,u.kc)().ee_scale_tool_ap_input?(U({value:e,source:t,anchorPoint:l,anchorPointSource:pA.TextInput}),q(e,l),D(l)):(t===pO.Select?U({value:e,source:t,anchorPoint:M,anchorPointSource:pA.Selector}):U({value:e,source:t,anchorPoint:M,anchorPointSource:pA.Selector},!0),(0,eH.flushSync)(()=>{q(e,M),n&&a&&a.length>1&&s.glU.logMultiEditActionForSelection("scale_panel_finish",null)}))}),disabled:A,recordingKey:e.recordingKey,ref:w}),ei=l.createElement(pN,{restoreFocusElements:[w.current,T.current,I.current].filter(Boolean),anchorPoint:M,onAnchorPointChange:es.nc.user("change-anchor-point",e=>{e!==M&&(1!==G&&(q(1,M),q(G,e)),D(e)),B({anchorPoint:e})}),disabled:A}),ea=l.createElement(O?pj:pX,{scale:G,selectionRegionsBounds:a.map(e=>e.bounds),selectionRegionsOriginalBounds:p,onScaleChange:es.nc.user("change-scale",(e,t,n)=>{U({value:e,source:t,anchorPoint:M,anchorPointSource:pA.Selector},!0),Y(e),Z(!1),q(e,M),n&&(a&&a.length>1&&s.glU.logMultiEditActionForSelection("scale_panel_finish",null),Q.Y5.commit())}),widthRef:T,heightRef:I,onHeightInputKeyDown:et,onWidthInputKeyDown:et,disabled:A,recordingKey:e.recordingKey});return O?l.createElement(e3.Zk,{"data-testid":`scale_panel.state.${C?"hidden":A?"disabled":"enabled"}`,className:p0},l.createElement(ld.r,{titleTx:(0,x.tx)("fullscreen.scale_panel.scale"),icon:en}),ea,l.createElement(el.sY,{leftLabel:(0,x.t)("fullscreen.scale_panel.scale"),rightLabel:(0,x.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:er,bottomLeftInput:null,rightInput:ei,topIcon:null,bottomIcon:null})):l.createElement(e3.Zk,{"data-testid":`scale_panel.state.${C?"hidden":A?"disabled":"enabled"}`},l.createElement(e3.fI,{className:pq},l.createElement(e3.xw,null,(0,x.tx)("fullscreen.scale_panel.scale")),en,ei),l.createElement(e3.fI,null,er),ea)}let p3={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function p6({disabled:e,widthOrHeight:t,scale:n,property:i,onScaleChange:a,onWidthOrHeightChange:s,recordingKey:o,forwardedRef:c,onKeyDown:p}){let d="width"===i?pO.Width:pO.Height,u=(0,r.wA)(),m=(0,ry.Xs)(),E=(0,z.gl)(t)?p3:{},_=h.c1(o),y=(0,tj.GS)();return l.createElement(ln.$j,{noBorderOnHover:!0,dispatch:u,forwardedRef:c,className:pY,inputClassName:pD.hF,disabled:e,floatingPointFormat:y?void 0:{maxNumDigits:4},onKeyDown:p,dataTestId:`scale_panel.${i}`,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":"width"===i?(0,x.t)("fullscreen.properties_panel.transform_panel.width"):(0,x.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${i}Input.input`),min:(0,z.gl)(t)?.01:1,value:t||0,mixedMathHandler:{getValue:()=>n,onChange:(e,t,n)=>{let l=t(e);Number.isNaN(l)||a(l,d,n)}},onValueChange:(e,n)=>{!Number.isNaN(e)&&t&&t!==z.oV&&s(e,n)},...m,...E},l.createElement("span",{className:`${pD.QK} svg`},"width"===i?(0,x.tx)("fullscreen.properties_panel.transform_panel.w"):(0,x.tx)("fullscreen.properties_panel.transform_panel.h")))}function p2(e){let{widthInputRef:t,onWidthInputKeyDown:n,width:r,onWidthChange:i,...a}=e;return l.createElement(p6,{...a,property:"width",widthOrHeight:r,onWidthOrHeightChange:i,onKeyDown:n,forwardedRef:t})}function p7(e){let{heightInputRef:t,onHeightInputKeyDown:n,height:r,onHeightChange:i,...a}=e;return l.createElement(p6,{...a,property:"height",widthOrHeight:r,onWidthOrHeightChange:i,onKeyDown:n,forwardedRef:t})}function p8(e){return l.createElement(e3.fI,{className:pG},l.createElement(p2,{...e}),l.createElement(p7,{...e}))}function p9(e){return l.createElement(el.fn,{leftLabel:(0,x.t)("fullscreen.properties_panel.transform_panel.width"),leftInput:l.createElement(p2,{...e}),rightLabel:(0,x.t)("fullscreen.properties_panel.transform_panel.height"),rightInput:l.createElement(p7,{...e}),icon:null})}let de=n(630834);function dt(){Q.Y5.triggerAction("set-tool-default")}function dn({recordingKey:e}){let t=(0,tj.GS)(),n=(0,lt.J2)(s.yFm.state().scale),i=(0,lt.J2)(s.yFm.state().disabled),a=es.nc.user("change-scale",e=>{s.yFm.setScale(e)}),o=(0,lt.J2)(s.yFm.state().width);o="number"==typeof o?o:z.oV;let c=es.nc.user("change-scale-width",e=>{s.yFm.setWidth(e)}),p=(0,lt.J2)(s.yFm.state().height);p="number"==typeof p?p:z.oV;let d=es.nc.user("change-scale-height",e=>{s.yFm.setHeight(e)}),u=(0,lt.J2)(s.yFm.state().anchorPoint),m=es.nc.user("change-anchor-point",e=>{s.yFm.setAnchorPoint(e)}),{handleKeyDown:h,heightInputRef:E,scaleInputRef:_,widthInputRef:y}=function(){let e=(0,r.d4)(e=>e.mirror.sceneGraphSelection),[t,n]=l.useState(!1),i=l.useRef(null),a=l.useRef(null),o=l.useRef(null),c=(0,tJ.p8)("currentTool"),p=(0,tG.ZC)(c),d=(0,tJ.p8)("activeUserAction"),[u,m]=l.useState(!1);l.useEffect(()=>{let t=c===s.NLJ.SCALE&&p!==s.NLJ.SCALE;Object.keys(e).length>0&&t&&[s.QOV.DEFAULT,s.QOV.SELECTING_TEXT].includes(d)&&i.current&&(i.current.focus(),i.current.select())},[d,c,p,e]),l.useEffect(()=>{let e=()=>{i.current&&(n(!1),m(!1),i.current.focus(),i.current.select())};return pf.h.subscribeScaleToolActivated(e),()=>{pf.h.unsubscribeScaleToolActivated(e)}},[]),l.useEffect(()=>{let e=e=>{e.target!==i.current&&e.target!==a.current&&e.target!==o.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let h=l.useCallback(e=>{let n="Escape"===e.key,l="Enter"===e.key;!t&&(l||n)&&m(!0)},[t]);return l.useEffect(()=>{u&&dt()},[u]),{handleKeyDown:h,scaleInputRef:i,widthInputRef:a,heightInputRef:o}}(),g=l.createElement(e3.$4,null,l.createElement(e2.K,{onClick:()=>{dt()},"aria-label":(0,x.t)("fullscreen.scale_panel.close")},l.createElement(ez.U,{svg:de,fallbackSvg:de},l.createElement(pb.A,null)))),P=l.createElement(pN,{restoreFocusElements:[_.current,y.current,E.current].filter(Boolean),anchorPoint:u,onAnchorPointChange:m,disabled:i}),S=l.createElement(t?p9:p8,{scale:n,width:o,height:p,onWidthChange:c,onHeightChange:d,onScaleChange:a,onKeyDown:h,widthInputRef:y,heightInputRef:E,disabled:i,recordingKey:e}),b=l.createElement(pB,{scale:n,onScaleChange:a,disabled:i,onInputKeyDown:h,recordingKey:e,ref:_});return t?l.createElement(e3.Zk,{"data-testid":`scale_panel.state.${i?"disabled":"enabled"}`,className:p0},l.createElement(ld.r,{titleTx:(0,x.tx)("fullscreen.scale_panel.scale"),icon:g}),S,l.createElement(el.sY,{leftLabel:(0,x.t)("fullscreen.scale_panel.scale"),rightLabel:(0,x.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:b,bottomLeftInput:null,rightInput:P,topIcon:null,bottomIcon:null})):l.createElement(e3.Zk,{"data-testid":`scale_panel.state.${i?"disabled":"enabled"}`},l.createElement(e3.fI,{className:pq},l.createElement(e3.xw,null,(0,x.tx)("fullscreen.scale_panel.scale")),g,P),l.createElement(e3.fI,null,b),S)}function dl(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 9.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zm9 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zm-8-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m.5 8.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z",clipRule:"evenodd"}))}var dr=n(933466),di=n(700829),da=n(467213),ds=n(416082),dc=n(423324),dp=n(460528);let dd=(0,cy.ex)("autolayout_v3_migration_info",function(e){let{tooltipText:t}=e,n=(0,m.Gc)(e=>{e.stopPropagation(),rI.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360040451373#Updates_to_Auto_Layout","_blank")});return l.createElement("div",{className:"autolayout_v3_migration_info_tooltip--autolayoutMigration--OQ8zC"},t,l.createElement("a",{onMouseDown:n,rel:"noopener"},(0,x.tx)("fullscreen.properties_panel.migration_tooltip_learn_more")))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var du=n(283942),dm=n(221537);let dh="alignment_view_v4--indicator--VmKfE",dE="alignment_view_v4--indicatorBaseline--4kxfb",d_="alignment_view_v4--counterCenter--MlF9q";function dy({onClick:e,onDoubleClick:t,onHover:n,...r}){let i=(0,dm.rO)(r.stackPrimaryAlignItems),a="BASELINE"===r.stackCounterAlignItems,s="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",o="WRAP"===r.stackWrap,c="HORIZONTAL"===s?"alignment_view_v4--horizontal--UiniT":"alignment_view_v4--vertical--JVrRJ",d=i?"alignment_view_v4--spaceBetween--RZOdp":"alignment_view_v4--packed--MZMpk",u=(0,z.hS)(r.stackPrimaryAlignItems)&&(0,z.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,l.useCallback)(e=>{let[n,l]=dT(e.target);if(i){let t=e.target.getBoundingClientRect();"HORIZONTAL"===s?n=Math.floor((e.clientX-t.x)/t.width*3):l=Math.floor((e.clientY-t.y)/t.height*3)}t(n,l)},[t,i,s]),E=(0,l.useCallback)(e=>n(...dT(e.target)),[n]),_=(0,l.useCallback)(e=>n(null,null),[n]);return l.createElement("div",{className:p()(r.className,"alignment_view_v4--mainContainer--zUBsm",c,d,{"alignment_view_v4--baselineAlign--xLTR2":a}),tabIndex:0,onKeyDown:r.onKeyDown},l.createElement(dw,{baseline:a}),l.createElement(df,{stackMode:s,spaceBetween:i,baselineAlign:a,onMouseMove:E,onMouseOut:_,onClick:e,onDoubleClick:h}),m&&l.createElement(dg,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:o}),u&&l.createElement(dg,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:o}),a&&l.createElement(db,{onClick:r.onRemoveBaseline}))}function dg({hover:e,primaryAlign:t,counterAlign:n,isStackWrap:r}){return l.createElement("div",{className:p()("alignment_view_v4--indicatorContainer--ewQnB alignment_view_v4--_centered--S6qQk",t?dS[t]:void 0,n?dP[n]:void 0,{"alignment_view_v4--hover---ncmo":e})},l.createElement("div",{className:p()("alignment_view_v4--indicatorGroup--vlMlW",{"alignment_view_v4--wrap--nsYBR":r})},"BASELINE"===n?(0,dm.rO)(t)?l.createElement(l.Fragment,null,l.createElement("div",{className:dh}),l.createElement("span",{className:dE},"A"),l.createElement("div",{className:dh})):l.createElement("span",{className:dE},"A"):r?l.createElement(l.Fragment,null,l.createElement("div",{className:dh}),l.createElement("div",{className:dh}),l.createElement("div",{className:dh}),l.createElement("div",{className:dh}),l.createElement("div",{className:dh})):l.createElement(l.Fragment,null,l.createElement("div",{className:dh}),l.createElement("div",{className:dh}),l.createElement("div",{className:dh}))))}let dP={MIN:"alignment_view_v4--counterMin--1LPg6",CENTER:d_,MAX:"alignment_view_v4--counterMax--HzBqX",BASELINE:d_},dS={MIN:"alignment_view_v4--primaryMin--DHsQj",CENTER:"alignment_view_v4--primaryCenter--ci9Aj",MAX:"alignment_view_v4--primaryMax--i8kqd",SPACE_EVENLY:"",SPACE_BETWEEN:""};function db({onClick:e}){let t=dk(),n=dN(),r=2*t/3+2,i=t-9,a=t-5.5;return l.createElement("svg",{className:"alignment_view_v4--baselineControls--cwzcf alignment_view_v4--_centered--S6qQk",width:t,height:t,viewBox:n,fill:"none"},l.createElement("g",{className:"alignment_view_v4--baselineHovered--uY49E","data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},l.createElement("rect",{x:"4.5",y:`${r}`,width:`${i}`,height:"14",rx:"2",fill:"var(--color-bg-selected-tertiary, #EDF5FA)"}),l.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${a}`,y2:`${r}`,stroke:"var(--color-bg-brand-hover, #0D99FF)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"1 5"}),l.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${a}`,y2:`${r}`,stroke:"var(--color-bg-tertiary, rgba(0, 0, 0, 0.3))",strokeWidth:"2",strokeLinecap:"round"})))}function df({spaceBetween:e,stackMode:t,baselineAlign:n,onMouseMove:r,onMouseOut:i,onClick:a,onDoubleClick:s}){let o=dI({stackMode:t,baselineAlign:n,spaceBetween:e});return l.createElement("div",{className:"alignment_view_v4--tooltipGrid--1PH8Z alignment_view_v4--_centered--S6qQk",onMouseMove:r,onMouseOut:i,onClick:a,onDoubleClick:s},o.map((n,r)=>{let i=r%3,a=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(a=i,i=0),l.createElement(dv,{key:r,x:i,y:a,..."string"==typeof n?{tooltip:n}:n})}))}function dv({x:e,y:t,tooltip:n,below:r}){return l.createElement("div",{"data-x":e,"data-y":t,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":n,"data-tooltip-show-above":!r||void 0})}function dw({baseline:e}){let t=dN(),n=dk(),r=n/3,i=`${r}`,a=`${r/2}`,s=e?r:0,o=e?r:n,c=(0,l.useId)();return l.createElement("svg",{width:n,height:n,viewBox:t,fill:"currentColor"},l.createElement("defs",null,l.createElement("pattern",{id:c,width:i,height:i,patternUnits:"userSpaceOnUse"},l.createElement("circle",{cx:a,cy:a,r:"1"}))),l.createElement("rect",{width:"79",height:o,y:s,fill:`url(#${c})`}))}function dT(e){let{x:t,y:n}=e.dataset;return[parseInt(t),parseInt(n)]}function dI({baselineAlign:e,spaceBetween:t,stackMode:n,isUi3:l}){return e&&t?l?[{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),below:!0}]:[(0,x.t)("fullscreen.properties_panel.stack_panel.align_baseline")]:e?[{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_left_baseline"),below:l},{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_center_baseline"),below:l},{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_right_baseline"),below:l}]:t?"HORIZONTAL"===n?l?[(0,x.t)("fullscreen.properties_panel.stack_panel.align_top"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_center"),{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_bottom"),below:!0}]:[(0,x.t)("fullscreen.properties_panel.stack_panel.align_auto_top_gap"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_auto_bottom_gap"),below:!0}]:l?[(0,x.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_right")]:[(0,x.t)("fullscreen.properties_panel.stack_panel.align_auto_left_gap"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_auto_right_gap")]:[(0,x.t)("fullscreen.properties_panel.stack_panel.align_top_left"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_top_center"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_top_right"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,x.t)("fullscreen.properties_panel.stack_panel.align_right"),{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_bottom_left"),below:!0},{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_bottom_center"),below:!0},{tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.align_bottom_right"),below:!0}]}let dk=()=>(0,d.jz)("60px"),dN=()=>{let e=dk();return`0 0 ${e} ${e}`},dC="alignment_view_v4_ui3--indicatorBaseline--NUe6M",dA="alignment_view_v4_ui3--counterCenter--QC-B7";function dO({onClick:e,onDoubleClick:t,onHover:n,...r}){let i=(0,dm.rO)(r.stackPrimaryAlignItems),a="BASELINE"===r.stackCounterAlignItems,s="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",o="WRAP"===r.stackWrap,c="HORIZONTAL"===s?"alignment_view_v4_ui3--horizontal--2Shqc":"alignment_view_v4_ui3--vertical--zGQMJ",d=i?"alignment_view_v4_ui3--spaceBetween--o3EAq":"alignment_view_v4_ui3--packed--EvdQi",u=(0,z.hS)(r.stackPrimaryAlignItems)&&(0,z.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,l.useCallback)(e=>{let[n,l]=dH(e.target);if(i){let t=e.target.getBoundingClientRect();"HORIZONTAL"===s?n=Math.floor((e.clientX-t.x)/t.width*3):l=Math.floor((e.clientY-t.y)/t.height*3)}t(n,l)},[t,i,s]),E=(0,l.useCallback)(e=>n(...dH(e.target)),[n]),_=(0,l.useCallback)(e=>n(null,null),[n]);return l.createElement("div",{className:p()(r.className,"alignment_view_v4_ui3--mainContainer---0NcS",c,d,{"alignment_view_v4_ui3--baselineAlign--OxyzT":a}),tabIndex:0,onKeyDown:r.onKeyDown},l.createElement(dU,null),l.createElement(dF,{stackMode:s,spaceBetween:i,baselineAlign:a,onMouseMove:E,onMouseOut:_,onClick:e,onDoubleClick:h}),m&&l.createElement(dM,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:o}),u&&l.createElement(dM,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:o}),a&&l.createElement("div",{className:"alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},l.createElement(dD,{onClick:r.onRemoveBaseline})))}function dM({hover:e,primaryAlign:t,counterAlign:n,isStackWrap:r}){function i(){let e=(0,dm.rO)(t);if("BASELINE"===n)return e?l.createElement(l.Fragment,null,l.createElement("span",{className:dC},"A"),l.createElement("span",{className:dC},"A"),l.createElement("span",{className:dC},"A")):l.createElement("span",{className:dC},"A");let i=r&&!e?5:3;return l.createElement(dR,{n:i})}return l.createElement("div",{className:p()("alignment_view_v4_ui3--indicatorContainer--napq- alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",t?dx[t]:void 0,n?dL[n]:void 0,{"alignment_view_v4_ui3--hover--ypG6x":e})},"BASELINE"===n?i():l.createElement("div",{className:"alignment_view_v4_ui3--indicatorGridCell--lp1lH"},l.createElement("div",{className:p()("alignment_view_v4_ui3--indicatorGroup--urXG2",{"alignment_view_v4_ui3--wrap--JWwtI":r})},i())))}function dR({n:e}){return l.createElement(l.Fragment,null,Array.from({length:e},(e,t)=>l.createElement("div",{key:t,className:"alignment_view_v4_ui3--indicator--82j5F"})))}let dL={MIN:"alignment_view_v4_ui3--counterMin--aOx1R",CENTER:dA,MAX:"alignment_view_v4_ui3--counterMax--cCtqr",BASELINE:dA},dx={MIN:"alignment_view_v4_ui3--primaryMin--Q8O6a",CENTER:"alignment_view_v4_ui3--primaryCenter--RzFRC",MAX:"alignment_view_v4_ui3--primaryMax--eMvqL",SPACE_EVENLY:"",SPACE_BETWEEN:""};function dD({onClick:e}){return l.createElement("button",{className:"alignment_view_v4_ui3--baselineControls--xazGW alignment_view_v4_ui3--_centered--MV2if","data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},l.createElement("div",{className:"alignment_view_v4_ui3--baselineControlLine--6BBmA"}))}function dF({spaceBetween:e,stackMode:t,baselineAlign:n,onMouseMove:r,onMouseOut:i,onClick:a,onDoubleClick:s}){let o=dI({stackMode:t,baselineAlign:n,spaceBetween:e,isUi3:(0,ti.R)()});return l.createElement("div",{className:"alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",onMouseMove:r,onMouseOut:i,onClick:void 0,onMouseUp:a,onDoubleClick:s},"HORIZONTAL"===t&&n&&e?l.createElement(dV,{tooltips:o}):o.map((n,r)=>{let i=r%3,a=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(a=i,i=0),l.createElement(dK,{key:r,x:i,y:a,..."string"==typeof n?{tooltip:n}:n})}))}function dV({tooltips:e}){let t=(0,l.useId)(),n=e[0];return null==n?null:l.createElement(l.Fragment,null,l.createElement("div",{"data-tooltip-proxy-element-id":t}),l.createElement(dK,{id:t,x:1,y:1,..."string"==typeof n?{tooltip:n}:n}),l.createElement("div",{"data-tooltip-proxy-element-id":t}))}function dK({id:e,x:t,y:n,tooltip:r,below:i}){return l.createElement("div",{id:e,"data-x":t,"data-y":n,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-above":!i||void 0})}function dU(){return l.createElement("div",{className:"alignment_view_v4_ui3--dotGrid--N6RPe alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},Array.from({length:9},(e,t)=>l.createElement("div",{className:"alignment_view_v4_ui3--dotGridCell--r7m5y",key:t},l.createElement("div",{key:t,className:"alignment_view_v4_ui3--dot--d5NQx"}))))}function dH(e){let{x:t,y:n}=e.dataset;return[parseInt(t),parseInt(n)]}var dB=n(232531),dG=n(876618);let dY=["MIN","CENTER","MAX"];function dW({className:e,recordingKey:t}){let n=(0,lj.kl)("stackMode"),a=(0,lj.kl)("stackWrap"),[o,c]=(0,lj.lJ)("stackPrimaryAlignItems"),[p,d]=(0,lj.lJ)("stackCounterAlignItems"),[u,E]=(0,l.useState)(void 0),[_,y]=(0,l.useState)(void 0),g=(0,dG.sR)(),P=(0,dG.uV)(),S=(0,o6.am)(),b=(0,ti.R)(),f=(0,r.d4)(ip.qd),v=(0,dm.rO)(o),w="BASELINE"===p,T=(0,l.useCallback)((e,t)=>{if(null==e||null==t){E(void 0),y(void 0);return}let l=dQ(e,t,n,v),r=dz(e,t,n,w);E(l),y(r)},[n,w,v,E,y]),I=h.rf(t,"click",(0,l.useCallback)(e=>{let t=u,n=_;e&&e.__interactionTest&&(t=e.primaryAlignItems,n=e.counterAlignItems),t&&n&&(v||c(t,rF.zk.NO),d(n),S("Autolayout alignment grid used",{nodeIds:f}))},[u,_,v,d,S,c,f]),{recordMetadata:()=>({primaryAlignItems:u,counterAlignItems:_}),playbackMetadata:e=>({...e,__interactionTest:!0})}),{clearVariableConsumption:k}=(0,dB.O)("STACK_SPACING",s.rXF.FLOAT),N=(0,l.useCallback)((e,t)=>{P(void 0===t||t,e,rF.zk.NO),k()},[P,k]),C=(0,l.useCallback)((e,t)=>{if(v){P(!1,"alignment double click",rF.zk.NO);let l=dQ(e,t,n,!1),r=dz(e,t,n,w);E(l),y(r),c(l,rF.zk.NO),d(r),S("Autolayout spacing mode changed",{mode:l,doubleClick:!0})}else N("alignment double click"),d(dz(e,t,n,w))},[N,w,v,d,c,P,n,S]),A=(0,l.useCallback)(()=>{d("CENTER"),S("Disable baseline alignment",{source:"alignment grid"})},[d,S]),O=h.v_(t,"keydown",(0,l.useCallback)(e=>{function t(e){"HORIZONTAL"===n?c(e):d(e)}function l(e){"VERTICAL"===n?c(e):d(e)}function r(e,t){if((0,z.gl)(e))return"CENTER";let n=dY.indexOf(e);if(-1===n)return null;let l=(0,i.clamp)(n+t,0,dY.length-1);return dY[l]}let a="HORIZONTAL"===n?o:p,s="VERTICAL"===n?o:p;switch(e.keyCode){case m.Uz.ESCAPE:case m.Uz.ENTER:e.currentTarget.blur();break;case m.Uz.UP_ARROW:{let e=r(s,-1);e&&l(e);break}case m.Uz.DOWN_ARROW:{let e=r(s,1);e&&l(e);break}case m.Uz.LEFT_ARROW:{let e=r(a,-1);e&&t(e);break}case m.Uz.RIGHT_ARROW:{let e=r(a,1);e&&t(e);break}case m.Uz.B:"HORIZONTAL"===n&&g("BASELINE"!==p,"alignment keyboard");break;case m.Uz.X:N("alignment keyboard",!(0,dm.rO)(o));break;case m.Uz.W:l("MIN");break;case m.Uz.A:t("MIN");break;case m.Uz.S:l("MAX");break;case m.Uz.D:t("MAX");break;case m.Uz.V:l("CENTER");break;case m.Uz.H:t("CENTER");break;default:(0,du.jr)(e,du.W0.YES,du.VA.YES);return}e.preventDefault()},[N,p,o,g,d,c,n])),M=b?l.createElement(dO,{className:e,stackMode:n,stackWrap:a,stackPrimaryAlignItems:o,stackCounterAlignItems:p,onHover:T,onClick:I,onDoubleClick:C,onKeyDown:O,onRemoveBaseline:A,counterHover:_,primaryHover:u}):l.createElement(dy,{className:e,stackMode:n,stackWrap:a,stackPrimaryAlignItems:o,stackCounterAlignItems:p,onHover:T,onClick:I,onDoubleClick:C,onKeyDown:O,onRemoveBaseline:A,counterHover:_,primaryHover:u});return l.createElement(nz.E,{name:"alignment_view"},M)}function dQ(e,t,n,l){return l?(0,u.kc)().ce_stack_justify_space_between?"SPACE_BETWEEN":"SPACE_EVENLY":dY["VERTICAL"===n?t:e]}function dz(e,t,n,l){return l?"BASELINE":dY["VERTICAL"===n?e:t]}var d$=n(630978),dX=n(178466),dj=n(791489),dJ=n(931828),dZ=n(309798),dq=n(579623),d0=n(280106),d1=n(801161);function d5({onClick:e,onOpen:t,modalKey:n,...i}){let a=(0,r.wA)(),s=(0,aG.Xo)(),o=(0,l.useRef)(null),c=(0,ti.R)(),p=s?.id===n,d=(0,tG.ZC)(p),u=p?new eI.Mi(s.initialX,s.initialY):null,m=(0,l.useRef)(i.onClose);m.current=i.onClose,(0,l.useEffect)(()=>{d&&!p&&m.current?.()},[p,d]),(0,l.useEffect)(()=>()=>m.current?.(),[]);let E=(0,l.useCallback)(()=>{p&&(a(K.XE()),Q.Y5.deselectProperty())},[a,p]),_=(0,l.useCallback)(()=>{if(p)return;e||t?.();let{top:l}=eH.findDOMNode(o.current).getBoundingClientRect();a(K.u1({id:n,initialX:eZ.qo,initialY:l}))},[a,p,n,e,t]);(0,l.useEffect)(()=>{null!=i.open&&(i.open?_():E())},[E,_,i.open]);let y=l.createElement(tr.YW,{ref:o,svg:i.svg,fallbackSvg:i.fallbackSvg,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":i.tooltip,onMouseMove:()=>{p&&a(d1.jD())},onMouseDown:e??(e=>{e.stopPropagation(),p?E():_()}),recordingKey:h.Pt(i,"trigger"),selected:p,className:i.buttonClassName},c?i.ui3Icon:void 0),g=i.buttonInteractableName?l.createElement(nz.E,{name:i.buttonInteractableName},y):y,P=p?l.createElement(eN.vx,{title:i.title,initialPosition:u,initialConstraints:{x:"right",y:"top"},headerSize:"small",onClose:E,recordingKey:h.Pt(i,"modal")},i.children):null,S=P&&i.modalTrackableName?l.createElement(tz.p,{name:"stack_layout_details_modal"},P):P;return l.createElement(l.Fragment,null,g,S)}var d4=n(63666),d3=n(70964);let d6="stack_layout_details_preview--stroke--tWkNh",d2="stack_layout_details_preview--strokeLight--RsPk7",d7="stack_layout_details_preview--fill--V74cf",d8="stack_layout_details_preview--fillWhite--uTjlG",d9="stack_layout_details_preview--fillTertiary--xuwqQ",ue={reverseStackingOrder:function({enabled:e}){let t=[l.createElement("g",{key:"1",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:d8,x:"67",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:d7,d:"M88.4893 53.9091V67H87.294V55.1619H87.2173L84.1491 57.201V55.9609L87.2429 53.9091H88.4893Z"}),l.createElement("rect",{className:d6,x:"66.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),l.createElement("g",{key:"2",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:d8,x:"99",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:d7,d:"M114.964 67V66.1243L119.241 61.3175C119.799 60.6868 120.248 60.1477 120.589 59.7003C120.93 59.2528 121.177 58.8395 121.331 58.4602C121.488 58.081 121.567 57.6868 121.567 57.2777C121.567 56.7791 121.45 56.3445 121.216 55.9737C120.986 55.5987 120.668 55.3068 120.263 55.098C119.858 54.8892 119.402 54.7848 118.895 54.7848C118.358 54.7848 117.888 54.8999 117.483 55.13C117.082 55.3601 116.771 55.6754 116.549 56.076C116.328 56.4766 116.217 56.9368 116.217 57.4567H115.073C115.073 56.7322 115.239 56.0909 115.571 55.5327C115.908 54.9702 116.366 54.5291 116.946 54.2095C117.53 53.8899 118.19 53.7301 118.927 53.7301C119.656 53.7301 120.304 53.8878 120.87 54.2031C121.437 54.5142 121.883 54.9382 122.206 55.4751C122.53 56.0121 122.692 56.6129 122.692 57.2777C122.692 57.7592 122.607 58.2259 122.437 58.6776C122.27 59.1293 121.983 59.6321 121.574 60.1861C121.165 60.7401 120.598 61.4176 119.873 62.2188L116.626 65.843V65.9261H123.101V67H114.964Z"}),l.createElement("rect",{className:d6,x:"98.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),l.createElement("g",{key:"3",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:d8,x:"131",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:d7,d:"M151.048 67.179C150.243 67.179 149.522 67.0341 148.887 66.7443C148.252 66.4503 147.75 66.0433 147.379 65.5234C147.008 65.0036 146.812 64.4048 146.791 63.7273H147.999C148.02 64.2045 148.167 64.6222 148.44 64.9801C148.713 65.3338 149.075 65.6108 149.527 65.8111C149.978 66.0071 150.481 66.1051 151.035 66.1051C151.64 66.1051 152.173 65.9922 152.633 65.7663C153.098 65.5405 153.46 65.2315 153.72 64.8395C153.984 64.4432 154.116 63.9957 154.116 63.4972C154.116 62.9687 153.982 62.5021 153.713 62.0973C153.445 61.6925 153.059 61.3771 152.556 61.1513C152.058 60.9254 151.461 60.8125 150.767 60.8125H150V59.7386H150.767C151.333 59.7386 151.834 59.6364 152.269 59.4318C152.708 59.223 153.053 58.9311 153.304 58.5561C153.556 58.1811 153.681 57.7401 153.681 57.233C153.681 56.7514 153.573 56.3274 153.355 55.9609C153.138 55.5945 152.831 55.3068 152.435 55.098C152.043 54.8892 151.585 54.7848 151.061 54.7848C150.554 54.7848 150.089 54.8828 149.667 55.0788C149.245 55.2749 148.904 55.5518 148.645 55.9098C148.389 56.2678 148.252 56.6918 148.235 57.1818H147.078C147.096 56.5 147.283 55.9013 147.641 55.3857C148.003 54.8658 148.483 54.4609 149.079 54.1712C149.68 53.8771 150.345 53.7301 151.074 53.7301C151.845 53.7301 152.512 53.8878 153.074 54.2031C153.637 54.5185 154.071 54.9382 154.378 55.4624C154.689 55.9822 154.845 56.5554 154.845 57.1818C154.845 57.9276 154.642 58.5668 154.238 59.0994C153.833 59.6278 153.287 59.9943 152.601 60.1989V60.282C153.436 60.4482 154.093 60.8189 154.57 61.3942C155.051 61.9652 155.292 62.6662 155.292 63.4972C155.292 64.196 155.109 64.8246 154.743 65.3828C154.376 65.9368 153.873 66.3757 153.234 66.6996C152.599 67.0192 151.87 67.179 151.048 67.179Z"}),l.createElement("rect",{className:d6,x:"130.5",y:"39.5",width:"41",height:"41",rx:"20.5"}))];return e&&t.reverse(),l.createElement("svg",{width:"240",height:"120",fill:"none"},t,l.createElement("rect",{className:d2,x:"58.5",y:"28.5",width:"123",height:"63",rx:"3.5",strokeDasharray:"4 2"}),l.createElement("defs",null,l.createElement("filter",{id:"reverse-stacking-order-filter",x:"-1px",y:"-1px",width:"44",height:"42",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",{dx:"2"}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),l.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1112_23748"}),l.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1112_23748",result:"shape"}))))},alignToBaseline:function(){return l.createElement("svg",{width:240,height:120,fill:"none"},l.createElement("path",{className:p()("stack_layout_details_preview--alignToBaselineLine--Erw5t","stack_layout_details_preview--strokeAssistive--GgFOd"),d:"M38 60.5h164"}),l.createElement("g",{className:"stack_layout_details_preview--alignToBaselineA--kQYyh"},l.createElement("path",{className:d7,d:"M63.8516 67L65.2514 63.0561H70.7486L72.1484 67H73.4013L68.6392 53.9091H67.3608L62.5987 67H63.8516ZM65.6349 61.9822L67.9553 55.4624H68.0447L70.3651 61.9822H65.6349Z"}),l.createElement("rect",{className:d6,x:46.5,y:38.5,width:43,height:43,rx:1.5})),l.createElement("rect",{className:p()("stack_layout_details_preview--alignToBaselineEmpty--Z-l7O",d6),x:98.5,y:38.5,width:43,height:43,rx:1.5}),l.createElement("g",{className:"stack_layout_details_preview--alignToBaselineG--YayQ-"},l.createElement("path",{className:d7,d:"M171.843 68.8864C174.169 68.8864 175.895 67.7486 175.895 65.2557V55.1818H174.783V57.0547H174.668C174.265 56.1726 173.453 55.0476 171.651 55.0476C169.222 55.0476 167.592 57.0803 167.592 60.0653C167.592 63.076 169.279 64.8977 171.632 64.8977C173.396 64.8977 174.259 63.875 174.649 62.9737H174.751V65.1854C174.751 67.0135 173.581 67.8636 171.843 67.8636C170.161 67.8636 169.356 67.0518 168.941 66.304L168.007 66.9176C168.583 68.0426 169.835 68.8864 171.843 68.8864ZM171.766 63.8558C169.816 63.8558 168.736 62.2962 168.736 60.0462C168.736 57.8345 169.797 56.0831 171.766 56.0831C173.69 56.0831 174.77 57.745 174.77 60.0462C174.77 62.4176 173.658 63.8558 171.766 63.8558Z"}),l.createElement("rect",{className:d6,x:150.5,y:38.5,width:43,height:43,rx:1.5})),l.createElement("rect",{className:p()("stack_layout_details_preview--alignToBaselineOutline--YlRIY",d2),x:38.5,y:30.5,width:163,height:59,rx:3.5,strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))},bordersTakeSpace:function(){return l.createElement("svg",{width:240,height:120,fill:"none"},l.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceLeft--WTfPZ"},l.createElement("rect",{className:d9,x:"43",y:"37",width:"48",height:"48",rx:"2"}),l.createElement("rect",{className:d8,x:"49",y:"43",width:"36",height:"36",rx:"2"})),l.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceRight--QCBF1"},l.createElement("rect",{className:d9,x:"98",y:"37",width:"99",height:"48",rx:"2"}),l.createElement("rect",{className:d8,x:"104",y:"43",width:"87",height:"36",rx:"2"})),l.createElement("rect",{className:p()("stack_layout_details_preview--bordersTakeSpaceOutline--Xq42w",d2),x:"48.5",y:"42.5",width:"143",height:"37",rx:"1.5",strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))}};function ut({setting:e,enabled:t}){let n=e?ue[e]:null;return l.createElement("div",{className:p()("stack_layout_details_preview--preview---r9k-",{"stack_layout_details_preview--active--yCMB3":t}),"data-non-interactive":!0},n?l.createElement(n,{enabled:t}):l.createElement("div",{className:"stack_layout_details_preview--previewText--0NBYb"},(0,x.tx)("fullscreen.properties_panel.stack_panel.preview")))}let un="stack_layout_details_modal--dropdownControl--PRPD5",ul="stack_layout_details_modal--onboardingBody--SQp9T",ur="stack_layout_details_modal--input--h2Yc7",ui="stack_layout_details_modal--chevron--tW9wo";var ua=n(769502);let us="seen_stack_spacing_auto_onboarding";function uo(e){let[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)({enabled:!1}),a=(0,ti.R)()?(0,x.t)("fullscreen.properties_panel.section_autoLayout.settings"):(0,x.t)("fullscreen.properties_panel.stack_panel.advanced_layout");return l.createElement(l.Fragment,null,l.createElement(d5,{title:a,tooltip:a,modalKey:"LAYOUT_DETAILS_PICKER",buttonInteractableName:"open_stack_layout_details_modal_button",modalTrackableName:"stack_layout_details_modal",svg:s3.A,ui3Icon:l.createElement(nd.A,null),buttonClassName:ua.Sj,recordingKey:e.recordingKey,onClose:()=>{setTimeout(()=>{n(!0)},250)}},l.createElement(ut,{setting:r.setting,enabled:r.enabled}),l.createElement("div",{className:"stack_layout_details_modal--controls--SFjhS"},l.createElement(ud,{updatePreview:i,recordingKey:e.recordingKey}),l.createElement(uc,{updatePreview:i,recordingKey:e.recordingKey}),l.createElement(up,{updatePreview:i,recordingKey:e.recordingKey}))),t&&l.createElement(uh,{onDismiss:()=>n(!1)}))}function uc({updatePreview:e,recordingKey:t}){let n=(0,r.wA)(),i=(0,nS.Um)(),[a,s]=(0,lj.lJ)("stackReverseZIndex"),o=(0,o6.am)(),c=(0,r.d4)(ip.qd),p=(0,tj.GS)(),d=dX.Gq()?.getPrimaryLocale(!0)===dj.Xn?120:180,u=!0===a;return l.createElement(nz.E,{name:"stacking_order_control"},l.createElement(dq.L,{label:(0,x.t)("fullscreen.properties_panel.stack_panel.canvas_stacking_order"),onMouseEnter:()=>e({setting:"reverseStackingOrder",enabled:u}),onMouseLeave:()=>e({enabled:!1})},l.createElement(ls.l6,{id:"reverse-stacking-order-select",dispatch:n,className:un,inputClassName:ur,chevronClassName:ui,textAlign:p?void 0:"right",property:a,formatter:uu,onChange:e=>{s(e),o(e?"Enable reverse zIndex":"Disable reverse zIndex",{nodeIds:c})},recordingKey:h.Pt(t,"reverseStackingOrder"),dropdownShown:i,dropdownAlignment:"right",dropdownWidth:d,onOptionFocus:t=>e({setting:null!=t?"reverseStackingOrder":void 0,enabled:!!t})},l.createElement(ls.c$,{value:!0}),l.createElement(ls.c$,{value:!1}))))}function up({updatePreview:e,recordingKey:t}){let n=(0,lj.kl)("stackMode"),r="BASELINE"===(0,lj.kl)("stackCounterAlignItems"),i="HORIZONTAL"!==n,a=(0,dG.sR)();return l.createElement(nz.E,{name:"baseline_alignment_control"},l.createElement(d0.k,{label:(0,x.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),recordingKey:h.Pt(t,"alignToBaseline"),property:r,disabled:i,onChange:t=>{a(t,"modal"),e({setting:"alignToBaseline",enabled:t})},onFocus:t=>{e({setting:"alignToBaseline",enabled:r})},onHover:(t,n)=>{e({setting:"ENTER"===n?"alignToBaseline":void 0,enabled:t})},"data-tooltip":i?(0,x.t)("fullscreen.properties_panel.stack_panel.only_applicable_for_horizontal_layout"):void 0,"data-tooltip-type":eJ.Ib.TEXT}))}function ud({updatePreview:e,recordingKey:t}){let n=(0,r.wA)(),i=(0,nS.Um)(),[a,s]=(0,lj.lJ)("bordersTakeSpace"),o=(0,o6.am)(),c=(0,r.d4)(ip.qd),p=(0,tj.GS)(),d=!0===a;return l.createElement(nz.E,{name:"borders_take_space_control"},l.createElement(dq.L,{label:(0,x.t)("fullscreen.properties_panel.stack_panel.borders_take_space"),onMouseEnter:()=>e({setting:"bordersTakeSpace",enabled:d}),onMouseLeave:()=>e({enabled:!1})},l.createElement(ls.l6,{id:"borders-take-space-select",dispatch:n,className:un,inputClassName:ur,chevronClassName:ui,dropdownWidth:168,textAlign:p?void 0:"right",property:d,formatter:um,onChange:e=>{s(e),o("change_borders_take_space",{enabled:e,source:"modal",nodeIds:c})},recordingKey:h.Pt(t,"bordersTakeSpace"),dropdownShown:i,onOptionFocus:t=>e({setting:null!=t?"bordersTakeSpace":void 0,enabled:!!t})},l.createElement(ls.c$,{value:!0}),l.createElement(ls.c$,{value:!1}))))}let uu={format:e=>e?(0,x.t)("fullscreen.properties_panel.stack_panel.first_on_top"):(0,x.t)("fullscreen.properties_panel.stack_panel.last_on_top")},um={format:e=>e?(0,x.t)("fullscreen.properties_panel.stack_panel.included"):(0,x.t)("fullscreen.properties_panel.stack_panel.excluded"),formatExtended:e=>({text:e?(0,x.t)("fullscreen.properties_panel.stack_panel.included_in_layout"):(0,x.t)("fullscreen.properties_panel.stack_panel.excluded_from_layout")})};function uh({onDismiss:e}){let t=(0,r.wA)();return(0,dZ.f)(us)?null:l.createElement(d4.OA,{targetKey:"stack-spacing-input",shouldNotWrapInParagraphTag:!0,dismissModal:()=>{t(dJ.b({[us]:!0})),e()},background:"light",width:268,title:(0,x.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_title"),secondaryCtaText:l.createElement("a",{href:"https://help.figma.com/hc/articles/360040451373-Explore-auto-layout-properties#spacing-between",target:"_blank",style:{textDecoration:"none"}},(0,x.tx)("general.learn_more")),onClickSecondaryCta:l7.lQ,ctaText:(0,x.tx)("general.got_it"),onClickPrimaryCta:e,arrowPosition:eN.F_.RIGHT_TITLE},l.createElement(d3.Gv,{containerClassName:"stack_layout_details_modal--onboardingImg--4Uak-",src:"https://static.figma.com/uploads/94241d15e9d47a0c73734ae71850674f78cd4ab0"}),l.createElement("p",{className:ul},(0,x.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_body1",{gapBetweenItems:l.createElement("strong",null,(0,x.tx)("fullscreen.properties_panel.stack_panel.gap_items"))})),l.createElement("p",{className:ul},(0,x.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_body2",{auto:l.createElement("strong",null,(0,x.tx)("fullscreen.properties_panel.stack_panel.auto"))})))}var uE=n(695342),u_=n(729943),uy=n(253781);function ug(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5M6 7.5A1.5 1.5 0 0 1 7.5 6h2A1.5 1.5 0 0 1 11 7.5v2A1.5 1.5 0 0 1 9.5 11h-2A1.5 1.5 0 0 1 6 9.5zm8.5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5m-1.5.5A1.5 1.5 0 0 1 14.5 6h2A1.5 1.5 0 0 1 18 7.5v2a1.5 1.5 0 0 1-1.5 1.5h-2A1.5 1.5 0 0 1 13 9.5zM9.5 14h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5m-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034z",clipRule:"evenodd"}))}function uP(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5m-9-1A1.5 1.5 0 0 0 6 7.5v2A1.5 1.5 0 0 0 7.5 11h9A1.5 1.5 0 0 0 18 9.5v-2A1.5 1.5 0 0 0 16.5 6zm2 8h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5m-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034z",clipRule:"evenodd"}))}function uS(e){let{propertiesPanelShouldShowRemoveAutoLayout:t}=uM(),n=t?(0,x.t)("fullscreen.properties_panel.stack_panel.remove_auto_layout"):(0,x.t)("fullscreen.properties_panel.stack_panel.use_auto_layout"),{actionEnabledStackSelection:r,actionEnabledUnstackSelection:i}=uM(),a=t?i:r,s=t?"unstack-selection":"stack-selection",o=(0,l.useCallback)(()=>{Q.Y5.triggerActionInUserEditScope(s,{source:"panel"})},[s]);return l.createElement(tr.YW,{"aria-label":n,"data-tooltip":n,"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip-shortcut-key":s,selected:t,showTooltipWhenSelectedIsTrue:!0,disabled:!a,onClick:o,recordingKey:h.Pt(e.recordingKey,t?"removeButton":"addButton")},l.createElement(ub,null))}function ub(){let e=(0,lj.kl)("stackMode"),t=(0,lj.kl)("stackWrap"),{propertiesPanelShouldShowRemoveAutoLayout:n}=uM();if(!n)return l.createElement(u_.Q,null);if((0,z.gl)(e)||null==e||(0,z.gl)(t))return l.createElement(uy.v,null);if("WRAP"===t)return l.createElement(ug,null);switch(e){case"NONE":case"HORIZONTAL":return l.createElement(uy.v,null);case"VERTICAL":return l.createElement(uP,null)}}var uf=n(258890),uv=n(996620),uw=n(689606),uT=n(957069),uI=n(733982);function uk(e){return l.createElement(tz.p,{name:"stack_panel"},l.createElement(uN,{...e}))}let uN=l.memo(e=>{let{version:t}=(0,eW.DP)();return"ui3"===t?l.createElement(uA,{...e}):l.createElement(uC,{...e})});function uC(e){let{showMigrationUi:t,actionEnabledStackSelection:n,actionEnabledUnstackSelection:r,propertiesPanelShouldShowRemoveAutoLayout:i,wrappingEnabled:a}=uM();return l.createElement(e3.Zk,null,l.createElement(sX,{title:(0,x.tx)("fullscreen.properties_panel.stack_panel.auto_layout"),addProperty:()=>{Q.Y5.triggerActionInUserEditScope("stack-selection",{source:"panel"})},removeProperty:()=>{Q.Y5.triggerActionInUserEditScope("unstack-selection",{source:"panel"})},contentsVisibleOrMixed:e.onlyStacksSelected,showButton:i?"-":"+",minusDisabled:!r,plusDisabled:!n,recordingKey:e.recordingKey,dataTestId:"open-stack-panel"},t?l.createElement(uL,null):l.createElement(l.Fragment,null,l.createElement(e3.fI,{className:a?ua.TE:ua.mm},l.createElement(ux,{recordingKey:e.recordingKey}),l.createElement("div",{className:ua.T$},l.createElement(dW,{recordingKey:h.Pt(e,"alignment")})),l.createElement(uo,{recordingKey:h.Pt(e,"stackLayoutDetails")}),l.createElement(uD,{recordingKey:e.recordingKey}),a&&l.createElement(uF,{recordingKey:e.recordingKey})),l.createElement(uV,{recordingKey:e.recordingKey}))))}function uA(e){let t=e.onlyStacksSelected?(0,x.tx)("fullscreen.properties_panel.stack_panel.auto_layout"):(0,x.tx)("fullscreen.properties_panel.stack_panel.layout"),n=(0,lt.J2)(s.Ez5.propertiesPanelState().shownPropertiesPanels),i=(0,r.d4)(e=>e.mirror.selectionProperties),a=(0,oe.aW)(n,void 0,i,void 0),o=(0,r.d4)(e=>!((0,I.P)(e.selectedView)&&!(0,v.Yh)(e.mirror.appModel,"resize-to-fit")));return l.createElement(e3.Zk,{"data-onboarding-key":dp.W},l.createElement(ld.Wv,{titleTx:t},o&&l.createElement(aM.hw,{recordingKey:h.Pt(e,"frameFitButton")}),a?l.createElement(uS,{recordingKey:e.recordingKey}):void 0),l.createElement(uO,{...e}))}function uO({onlyStacksSelected:e,onlyShowResizingRow:t,recordingKey:n}){let{showMigrationUi:r,wrappingEnabled:i,textAutoResize:a,missingFont:o}=uM(),c=(0,ry.Df)(),p=(0,ao.o3)(ao.nt.ui3ClipContentControl),d=(0,l.useRef)(null),u=(0,lj.kl)("nodesAreAllInsideStacks"),m=(0,lt.J2)(s.Ez5.propertiesPanelState().enabledTypePanelControls),E=!!Q.Y5?.isFontListLoaded(),_=(0,lj.kl)("numSelectedByType"),y=(0,Y.vx)(_,"TEXT"),g="transformPanel",P=l.createElement(l.Fragment,null,l.createElement(aZ.Ws,{recordingKey:g,forwardedRef:d}),l.createElement(da.J,{visible:!!(e||u),widthHeightRowRef:d})),S=c.fixedFrameOptions&&l.createElement(dr.u,{recordingKey:n}),b=y&&l.createElement("div",{className:ua.Z2},l.createElement(ds.f,{disabled:!E||!!o,enabledTypePanelControls:m,textAutoResize:a,recordingKey:n})),f=l.createElement(di.e,{recordingKey:g});return!e||t?l.createElement(l.Fragment,null,P,b,!p&&S,f,p&&S):l.createElement(l.Fragment,null,r?l.createElement(uL,null):l.createElement(l.Fragment,null,P,l.createElement(el.sY,{topLeftInput:l.createElement(ux,{recordingKey:n}),rightInput:l.createElement(dW,{recordingKey:h.Pt(n,"alignment")}),leftLabel:i?(0,x.tx)("fullscreen.properties_panel.section_autoLayout.label_direction"):(0,x.tx)("fullscreen.properties_panel.section_autoLayout.label_direction_and_gap"),rightLabel:(0,x.tx)("fullscreen.properties_panel.section_autoLayout.label_alignment"),bottomLeftInput:i?null:l.createElement(uD,{recordingKey:n}),topIcon:l.createElement(uo,{recordingKey:h.Pt(n,"stackLayoutDetails")}),bottomIcon:null}),i?l.createElement(el.fn,{leftInput:l.createElement(uD,{recordingKey:n}),rightInput:l.createElement(uF,{recordingKey:n}),icon:null,leftLabel:(0,x.tx)("fullscreen.properties_panel.section_autoLayout.label_gap"),rightLabel:null}):null,l.createElement(uV,{recordingKey:n}),!p&&l.createElement(dr.u,{recordingKey:n}),f,p&&l.createElement(dr.u,{recordingKey:n})))}function uM(){return(0,ij.R)(e=>{let{mirror:{appModel:t,selectionProperties:{propertiesPanelShouldShowRemoveAutoLayout:n,containsStacksNeedingAlignmentMigration:l,stackMode:r,stackWrap:i,textAutoResize:a,missingFont:s}}}=e;return{showMigrationUi:l,actionEnabledStackSelection:(0,v.Yh)(t,"stack-selection"),actionEnabledMultiStackSelection:(0,v.Yh)(t,"run-multi-stack-auto-layout"),actionEnabledUnstackSelection:(0,v.Yh)(t,"unstack-selection"),propertiesPanelShouldShowRemoveAutoLayout:n,wrappingEnabled:("HORIZONTAL"===r||(0,z.gl)(r))&&("WRAP"===i||(0,z.gl)(i)),textAutoResize:a,missingFont:s}})}let uR=!1;function uL(){let e;let t=(0,o6.am)(),[n,r]=(0,l.useState)(!1),{isOrInInstance:i,containsComponents:a}=(0,ij.R)(e=>{let{isInstanceSelected:t,isInstanceSublayerSelected:n,numSelectedByType:l}=e.mirror.selectionProperties;return{isOrInInstance:!!(t||n),containsComponents:!!l&&!!l.SYMBOL}});(0,l.useEffect)(()=>{uR||(t("stack_v2_migration_info_shown"),uR=!0)},[t]),(0,tJ.f4)(()=>{r(!1)});let o=(0,l.useCallback)(()=>{let e=s.AlE.getActiveCanvas();es.l7.user("update-stack-to-alv3",()=>{s.Qa7.updateStackToAutoLayoutV3(e,s.Ez5.bigNudgeAmount())}),Q.Y5.triggerAction("commit"),r(!0),t("stack_v2_migration_updated")},[t]),c=(0,l.useCallback)(e=>{Q.Y5.triggerActionInUserEditScope("undo"),r(!1)},[]);if(n)return l.createElement(e3.fI,{className:ua.A5},l.createElement("span",{className:ua.Yv},(0,x.tx)("fullscreen.properties_panel.stack_panel.auto_layout_updated")),l.createElement("a",{className:ua._V,onClick:c},(0,x.tx)("fullscreen.properties_panel.stack_panel.undo")));let p=s.AlE.getActiveCanvas(),d=s.Qa7.isOrInInstanceWithDeprecatedAlignmentOverride(p);return e=i?d?(0,x.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance_overrides"):(0,x.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance"):a?(0,x.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_components"):(0,x.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version"),l.createElement(e3.fI,{className:ua.A5},l.createElement("div",{className:ua.Yv},(0,x.tx)("fullscreen.properties_panel.stack_panel.new_auto_layout_version_available"),l.createElement(te.B,{className:ua.zp,svg:uI.A,"data-tooltip-type":eJ.Ib.SPECIAL,"data-tooltip":dd,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-text":e})),l.createElement(oi.nR,{onClick:o,className:ua.RM,type:"button",disabled:i&&!d},(0,x.tx)("fullscreen.properties_panel.stack_panel.update")))}function ux(e){let t=(0,r2.Zr)("unstack-selection"),n=(0,lj.kl)("stackMode"),i=(0,lj.kl)("stackWrap"),{version:a}=(0,eW.DP)(),o=(0,o6.am)(),c=(0,r.d4)(ip.qd),p="ui2"===a?ua.N:ua.O_;return l.createElement(nz.E,{name:"stack_mode_control"},l.createElement("div",{className:p,"data-onboarding-key":"stack-mode-control"},l.createElement(oF.I,{property:"HORIZONTAL"===n&&"WRAP"===i?"WRAP":n,onChange:e=>{o("Stack Mode Changed",{stackMode:e,nodeIds:c}),es.l7.user("set-stack-mode",()=>s.Qa7.setStackModeAndFlipPrimaryAndCounterAxisValues(e))},recordingKey:h.Pt(e,"stackMode"),disabled:!t},l.createElement(oF.Y,{svg:uv.A,value:"VERTICAL",tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.vertical_direction")}),l.createElement(oF.Y,{svg:uf.A,value:"HORIZONTAL",tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.horizontal_direction")}),l.createElement(oF.Y,{svg:uT.A,value:"WRAP",tooltip:(0,x.t)("fullscreen.properties_panel.stack_panel.wrap")}))))}function uD(e){let t=(0,dm.Wx)(),n=(0,dm.Y9)(),{version:r}=(0,eW.DP)(),i="ui2"===r?ua.Kz:void 0;return l.createElement(nz.E,{name:"stack_spacing_control"},l.createElement(lo.KI,{outerClassName:i,onFocus:()=>t(s.RN9.SPACING,!0),onBlur:()=>t(s.RN9.SPACING,!1),onScrubBegin:()=>t(s.RN9.SPACING,!0),onScrubEnd:()=>t(s.RN9.SPACING,!1),onMouseEnter:()=>n(s.RN9.SPACING,!0),onMouseLeave:()=>n(s.RN9.SPACING,!1),onNudge:()=>s.glU.temporarilyHideOverlay(s.hJs.SELECTION),recordingKey:h.Pt(e,"stackSpacing"),source:"panel",onboardingKey:"stack-spacing-input"}))}function uF(e){let t=(0,dm.Wx)(),n=(0,dm.Y9)(),{version:r}=(0,eW.DP)(),i="ui3"===r?void 0:ua.UN;return l.createElement(nz.E,{name:"stack_counter_spacing_input"},l.createElement(d$.q,{outerClassName:i,onFocus:()=>t(s.RN9.COUNTER_SPACING,!0),onBlur:()=>t(s.RN9.COUNTER_SPACING,!1),onScrubBegin:()=>t(s.RN9.COUNTER_SPACING,!0),onScrubEnd:()=>t(s.RN9.COUNTER_SPACING,!1),onMouseEnter:()=>n(s.RN9.COUNTER_SPACING,!0),onMouseLeave:()=>n(s.RN9.COUNTER_SPACING,!1),onNudge:()=>s.glU.temporarilyHideOverlay(s.hJs.SELECTION),recordingKey:h.Pt(e,"stackCounterSpacing"),inputTestId:"stack-counter-spacing",source:"panel"}))}function uV({recordingKey:e}){let[t,n]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),o=(0,uE.U)(),{version:c}=(0,eW.DP)();(0,tJ.f4)(e=>{let{stackHorizontalPadding:t,stackPaddingRight:l,stackVerticalPadding:r,stackPaddingBottom:i}=e.mirror.selectionProperties,a=(0,z.q)(t,l),s=(0,z.q)(r,i);n((0,z.gl)(a)||(0,z.gl)(s)||o)});let p=(0,o6.am)(),d=(0,r.d4)(ip.qd),u=(0,ti.R)(),E=()=>{n(!t),s.Qa7.setFocusStackPanelInput(s.RN9.PADDING_ALL,!1),p(t?"Disable autolayout independent padding":"Enable autolayout independent padding",{nodeIds:d})},_=u?l.createElement(nQ.d,{onClick:E,toggled:t,actionOnPointerDown:!0,"aria-label":(0,x.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:h.Pt(e,"showAllPaddingControls"),htmlAttributes:{"data-tooltip":(0,x.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip-type":eJ.Ib.TEXT,"data-test-id":"stack-padding-toggle"}},l.createElement(dl,null)):l.createElement(c$.m,{"data-tooltip-type":eJ.Ib.TEXT,"aria-label":(0,x.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip":(0,x.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:h.Pt(e,"showAllPaddingControls"),"data-test-id":"stack-padding-toggle",onMouseDown:E,svg:uw.A,toggled:t,className:ua.NC});return l.createElement(nz.E,{name:"stack_padding_controls"},l.createElement("ui3"===c?uU:uK,{showAllPaddingControls:t,showSinglePaddingControl:i,setShowSinglePaddingControl:a,recordingKey:e,handleClick:function(e){(0,m.Fo)(e)&&a(!0)},showAllPaddingControlsToggle:_}))}function uK({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:n,recordingKey:r,handleClick:i,showAllPaddingControlsToggle:a}){return l.createElement(e3.fI,{heightMultiplier:e&&!t?2:void 0},t?l.createElement(uH,{className:ua.mR,paddingSelection:dm.mx.ALL,setShowSinglePaddingControl:n,focusOnMount:!0,recordingKey:r}):e?l.createElement(l.Fragment,null,l.createElement(uH,{className:p()(ua.oH,ua.aO),paddingSelection:dm.mx.LEFT,onClick:i,recordingKey:r,inputTestId:"padding-left"}),l.createElement(uH,{className:p()(ua.oH,ua.uH),paddingSelection:dm.mx.RIGHT,onClick:i,recordingKey:r,inputTestId:"padding-right"}),l.createElement(uH,{className:p()(ua.T1,ua.aO),paddingSelection:dm.mx.TOP,onClick:i,recordingKey:r,inputTestId:"padding-top"}),l.createElement(uH,{className:p()(ua.T1,ua.uH),paddingSelection:dm.mx.BOTTOM,onClick:i,recordingKey:r,inputTestId:"padding-bottom"})):l.createElement(l.Fragment,null,l.createElement(uH,{className:ua.oH,paddingSelection:dm.mx.HORIZONTAL,onClick:i,recordingKey:r,inputTestId:"padding-horizontal"}),l.createElement(uH,{className:ua.T1,paddingSelection:dm.mx.VERTICAL,onClick:i,recordingKey:r,inputTestId:"padding-vertical"})),a)}function uU({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:n,recordingKey:r,handleClick:i,showAllPaddingControlsToggle:a}){return l.createElement(dc.W,{showAllPaddingControls:e,showSinglePaddingControl:t,singleInput:l.createElement(uH,{paddingSelection:dm.mx.ALL,focusOnMount:!0,recordingKey:r,setShowSinglePaddingControl:n}),collapsedLeftInput:l.createElement(uH,{paddingSelection:dm.mx.HORIZONTAL,onClick:i,recordingKey:r,inputTestId:"padding-horizontal"}),collapsedRightInput:l.createElement(uH,{paddingSelection:dm.mx.VERTICAL,onClick:i,recordingKey:r,inputTestId:"padding-vertical"}),expandedTopLeftInput:l.createElement(uH,{paddingSelection:dm.mx.LEFT,onClick:i,recordingKey:r}),expandedBottomLeftInput:l.createElement(uH,{paddingSelection:dm.mx.RIGHT,onClick:i,recordingKey:r}),expandedTopRightInput:l.createElement(uH,{paddingSelection:dm.mx.TOP,onClick:i,recordingKey:r}),expandedBottomRightInput:l.createElement(uH,{paddingSelection:dm.mx.BOTTOM,onClick:i,recordingKey:r}),topIcon:a,leftLabel:(0,x.tx)("fullscreen.properties_panel.section_autoLayout.label_padding"),rightLabel:null,bottomIcon:null})}function uH({className:e,paddingSelection:t,recordingKey:n,inputTestId:r,onClick:i,onBlur:a,focusOnMount:o,setShowSinglePaddingControl:c}){let p=(0,dm.Wx)(),d=(0,dm.Y9)();return l.createElement(uE.s,{outerClassName:e,paddingSelection:t,focusOnMount:o,onFocus:()=>s.Qa7.setFocusStackPanelInput(t,!0),onBlur:e=>{s.Qa7.setFocusStackPanelInput(t,!1),a?.(e)},onMouseEnter:()=>d(t,!0),onMouseLeave:()=>d(t,!1),onClick:i,onScrubBegin:()=>p(t,!0),onScrubEnd:()=>p(t,!1),onNudge:()=>s.glU.temporarilyHideOverlay(s.hJs.SELECTION),setShowSinglePaddingControl:c,recordingKey:h.Pt(n,"stackPadding",dm.mx[t]),inputTestId:r,source:"panel"})}var uB=n(7723);let uG="template-controls-picker";var uY=n(929077);function uW(){let{sceneNodesToEdit:e,description:t}=(0,ij.R)(e=>({sceneNodesToEdit:(0,ip.F4)(e),description:e.mirror.selectionProperties.description})),n="string"==typeof t?t:"",r=l.useCallback((t,n)=>{es.l7.user("set-description",()=>{for(let l of e)l.setDescriptionRich(t,n)})},[e]),i=l.useCallback(()=>{Q.Y5.commit()},[]);return l.createElement("div",{className:"template_controls_menu--descriptionContainer--pRK0M"},l.createElement(uY.A,{description:n,isViewOnly:!1,placeholder:(0,x.t)("design_systems.template_panel.template_placeholder"),onBlur:i,onSubmit:r}))}function uQ(){let e=(0,r.wA)(),t=(0,r.d4)(e=>e.pickerShown),n=new eI.Mi(t?.initialX,t?.initialY);return t?.id!==uG?null:l.createElement(eN.vx,{autoflowHeight:!0,headerSize:"small",initialPosition:n,initialWidth:320,onClose:()=>{e(K.XE())},scrollOverflow:!1,title:(0,x.t)("design_systems.template_panel.template_controls")},l.createElement(uW,null))}var uz=n(400439),u$=n(832039),uX=n(691151),uj=n(999918);let uJ=l.memo(function(){let{containingTemplate:e,pickerShown:t,templateDescription:n}=(0,ij.R)(e=>({containingTemplate:(0,tI._k)(e),pickerShown:e.pickerShown,templateDescription:e.mirror.selectionProperties.description??""})),i=(0,r.d4)(ej.Dr),a=(0,r.d4)(ej.cB),s=l.useRef(null),o=(0,r.wA)(),c=l.useCallback((e,t,n=eZ.qo)=>{if(!s)return;let l=eH.findDOMNode(s.current),r=(0,eZ.cn)(l,n);o(K.u1({id:t,initialX:r.x,initialY:r.y})),o(g.sw()),o(K.Uv())},[o]),p=l.useCallback(e=>{t?.id===uG?o(K.XE()):c(e,uG,320)},[t,o,c]);return e&&e.isAlive()?l.createElement(e3.Zk,{ref:s},l.createElement(e3.fI,{className:sy.LO},l.createElement(uB.R,{guid:e.guid,value:e.name,canEdit:!0,icon:l.createElement(te.B,{svg:uX.A,className:u$.Kk}),editAction:"rename-template"}),l.createElement("span",{className:uz.MC},l.createElement(tr.YW,{className:uz.UW,selected:t?.id===uG,onClick:p,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":(0,x.t)("design_systems.template_panel.template_controls"),svg:uj.A,recordingKey:"templateControls"}))),l.createElement(e5.n,{description:n}),i&&a&&l.createElement(e4.x,null),l.createElement(uQ,null)):null});function uZ({onExpand:e}){return l.createElement(e3.Zk,{"data-testid":"toggle-simplified-panels",className:cS.aW},l.createElement(en.z,{onClick:e,recordingKey:"toggleSimplifiedPanels"},(0,x.tx)("design_systems.component_properties.show_more_properties")))}var uq=n(228737);class u0 extends h.o6{constructor(){super(...arguments),this.onMouseDown=h.cZ(this,"mousedown",()=>{Q.Y5.deselectProperty(),this.props.dispatch(K.XE()),this.props.dispatch((0,U.vq)()),this.props.dispatch(g.sw()),this.props.dispatch(K.Uv())}),this._framePresetPanel=new eV.H4(()=>l.createElement(aM.nl,{key:"frame-presets",dispatch:this.props.dispatch,expandedFramePresetType:this.props.expandedFramePresetType,recordingKey:"framePresetPanel"})),this._pencilToolPanel=new eV.H4(()=>l.createElement(s8,{key:"pencilToolPanel",id:"pencilToolPanel",openFile:this.props.openFile,recordingKey:"pencilToolPanel"})),this._canvasBackgroundPanel=new eV.H4(()=>{let e=this.props.selectionProperties;return l.createElement(av,{key:"canvas-background",backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,exportBackgroundDisabled:e.exportBackgroundDisabled,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,editModeType:this.props.appModel.activeCanvasEditModeType,pickerShown:this.props.pickerShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,library:this.props.library,openFile:this.props.openFile,recordingKey:"canvasBackgroundPanel",currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,defaultColor:$.rC,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,hasExports:!!e.exportSettings&&(0,z._W)(e.exportSettings,[]).length>0})}),this._viewOnlyFlowsPanel=new eV.H4(()=>l.createElement(nY.A,{viewOnly:!0})),this._localStylesPanel=new eV.H4(e=>l.createElement(nU,{key:e,scrollContainer:this.props.scrollContainer,recordingKey:e})),this._transformPanel=new eV.H4(()=>l.createElement(aZ.zq,{key:"transform",propertiesPanelState:this.props.panelState,recordingKey:"transformPanel",pickerShown:this.props.pickerShown,openFileKey:this.props.openFile?.key||null,canEditConstraints:this.props.isUI3&&this.shouldShowConstraintsResizingPanel(),onlyShowXYInputsRow:this.props.isUI3&&(this.props.panelState===N.GR.DEFAULT_SIMPLIFIED||(this.selectionProperties().areOnlyResponsiveSetsSelected??!1))})),this._vectorPanel=new eV.H4(()=>{let e=this.selectionProperties(),t=this.props.isUI3;return l.createElement(aZ.Ss,{key:"vector-transform",x:e.x,y:e.y,cornerRadius:e.cornerRadius,handleMirroring:e.handleMirroring,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"vectorTransformPanel",isUI3:t})}),this._liveObjectPanel=new eV.H4(()=>l.createElement(sH.cI,{key:"live-object",recordingKey:"liveObjectPanel",pasteSources:this.props.selectionProperties.pasteSources})),this._instancePanel=new eV.H4(()=>{let e=this.props.selectionProperties;return l.createElement(aR._I,{key:"instance",symbolGUIDsBackingSelection:e.symbolGUIDsBackingSelection,resettableInstanceOverridesMap:e.resettableInstanceOverrides,stateGroupSelectionInfo:e.stateGroupSelectionInfo,recordingKey:"instancePanel"})}),this._constraintsResizingPanel=new eV.H4(()=>l.createElement(aC,{key:"constraints",openFileKey:this.props.openFile?.key||null,dropdownShown:this.props.dropdownShown,recordingKey:"constraintsPanel"})),this._stackPanel=new eV.H4(()=>l.createElement(uk,{key:"stack",onlyShowResizingRow:this.props.isUI3&&this.props.panelState===N.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:this.props.shownPanels[s.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),this._removeGroupFillAndStrokePanel=new eV.H4(()=>l.createElement(sj,{key:"remove-group-fill-stroke"})),this._maskPanel=new eV.H4(()=>{let e=this.selectionProperties();return l.createElement(sW,{key:"mask",maskType:e.maskType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"maskPanel"})}),this._componentPropertiesPanel=new eV.H4(()=>l.createElement(tD,{key:"componentProperties",recordingKey:"propsPanel"})),this._componentPanel=new eV.H4(()=>l.createElement(e1.cu,{key:"component",recordingKey:"componentPanel"})),this._templatePropertiesPanel=new eV.H4(()=>l.createElement(nq,{key:"templateProperties",recordingKey:"templatePropsPanel"})),this._templatePanel=new eV.H4(()=>l.createElement(uJ,{key:"template"})),this._gridsPanel=new eV.H4(()=>l.createElement(N.tC,{key:"grids",selectionProperties:this.props.selectionProperties})),this._layerPanel=new eV.H4(()=>{let e=this.props.selectionProperties;return this.props.isUI3?l.createElement(sK,{recordingKey:"appearancePanel"}):l.createElement(sb,{key:"layer",blendMode:e.blendMode,opacity:e.opacity,visible:e.visible,variableConsumptionInfo:e.variableConsumptionInfo,recordingKey:"layerPanel"})}),this._localVariablesPanel=new eV.H4(()=>l.createElement(nJ,{key:"local-variables"})),this._typePanel=new eV.H4(()=>l.createElement(N.gc,{key:"type",selectionProperties:this.props.selectionProperties})),this._selectionPaints=new eV.H4(()=>l.createElement(l8.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:$.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3})),this._fillPanel=new eV.H4(()=>{let e;return this.props.selectionProperties.numSelectedByType&&(e=(0,nW.aZ)(s.rrT.FILL,this.props.selectionProperties.numSelectedByType)),l.createElement(N.B8,{key:"fill",selectionProperties:this.props.selectionProperties,variableScopes:e})}),this._strokePanel=new eV.H4(()=>{let e=this.props.selectionProperties;return l.createElement(l8.$p,{key:"stroke",stylePickerShown:this.props.stylePickerShown,strokePanelMode:this.props.strokePanelMode,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,strokePaints:e.strokePaints,borderSharedWeight:e.borderSharedWeight,strokeWeight:e.strokeWeight,strokeAlign:e.strokeAlign,strokeCap:e.strokeCap,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,connectorLineStyle:e.connectorLineStyle,leftEndCap:e.leftEndCap,rightEndCap:e.rightEndCap,maxStrokeWeight:e.maxStrokeWeight,dashPattern:e.dashPattern,dashCap:e.dashCap,terminalCap:e.terminalCap,arcRadius:e.arcRadius,arcSweep:e.arcSweep,numSelectedByType:e.numSelectedByType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,pickerShown:this.props.pickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,stylePickerListLayout:this.props.stylePickerListLayout,currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:$.Em,inheritStyleKey:e.inheritFillStyleKeyForStroke||null,inheritStyleID:e.styleIdForStrokeFill||null,library:this.props.library,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,openFile:this.props.openFile,recordingKey:"strokePanel",isPanelBodyCollapsedAtom:null})}),this._effectsPanel=new eV.H4(()=>l.createElement(N.w5,{key:"effects",selectionProperties:this.props.selectionProperties})),this._slidesShadowPanel=new eV.H4(()=>l.createElement(iV,{recordingKey:"slidesShadowPanel"})),this._exportPanelInspectTab=new eV.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,n=(0,v.Nf)(this.props.appModel);return l.createElement(aO.LI,{key:"export",title:this.isReadOnlyNonInspect()?(0,x.t)("fullscreen.properties_panel.export"):(0,x.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:t,singleNodeName:aO.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:n,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:oe.iP})}),this._exportPanel=new eV.H4(()=>{let e=this.props.selectionProperties,t=(0,v.Nf)(this.props.appModel);return l.createElement(aO.LI,{key:"export",openFile:this.props.openFile,singleNodeName:aO.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:t,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:oe.iP})}),this._pluginPanel=new eV.H4(()=>{let e=this.selectionProperties();return l.createElement(s9.Q,{key:"plugin",pluginRelaunchData:e.pluginRelaunchData,localPlugins:this.props.localPlugins,publishedPlugins:this.props.publishedPlugins,allSavedPlugins:this.props.allSavedPlugins.plugins,orgEntity:(0,W.Jl)(this.props),dispatch:this.props.dispatch,openFileKey:this.props.openFile?.key||null,editorType:this.props.openFile?.editorType?(0,eK.wN)(this.props.openFile.editorType):null,numSelected:e.numSelected??0,recordingKey:"pluginPanel"})}),this._prototypePanel=new eV.H4(()=>l.createElement(pS,{key:"prototype",dispatch:this.props.dispatch,selectionProperties:this.selectionProperties(),appModel:this.props.appModel,pickerShown:this.props.pickerShown,dropdownShown:this.props.dropdownShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,sceneGraphSelection:this.props.sceneGraphSelection,editModeType:this.props.appModel.activeCanvasEditModeType,library:this.props.library,openFile:this.props.openFile,userFlags:this.props.userFlags,recordingKey:"prototypePanel"})),this._scalePanel=new eV.H4(()=>(0,u.kc)().ce_scale_tool_v2?l.createElement(dn,{key:"scale",recordingKey:"scalePanel"}):l.createElement(p4,{key:"scale",recordingKey:"scalePanel"})),this._slidesAlignPanel=new eV.H4(()=>l.createElement(n6,{recordingKey:"slidesAlignPanel"})),this._slidesThemePanel=new eV.H4(()=>l.createElement(iW,{recordingKey:"slidesThemePanel"})),this._slidesInstancePanel=new eV.H4(()=>l.createElement(iE,{recordingKey:"slidesInstancePanel"})),this._slidesFillPanel=new eV.H4(()=>l.createElement(ic,{recordingKey:"slidesFillPanel"})),this._slidesOpacityPanel=new eV.H4(()=>l.createElement(iR,{recordingKey:"slidesOpacityPanel"})),this._slidesTypePanel=new eV.H4(()=>l.createElement(at,{recordingKey:"slidesTypePanel"})),this._slidesLinkPanel=new eV.H4(()=>l.createElement(iN,{recordingKey:"slidesLinkPanel"})),this._slidesBorderPanel=new eV.H4(()=>l.createElement(rE,{recordingKey:"slidesBorderPanel"})),this._slidesCornerPanel=new eV.H4(()=>l.createElement(rf,{recordingKey:"slidesCornerPanel"})),this._slidesAnimationPanel=new eV.H4(()=>l.createElement(lG,null)),this._slidesEmbeddablePrototypePanel=new eV.H4(()=>l.createElement(rA,{selection:this.props.sceneGraphSelection})),this._slidesInteractiveWidgetPanel=new eV.H4(()=>l.createElement(ig,{selection:this.props.sceneGraphSelection})),this._slidesSelectionPaints=new eV.H4(()=>l.createElement(l8.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:$.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3,customColorPicker:n5.GY,hideCustomColorPickerFillTypeToggle:!1})),this._sitesPositionPanel=new eV.H4(()=>l.createElement(n0.Qc,{recordingKey:"positionPanel"})),this._sitesLinkPanel=new eV.H4(()=>l.createElement(n0.rC,{recordingKey:"linkPanel"})),this._sitesPageMetadataPanel=new eV.H4(()=>l.createElement(n0.li,{recordingKey:"pageMetadataPanel"})),this._sitesCanvasOverlayPanel=new eV.H4(()=>l.createElement(n0.rf,null)),this._sitesAccessibilityPanel=new eV.H4(()=>l.createElement(n0.l,{recordingKey:"accessibilityPanel"})),this._sitesResponsivenessPanel=new eV.H4(()=>l.createElement(n0.eg,{key:"responsiveness"})),this._sitesHTMLWidgetPanel=new eV.H4(()=>l.createElement(n0.Mr,null)),this._sitesInteractionsPanel=new eV.H4(()=>l.createElement(n0.GO,{recordingKey:"interactionsPanel"})),this._sitesCodeComponentPanel=new eV.H4(()=>l.createElement(n0.nl,{recordingKey:"codeComponentPanel"})),this._dakotaRichContentNodePanel=new eV.H4(()=>l.createElement(F.a8,{selection:this.props.sceneGraphSelection})),this._dakotaItemPanel=new eV.H4(()=>l.createElement(F.Ug,{selection:this.props.sceneGraphSelection})),this._cooperConstrainedEditPanel=new eV.H4(()=>l.createElement(D,{recordingKey:"constrainedEditPanel"})),this._cooperPublishEditPanel=new eV.H4(()=>l.createElement(D,{recordingKey:"constrainedEditPanel"})),this._cooperExportPanel=new eV.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,n=(0,v.Nf)(this.props.appModel);return l.createElement(D,{key:"export",title:(0,x.t)("fullscreen.properties_panel.cooper_export"),standalone:!0,openFile:t,singleNodeName:aO.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:n,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:oe.iP})}),this.isStyleSelected=()=>this.props.selectedStyleProperties&&!!this.props.selectedStyleProperties.guid,this.isLiveObjectSelected=()=>(this.props.selectionProperties.pasteSources||[]).length>0,this.selectionProperties=()=>this.isStyleSelected()?this.props.selectedStyleProperties:this.props.selectionProperties,this.shouldShowAlignControls=()=>(0,oe.d6)(this.props.shownPanels),this.shouldRenderUI3ToolbarItems=()=>this.props.isUI3,this.shouldShowConstraintsResizingPanel=()=>{let e=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&e[s.ibQ.CONSTRAINTS_ITEM]},this.shouldShowInteractionsPanel=()=>!!this.props.selectionProperties.isValidPrototypingSourceSelected,this.isStateSelected=()=>this.props.selectionProperties.stateGroupSelectionInfo?.mode===s.iCO.STATE,this.shouldShowLocalVariablesPanel=()=>{let e=(0,I.P)(this.props.selectedView),t=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&!this.props.appModel.isReadOnly&&0===Object.keys(this.props.sceneGraphSelection).length&&!t[s.ibQ.FRAME_PRESETS]&&!e},this.shouldShowSelectionPaintsPanel=()=>{let e=this.props.shownPanels;return(0,oe.fI)(e,this.scaleShouldHideOtherPanels(),this.props.selectionPaints)},this.shouldShowSlidesLinkPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!!e&&(e.TEXT??0)>0&&(0,Y.OU)(e,["TEXT"])},this.shouldShowSlidesAlignPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties,t=e&&(0,Y.vx)(e,"SLIDE");return this.shouldShowAlignControls()&&!t},this.doesNotHaveAnySelectedText=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!(e?.TEXT&&e.TEXT>0)},this.shouldShowStackPanel=e=>{let t=this.props.shownPanels;return(0,oe.IY)(t,this.scaleShouldHideOtherPanels(),this.props.selectionProperties,this.isStyleSelected()?this.props.selectedStyleProperties:void 0,e)},this.scaleShouldHideOtherPanels=()=>this.props.shownPanels[s.ibQ.SCALE_ITEM]&&!(0,u.kc)().ee_scale_tool_show_all_panels,this.shouldShowExportPanel=()=>this.props.openFile&&!(0,eF.Pe)(this.props.openFile)&&!(0,f.MP)(),this.shouldShowLocalStylesPanel=()=>{let e=(0,I.P)(this.props.selectedView);return!this.scaleShouldHideOtherPanels()&&0===Object.keys(this.props.sceneGraphSelection).length&&!this.props.shownPanels[s.ibQ.FRAME_PRESETS]&&!e},this.renderSimplifiedDesignPanels=()=>{let e=this.props.shownPanels;if((0,A.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,O.$D)(C.FigmaTeam.EDITOR_USABILITY,e)}return l.createElement(L.i,{displayAs:L.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(as.Mw,{panelName:as.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(n4.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),(0,u.kc)().piper_design_styles&&this._slidesThemePanel.render({isVisible:e[s.ibQ.SLIDES_THEME]}),this._transformPanel.render({isVisible:!0}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[s.ibQ.SCALE_ITEM]}),!this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),!this.props.isUI3&&this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),this.props.panelState===N.GR.DEFAULT_SIMPLIFIED&&l.createElement(uZ,{onExpand:()=>{this.props.setPanelState(N.GR.OVERRIDDEN_EXPANDED)}}),this.props.panelState===N.GR.OVERRIDDEN_EXPANDED&&l.createElement(l.Fragment,null,this.props.isUI3&&this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),l.createElement(aA.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),this._vectorPanel.render({isVisible:e[s.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._maskPanel.render({isVisible:e[s.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this._typePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[s.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[s.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[s.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()})),!this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[s.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDesignPanels=()=>{let e=this.props.shownPanels;return(((0,A.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,M.Lg)()&&!(0,M.nl)()&&(0,O.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,A.Im)(e),shouldRenderInspectTab:this.shouldRenderInspectTab()}),e[s.ibQ.FRAME_PRESETS])?l.createElement(L.i,{displayAs:L.C.Block},this._framePresetPanel.render({isVisible:!0})):e[s.ibQ.PENCIL_TOOL]?l.createElement(L.i,{displayAs:L.C.Block},this._pencilToolPanel.render({isVisible:!0})):l.createElement(L.i,{displayAs:L.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(as.Mw,{panelName:as.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(n4.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this.props.isUI3&&this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),(0,u.kc)().piper_design_styles&&this._slidesThemePanel.render({isVisible:e[s.ibQ.SLIDES_THEME]}),this._transformPanel.render({isVisible:this.props.isUI3&&this.shouldShowAlignControls()||e[s.ibQ.TRANSFORM_ITEM]}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[s.ibQ.SCALE_ITEM]}),l.createElement(aA.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),this._templatePropertiesPanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),!this.props.isUI3&&this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),!this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}),this._liveObjectPanel.render({isVisible:this.isLiveObjectSelected()}),!this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._vectorPanel.render({isVisible:e[s.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),this._maskPanel.render({isVisible:e[s.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[s.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[s.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[s.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}),(0,u.kc)().jsx_debugging&&l.createElement(aV,null))},this.renderSlidesPanels=()=>{let e=this.props.shownPanels;return e[s.ibQ.PENCIL_TOOL]?l.createElement(L.i,{displayAs:L.C.Block},this._pencilToolPanel.render({isVisible:!0})):l.createElement(L.i,{displayAs:L.C.Block},this._slidesAlignPanel.render({isVisible:this.shouldShowSlidesAlignPanel()}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),shouldShowSlidesTypePanel:e[s.ibQ.TYPE_ITEM]}),this._slidesThemePanel.render({isVisible:e[s.ibQ.SLIDES_THEME]}),this._slidesInstancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._slidesTypePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._slidesFillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._slidesOpacityPanel.render({isVisible:e[s.ibQ.SLIDES_OPACITY_ITEM]}),this._slidesCornerPanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),this._slidesBorderPanel.render({isVisible:e[s.ibQ.STROKE_ITEM]&&this.doesNotHaveAnySelectedText()}),this._slidesShadowPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this._slidesLinkPanel.render({isVisible:e[s.ibQ.TYPE_ITEM]&&this.shouldShowSlidesLinkPanel()}),this._slidesSelectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._slidesEmbeddablePrototypePanel.render({isVisible:e[s.ibQ.SLIDES_EMBED]}),this._slidesInteractiveWidgetPanel.render({isVisible:e[s.ibQ.SLIDES_INTERACTIVE_WIDGET]}))},this.renderSlidesAnimationPanels=()=>{let e=this.props.shownPanels;return l.createElement(L.i,{displayAs:L.C.Block},this._slidesAnimationPanel.render({isVisible:e[s.ibQ.SLIDES_ANIMATION]}))},this.renderSitesPanels=()=>{let e=this.props.shownPanels,t=(0,u.kc)().sts_document_settings;return l.createElement(L.i,{displayAs:L.C.Block},this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),withBottomBorder:!(t&&this.shouldShowSitesPageMetadataPanel())}),t?this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}):null,this._sitesCanvasOverlayPanel.render({isVisible:this.shouldShowSitesCanvasOverlayPanel()}),this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&this.shouldShowInstancePanel()}),this._sitesPositionPanel.render({isVisible:this.shouldShowSitesPositionPanel()}),this._transformPanel.render({isVisible:e[s.ibQ.TRANSFORM_ITEM]}),this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[s.ibQ.SCALE_ITEM]}),t?null:this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}),l.createElement(aA.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),this._vectorPanel.render({isVisible:e[s.ibQ.VECTOR_ITEM]}),this._maskPanel.render({isVisible:e[s.ibQ.MASK_ITEM]}),this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[s.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[s.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._fillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),this._effectsPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this._sitesCodeComponentPanel.render({isVisible:this.shouldShowSitesCodeComponentPanel()}),this._sitesHTMLWidgetPanel.render({isVisible:this.shouldShowSitesHTMLWidgetPanel()}),this._sitesAccessibilityPanel.render({isVisible:this.shouldShowSitesAccessibilityPanel()}),this._sitesResponsivenessPanel.render({isVisible:this.shouldShowSitesResponsivenessPanel()}),(0,V.U9)()&&this._dakotaRichContentNodePanel.render({isVisible:!1}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDakotaPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},this._dakotaItemPanel.render({isVisible:!0})),this.renderCooperPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},this._cooperConstrainedEditPanel.render({isVisible:!0}),l.createElement(D,{shownPanels:this.props.shownPanels}),l.createElement(D,{shownPanels:this.props.shownPanels,instancePanel:this._slidesInstancePanel,showInstancePanel:this.shouldShowInstancePanel(),selectionPaintsPanel:this._slidesSelectionPaints,showSelectionPaints:this.shouldShowSelectionPaintsPanel()})),this.renderCooperPublishPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},this._cooperPublishEditPanel.render({isVisible:!0})),this.renderInspectionPanels=()=>{let e=this.props.openFile?.canEdit,t=this.props.selectionProperties,n=!t.prototypeStartingPointsInfo||t.prototypeStartingPointsInfo?.length>0,r=0===Object.keys(this.props.sceneGraphSelection).length,i=r&&!e&&n;return l.createElement(B.fu,{name:eU.e0.CODE_PANEL},l.createElement(L.i,{displayAs:L.C.Block},l.createElement(as.Mw,{panelName:as.ON.INSPECT}),l.createElement(aT.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:this._viewOnlyFlowsPanel.render({isVisible:i}),localStylesPanel:this._localStylesPanel.render({isVisible:r,valueArgs:["code-local-styles"]})})))},this.renderLivingDesignsPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},l.createElement(eL,null)),this.renderPrototypePanels=()=>{let e=this.props.shownPanels;return l.createElement(L.i,{displayAs:L.C.Block},this._sitesLinkPanel.render({isVisible:this.shouldShowSitesLinkPanel()}),this._sitesInteractionsPanel.render({isVisible:this.shouldShowSitesInteractionsPanel()}),this._framePresetPanel.render({isVisible:e[s.ibQ.FRAME_PRESETS]}),this._pencilToolPanel.render({isVisible:e[s.ibQ.PENCIL_TOOL]}),this._prototypePanel.render({isVisible:!e[s.ibQ.FRAME_PRESETS]&&!e[s.ibQ.PENCIL_TOOL]&&!this.selectionProperties().containsResponsiveSets}))},this.shouldRenderInspectTab=()=>this.props.appModel.showUi&&!!this.props.user&&this.props.appModel.isReadOnly,this.isReadOnlyNonInspect=()=>this.props.appModel.isReadOnly&&!(0,tK.$A)(this.props.selectedView),this.renderPanelContent=()=>{let e=this.props.appModel.topLevelMode,t=this.props.propertiesPanelTab,n=this.props.appModel.isReadOnly,r=e!==s.lyf.PREVIEW&&(e!==s.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==s.lyf.DEV_HANDOFF&&t===s.FAf.DESIGN,i=e!==s.lyf.PREVIEW&&(e!==s.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==s.lyf.DEV_HANDOFF&&t===s.FAf.SLIDE,a=e!==s.lyf.PREVIEW&&(e!==s.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==s.lyf.DEV_HANDOFF&&t===s.FAf.SLIDE_ANIMATION,o=e===s.lyf.LAYOUT&&!n&&t===s.FAf.SITE,c=e!==s.lyf.PREVIEW&&e!==s.lyf.BRANCHING&&t===s.FAf.PROTOTYPE,p=e===s.lyf.PREVIEW&&!this.props.userStateLoaded||t===s.FAf.INSPECT,d=e===s.lyf.LAYOUT&&!n&&t===s.FAf.COOPER,m=e===s.lyf.LAYOUT&&!n&&t===s.FAf.COOPER_PUBLISH,h=(0,V.U9)()&&e===s.lyf.LAYOUT&&!n&&t===s.FAf.DAKOTA,E=(0,u.kc)().livefish&&e===s.lyf.LAYOUT&&!n&&t===s.FAf.LIVING_DESIGNS,_=e===s.lyf.LAYOUT&&!n&&t===s.FAf.COOPER_EXPORT;return r||i||a||o||h||d||m||_||c||p||E||t===s.FAf.EXPORT||t===s.FAf.COMMENT||(0,O.x1)("PropertiesPanel","Rendering empty properties panels",{topLevelMode:s.lyf[e],tab:s.FAf[t],shouldRenderInspectTab:this.shouldRenderInspectTab()}),l.createElement(l.Fragment,null,r&&(this.props.panelState===N.GR.DEFAULT_EXPANDED?this.renderDesignPanels():this.renderSimplifiedDesignPanels()),i&&this.renderSlidesPanels(),a&&this.renderSlidesAnimationPanels(),o&&this.renderSitesPanels(),c&&this.renderPrototypePanels(),h&&this.renderDakotaPanels(),p&&this.renderInspectionPanels(),d&&this.renderCooperPanels(),_&&this._cooperExportPanel.render({isVisible:!0}),m&&this.renderCooperPublishPanels(),E&&this.renderLivingDesignsPanels(),t===s.FAf.EXPORT&&this._exportPanelInspectTab.render({isVisible:!0}),t===s.FAf.COMMENT&&l.createElement(this.props.commentsPanel,null))}}shouldShowSitesPositionPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_POSITION_ITEM]}shouldShowSitesLinkPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_LINK_ITEM]}shouldShowSitesPageMetadataPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_PAGE_METADATA_ITEM]}shouldShowSitesCanvasOverlayPanel(){return(0,n1.Vj)(this.props.selectedView)&&(0,u.kc)().internal_only_debug_tools}shouldShowSitesAccessibilityPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_ACCESSIBILITY_ITEM]}shouldShowSitesResponsivenessPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_RESPONSIVENESS_ITEM]}shouldShowSitesHTMLWidgetPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_HTML_WIDGET_ITEM]}shouldShowSitesInteractionsPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_INTERACTIONS_ITEM]}shouldShowSitesCodeComponentPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_CODE_COMPONENT_ITEM]}shouldShowInstancePanel(){return this.props.shownPanels[s.ibQ.INSTANCE_ITEM]&&!this.isLiveObjectSelected()}shouldShowComponentPropertiesPanel(){return this.props.shownPanels[s.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}render(){let e=this.props.selectedStyleProperties&&(0,o.fn)(this.props.selectedStyleProperties.guid),t=!!(this.props.dropdownShown||this.props.pickerShown?.modal),n=this.props.propertiesPanelTab===s.FAf.COMMENT,r=!this.isReadOnlyNonInspect(),i=(0,I.P)(this.props.selectedView),a=!e||!t,c=!n&&a,p=(0,G.ft)(),d=l.createElement("div",{className:n&&r&&!i?op.By:op.eh,onMouseDown:p?void 0:this.onMouseDown,onPointerDown:p?this.onMouseDown:void 0,"data-non-interactive":!0},l.createElement(H.j9.Consumer,null,()=>this.renderPanelContent()));return n?d:l.createElement("div",{className:op.gq},l.createElement(R.P,{enableOverscroll:!0,key:this.props.propertiesPanelTab,ref:this.props.refMainScrollContainer,className:op.jG,containerId:N.rp,hideScrollbar:!c,onContextMenu:ov,scrollingDisabled:n||(e?t:!!this.props.dropdownShown)},d))}}u0.displayName="PropertiesPanel";var u1=n(213190),u5=n(219728),u4=n(824189),u3=n(147723),u6=n(252828);function u2({label:e,tab:t,active:n,className:i,recordingKey:a,keyboardShortcut:o}){let c=(0,r.d4)(e=>e.mirror.appModel.topLevelMode),p=(0,tJ.dH)(),d=(0,ti.R)(),u=(0,n1.cJ)(),m=h.rf(a,"mousedown",()=>{if(!n){let e=u7(t,d,u).analyticsName;(0,tH.sx)("properties-panel-select-tab",{tab:e}),p===s.NLJ.SCALE&&t===s.FAf.PROTOTYPE&&Q.Y5.triggerAction("set-tool-default"),(0,oC.NT)(t),c===s.lyf.PREVIEW&&(t===s.FAf.COMMENT?Q.Y5.triggerAction("set-tool-comments"):Q.Y5.triggerAction("set-tool-default"))}});return l.createElement("div",{className:i,onMouseDown:m,"data-label":e,...o?{"data-tooltip-type":eJ.Ib.TEXT,"data-tooltip":e,"data-tooltip-shortcut-key":o}:void 0},e)}function u7(e,t,n){return({[s.FAf.DESIGN]:{label:(0,x.t)("fullscreen.properties_panel.design"),tab:s.FAf.DESIGN,className:op.Mf,recordingKey:"designTab",analyticsName:"design"},[s.FAf.PROTOTYPE]:{label:n?(0,x.t)("fullscreen.properties_panel.interactive"):(0,x.t)("fullscreen.properties_panel.prototype"),tab:s.FAf.PROTOTYPE,className:op.Mf,recordingKey:n?"interactionsTab":"prototypeTab",analyticsName:n?"interactions":"prototype"},[s.FAf.INSPECT]:{label:(0,x.t)("fullscreen.properties_panel.properties"),tab:s.FAf.INSPECT,className:op.Mf,recordingKey:"inspectTab",analyticsName:"inspect"},[s.FAf.COMMENT]:{label:t?(0,x.t)("fullscreen.properties_panel.comments"):(0,x.t)("fullscreen.properties_panel.comment"),tab:s.FAf.COMMENT,className:op.Mf,recordingKey:"commentTab",analyticsName:"comment"},[s.FAf.EXPORT]:{label:(0,x.t)("fullscreen.properties_panel.export"),tab:s.FAf.EXPORT,className:op.Mf,recordingKey:"exportTab",analyticsName:"export"},[s.FAf.SLIDE]:{label:(0,x.t)("fullscreen.properties_panel.design"),tab:s.FAf.SLIDE,className:op.Mf,recordingKey:"designTab",analyticsName:"design"},[s.FAf.SLIDE_ANIMATION]:{label:(0,x.t)("slides.properties_panel.animate"),tab:s.FAf.SLIDE_ANIMATION,className:op.Mf,recordingKey:"animateTab",analyticsName:"animate"},[s.FAf.SITE]:{label:(0,x.t)("fullscreen.properties_panel.design"),tab:s.FAf.SITE,className:op.Mf,recordingKey:"sitesTab",analyticsName:"sites"},[s.FAf.DAKOTA]:{label:(0,x.t)("dakota.properties_panel.dakota_panel.tab_title"),tab:s.FAf.DAKOTA,className:op.Mf,recordingKey:"dakotaTab",analyticsName:"dakota"},[s.FAf.COOPER]:{label:(0,x.t)("fullscreen.properties_panel.cooper_edit"),tab:s.FAf.COOPER,className:op.Mf,recordingKey:"cooperTab",analyticsName:"cooper"},[s.FAf.COOPER_PUBLISH]:{label:(0,x.t)("fullscreen.properties_panel.cooper_publish"),tab:s.FAf.COOPER_PUBLISH,className:op.Mf,recordingKey:"cooperPublishTab",analyticsName:"cooperPublish"},[s.FAf.LIVING_DESIGNS]:{label:(0,x.t)("fullscreen.properties_panel.living_designs"),tab:s.FAf.LIVING_DESIGNS,className:op.Mf,recordingKey:"livingDesignsTab",analyticsName:"livingDesigns"},[s.FAf.COOPER_EXPORT]:{label:(0,x.t)("fullscreen.properties_panel.cooper_export"),tab:s.FAf.COOPER_EXPORT,className:op.Mf,recordingKey:"cooperExportTab",analyticsName:"cooperExport"}})[e]}function u8({activeTab:e,isUI3:t,shouldShowAlignControls:n,shouldRenderInspectTab:i,recordingKey:a}){let o=(0,r.d4)(e=>e.mirror.appModel.topLevelMode),c=(0,tJ.dH)(),p=(0,tJ.p8)("isReadOnly"),d=(0,tK.ks)(),m=p&&!d,h=(0,oo.sO)(),E=(0,n1.cJ)(),_=(0,u4.g)(),y=(0,V.U9)(),g=(0,tJ.KH)(),P=(0,l.useMemo)(()=>Object.keys(g),[g]),S=(0,tJ.eY)(),[b,f]=l.useState(!1),[v,w]=l.useState(!1);l.useEffect(()=>{},[_,P,S,f,e]),l.useEffect(()=>{if(y){if(1===P.length){let e=S.get(P[0]);if(e&&"TEXT"===e.type){w(!0);return}}e===s.FAf.DAKOTA&&(0,oC.NT)(s.FAf.SITE),w(!1)}},[y,P,S,f,e]);let T=(()=>{let n=t?h?[s.FAf.COMMENT]:[s.FAf.COMMENT,s.FAf.INSPECT]:[s.FAf.COMMENT,s.FAf.INSPECT,s.FAf.EXPORT];switch(o){case s.lyf.LAYOUT:if(m)return n;if(e===s.FAf.COMMENT)return[s.FAf.COMMENT];if(E)return v?[s.FAf.SITE,s.FAf.PROTOTYPE,s.FAf.DAKOTA]:[s.FAf.SITE,s.FAf.PROTOTYPE];if(h)return[s.FAf.SLIDE,s.FAf.SLIDE_ANIMATION];if(_)return[s.FAf.COOPER,s.FAf.COOPER_EXPORT];return i?[s.FAf.DESIGN,s.FAf.PROTOTYPE,s.FAf.INSPECT]:b?[s.FAf.DESIGN,s.FAf.PROTOTYPE,s.FAf.COOPER_PUBLISH]:(0,u.kc)().livefish?[s.FAf.DESIGN,s.FAf.PROTOTYPE,s.FAf.LIVING_DESIGNS]:[s.FAf.DESIGN,s.FAf.PROTOTYPE];case s.lyf.PREVIEW:case s.lyf.DEV_HANDOFF:return n;case s.lyf.BRANCHING:return[s.FAf.INSPECT];default:return[s.FAf.DESIGN,s.FAf.PROTOTYPE,s.FAf.INSPECT]}})(),I=T.find(t=>t===e),k=T.map((n,l)=>{let r=u7(n,t,E),i=r.tab===e||0===l&&void 0===I,a=r.className;return i&&(a=T.length>1?op.yR:op.iV),{...r,className:a,active:i,topLevelMode:o,currentTool:c}});return T.length&&(1!==T.length||t)?l.createElement(H.j9.Consumer,null,()=>{if(t)return l.createElement(u9,{recordingKey:a,tabInfo:k});let r=e===s.FAf.DESIGN&&n||e===s.FAf.COMMENT?op.yW:op.hv;return l.createElement("div",{className:r,"data-non-interactive":!0},k.map((e,t)=>l.createElement(u2,{key:t,...e})))}):null}function u9({tabInfo:e,recordingKey:t}){let n=e.reduce((e,t)=>(e[t.tab]=!0,e),{}),i=e.find(e=>e.active),[a,o]=u5.tU.useManagedTabs(n,i?.tab.toString()??"",e=>{let t=parseInt(e),n=u7(t,c,p).analyticsName;(0,tH.sx)("properties-panel-select-tab",{tab:n}),d===s.NLJ.SCALE&&t===s.FAf.PROTOTYPE&&Q.Y5.triggerAction("set-tool-default"),(0,oC.NT)(t),u===s.lyf.PREVIEW&&(t===s.FAf.COMMENT?Q.Y5.triggerAction("set-tool-comments"):Q.Y5.triggerAction("set-tool-default"))},{recordingKey:h.Pt(t,"tabs")}),c=(0,ti.R)(),p=(0,n1.cJ)(),d=(0,tJ.dH)(),u=(0,r.d4)(e=>e.mirror.appModel.topLevelMode);return l.createElement("div",{className:op.A7},l.createElement("div",{role:"presentation",className:op.tq,onKeyDown:e=>{e.isDefaultPrevented()||(0,du.f7)(e,!0)}},l.createElement(u5.tU.TabStrip,{manager:o},e.map((e,t)=>l.createElement(u5.tU.Tab,{key:`props-panel-tab-${t}`,...a[e.tab]},e.label)))),l.createElement("div",{className:op.wR},l.createElement(u6.HT,{recordingKey:h.Pt(t,"zoomMenu")})),l.createElement("div",{"data-onboarding-key":u3.D9,className:op.qq}))}var me=n(544403),mt=n(672591),mn=n(96225);let ml=(0,d.jz)(t9.uj0);class mr extends h.o6{constructor(){super(...arguments),this.state={panelState:N.GR.DEFAULT_EXPANDED},this.onMouseDown=h.cZ(this,"mousedown",()=>{Q.Y5.deselectProperty(),this.props.dispatch(K.XE()),this.props.dispatch((0,U.vq)()),this.props.dispatch(g.sw()),this.props.dispatch(K.Uv())}),this.onContextMenu=e=>{let t=e.target;if(t){let n=t.tagName,l=t.type;n&&"INPUT"===n.toUpperCase()&&l&&"TEXT"===l.toUpperCase()||t.isContentEditable||e.preventDefault()}},this.showCreateStyleModal=({styleType:e,inheritStyleKeyField:t,nodeId:n,rowLeft:l,rowTop:r})=>{this.props.dispatch(g.sw()),this.props.dispatch(g.Zs({rowLeft:l,rowTop:r,styleType:e,inheritStyleKeyField:t,nodeId:n}))},this._stylePreviewThumbnail=new eV.H4(()=>{let e=(0,tq.IW)(this.props.stylePreviewShown),t=this.props.openFile?.canEdit,n=!!e||!t||this.props.appModel.isReadOnly;return l.createElement(om,{key:"style-preview-panel",selectedStyleProperties:this.props.selectedStyleProperties,isInspectPanel:this.props.propertiesPanelTab===s.FAf.INSPECT,stylePreviewShown:this.props.stylePreviewShown,externalStyle:e,isRenaming:this.props.library.isRenamingSelectedStyle,viewOnly:n,recordingKey:h.Pt(this.props,"stylePreviewPanel")})}),this.onCloseStylePreviewModal=()=>{s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID),this.props.dispatch(g.sw()),this.props.dispatch((0,P.B)())},this.renderStylePreviewModal=()=>{if(!this.props.stylePreviewShown.isShown||![s.FAf.DESIGN,s.FAf.SITE,s.FAf.INSPECT].includes(this.props.propertiesPanelTab))return;let e=this.props.selectedStyleProperties,t=new eI.Mi(this.props.stylePreviewShown.rowLeft-N.tA,this.props.stylePreviewShown.rowTop);if(this.props.stylePreviewShown.isCreating){let{styleType:e,inheritStyleKeyField:n,styleNameInputPrefix:r}=this.props.stylePreviewShown;return l.createElement(od,{recordingKey:"createStyleModal",initialPosition:t,styleNameInputPrefix:r,styleType:e,inheritStyleKeyField:n})}{let n=!(0,nu.eE)(this.props.stylePreviewShown.style,this.props.openFile),r=n||!this.props.openFile?.canEdit||this.props.appModel.topLevelMode===s.lyf.BRANCHING,i=(0,o.dI)(e.guid);if(!(i&&this.props.library.local.styles[i]&&!this.props.library.local.styles[i].is_soft_deleted)&&!n||!this.props.selectedStyleProperties.guid)return;return l.createElement(k.zK.Provider,{value:k.zM.EDIT_STYLE},l.createElement(eN.vx,{title:this.getStylePreviewThumbnailTitle(e.styleType,r),key:(0,tq.Gj)(this.props.stylePreviewShown.style),headerSize:"small",initialWidth:N.tA,initialPosition:t,onClose:this.onCloseStylePreviewModal,recordingKey:h.Pt(this.props,"modal"),dragHeaderOnly:!0},l.createElement("div",{className:op.FY},this._stylePreviewThumbnail.render({isVisible:!0}),this._externalStyleLink.render({isVisible:n}))))}},this._externalStyleLink=new eV.H4(()=>l.createElement(of,{stylePreviewShown:this.props.stylePreviewShown,user:this.props.user})),this._framePresetPanel=new eV.H4(()=>l.createElement(aM.nl,{key:"frame-presets",dispatch:this.props.dispatch,expandedFramePresetType:this.props.expandedFramePresetType,recordingKey:"framePresetPanel"})),this._pencilToolPanel=new eV.H4(()=>l.createElement(s8,{key:"pencilToolPanel",id:"pencilToolPanel",openFile:this.props.openFile,recordingKey:"pencilToolPanel"})),this._canvasBackgroundPanel=new eV.H4(()=>{let e=this.props.selectionProperties;return l.createElement(av,{key:"canvas-background",backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,exportBackgroundDisabled:e.exportBackgroundDisabled,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,editModeType:this.props.appModel.activeCanvasEditModeType,pickerShown:this.props.pickerShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,library:this.props.library,openFile:this.props.openFile,recordingKey:"canvasBackgroundPanel",currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,defaultColor:$.rC,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,hasExports:!!e.exportSettings&&(0,z._W)(e.exportSettings,[]).length>0})}),this._viewOnlyFlowsPanel=new eV.H4(()=>l.createElement(nY.A,{viewOnly:!0})),this._localStylesPanel=new eV.H4(e=>l.createElement(nU,{key:e,scrollContainer:this.scrollContainer,recordingKey:e})),this._transformPanel=new eV.H4(()=>l.createElement(aZ.zq,{key:"transform",propertiesPanelState:this.state.panelState,recordingKey:"transformPanel",pickerShown:this.props.pickerShown,openFileKey:this.props.openFile?.key||null,canEditConstraints:this.props.isUI3&&this.shouldShowConstraintsResizingPanel(),onlyShowXYInputsRow:this.props.isUI3&&(this.state.panelState===N.GR.DEFAULT_SIMPLIFIED||(this.selectionProperties().areOnlyResponsiveSetsSelected??!1))})),this._vectorPanel=new eV.H4(()=>{let e=this.selectionProperties(),t=this.props.isUI3;return l.createElement(aZ.Ss,{key:"vector-transform",x:e.x,y:e.y,cornerRadius:e.cornerRadius,handleMirroring:e.handleMirroring,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"vectorTransformPanel",isUI3:t})}),this._liveObjectPanel=new eV.H4(()=>l.createElement(sH.cI,{key:"live-object",recordingKey:"liveObjectPanel",pasteSources:this.props.selectionProperties.pasteSources})),this._instancePanel=new eV.H4(()=>{let e=this.props.selectionProperties;return l.createElement(aR._I,{key:"instance",symbolGUIDsBackingSelection:e.symbolGUIDsBackingSelection,resettableInstanceOverridesMap:e.resettableInstanceOverrides,stateGroupSelectionInfo:e.stateGroupSelectionInfo,recordingKey:"instancePanel"})}),this._constraintsResizingPanel=new eV.H4(()=>l.createElement(aC,{key:"constraints",openFileKey:this.props.openFile?.key||null,dropdownShown:this.props.dropdownShown,recordingKey:"constraintsPanel"})),this._stackPanel=new eV.H4(()=>l.createElement(uk,{key:"stack",onlyShowResizingRow:this.props.isUI3&&this.state.panelState===N.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:this.props.shownPanels[s.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),this._removeGroupFillAndStrokePanel=new eV.H4(()=>l.createElement(sj,{key:"remove-group-fill-stroke"})),this._maskPanel=new eV.H4(()=>{let e=this.selectionProperties();return l.createElement(sW,{key:"mask",maskType:e.maskType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"maskPanel"})}),this._componentPropertiesPanel=new eV.H4(()=>l.createElement(tD,{key:"componentProperties",recordingKey:"propsPanel"})),this._componentPanel=new eV.H4(()=>l.createElement(e1.cu,{key:"component",recordingKey:"componentPanel"})),this._templatePropertiesPanel=new eV.H4(()=>l.createElement(nq,{key:"templateProperties",recordingKey:"templatePropsPanel"})),this._templatePanel=new eV.H4(()=>l.createElement(uJ,{key:"template"})),this._gridsPanel=new eV.H4(()=>l.createElement(N.tC,{key:"grids",selectionProperties:this.props.selectionProperties})),this._layerPanel=new eV.H4(()=>{let e=this.props.selectionProperties;return this.props.isUI3?l.createElement(sK,{recordingKey:"appearancePanel"}):l.createElement(sb,{key:"layer",blendMode:e.blendMode,opacity:e.opacity,visible:e.visible,variableConsumptionInfo:e.variableConsumptionInfo,recordingKey:"layerPanel"})}),this._localVariablesPanel=new eV.H4(()=>l.createElement(nJ,{key:"local-variables"})),this._typePanel=new eV.H4(()=>l.createElement(N.gc,{key:"type",selectionProperties:this.props.selectionProperties})),this._selectionPaints=new eV.H4(()=>l.createElement(l8.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:$.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3})),this._fillPanel=new eV.H4(()=>{let e;return this.props.selectionProperties.numSelectedByType&&(e=(0,nW.aZ)(s.rrT.FILL,this.props.selectionProperties.numSelectedByType)),l.createElement(N.B8,{key:"fill",selectionProperties:this.props.selectionProperties,variableScopes:e})}),this._strokePanel=new eV.H4(()=>{let e=this.props.selectionProperties;return l.createElement(l8.$p,{key:"stroke",stylePickerShown:this.props.stylePickerShown,strokePanelMode:this.props.strokePanelMode,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,strokePaints:e.strokePaints,borderSharedWeight:e.borderSharedWeight,strokeWeight:e.strokeWeight,strokeAlign:e.strokeAlign,strokeCap:e.strokeCap,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,connectorLineStyle:e.connectorLineStyle,leftEndCap:e.leftEndCap,rightEndCap:e.rightEndCap,maxStrokeWeight:e.maxStrokeWeight,dashPattern:e.dashPattern,dashCap:e.dashCap,terminalCap:e.terminalCap,arcRadius:e.arcRadius,arcSweep:e.arcSweep,numSelectedByType:e.numSelectedByType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,pickerShown:this.props.pickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,stylePickerListLayout:this.props.stylePickerListLayout,currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:$.Em,inheritStyleKey:e.inheritFillStyleKeyForStroke||null,inheritStyleID:e.styleIdForStrokeFill||null,library:this.props.library,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,openFile:this.props.openFile,recordingKey:"strokePanel",isPanelBodyCollapsedAtom:null})}),this._effectsPanel=new eV.H4(()=>l.createElement(N.w5,{key:"effects",selectionProperties:this.props.selectionProperties})),this._slidesShadowPanel=new eV.H4(()=>l.createElement(iV,{recordingKey:"slidesShadowPanel"})),this._exportPanelInspectTab=new eV.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,n=(0,v.Nf)(this.props.appModel);return l.createElement(aO.LI,{key:"export",title:this.isReadOnlyNonInspect()?(0,x.t)("fullscreen.properties_panel.export"):(0,x.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:t,singleNodeName:aO.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:n,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:oe.iP})}),this._exportPanel=new eV.H4(()=>{let e=this.props.selectionProperties,t=(0,v.Nf)(this.props.appModel);return l.createElement(aO.LI,{key:"export",openFile:this.props.openFile,singleNodeName:aO.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:t,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:oe.iP})}),this._pluginPanel=new eV.H4(()=>{let e=this.selectionProperties();return l.createElement(s9.Q,{key:"plugin",pluginRelaunchData:e.pluginRelaunchData,localPlugins:this.props.localPlugins,publishedPlugins:this.props.publishedPlugins,allSavedPlugins:this.props.allSavedPlugins.plugins,orgEntity:(0,W.Jl)(this.props),dispatch:this.props.dispatch,openFileKey:this.props.openFile?.key||null,editorType:this.props.openFile?.editorType?(0,eK.wN)(this.props.openFile.editorType):null,numSelected:e.numSelected??0,recordingKey:"pluginPanel"})}),this._prototypePanel=new eV.H4(()=>l.createElement(pS,{key:"prototype",dispatch:this.props.dispatch,selectionProperties:this.selectionProperties(),appModel:this.props.appModel,pickerShown:this.props.pickerShown,dropdownShown:this.props.dropdownShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,sceneGraphSelection:this.props.sceneGraphSelection,editModeType:this.props.appModel.activeCanvasEditModeType,library:this.props.library,openFile:this.props.openFile,userFlags:this.props.userFlags,recordingKey:"prototypePanel"})),this._scalePanel=new eV.H4(()=>(0,u.kc)().ce_scale_tool_v2?l.createElement(dn,{key:"scale",recordingKey:"scalePanel"}):l.createElement(p4,{key:"scale",recordingKey:"scalePanel"})),this._slidesAlignPanel=new eV.H4(()=>l.createElement(n6,{recordingKey:"slidesAlignPanel"})),this._slidesThemePanel=new eV.H4(()=>l.createElement(iW,{recordingKey:"slidesThemePanel"})),this._slidesInstancePanel=new eV.H4(()=>l.createElement(iE,{recordingKey:"slidesInstancePanel"})),this._slidesFillPanel=new eV.H4(()=>l.createElement(ic,{recordingKey:"slidesFillPanel"})),this._slidesOpacityPanel=new eV.H4(()=>l.createElement(iR,{recordingKey:"slidesOpacityPanel"})),this._slidesTypePanel=new eV.H4(()=>l.createElement(at,{recordingKey:"slidesTypePanel"})),this._slidesLinkPanel=new eV.H4(()=>l.createElement(iN,{recordingKey:"slidesLinkPanel"})),this._slidesBorderPanel=new eV.H4(()=>l.createElement(rE,{recordingKey:"slidesBorderPanel"})),this._slidesCornerPanel=new eV.H4(()=>l.createElement(rf,{recordingKey:"slidesCornerPanel"})),this._slidesAnimationPanel=new eV.H4(()=>l.createElement(lG,null)),this._slidesEmbeddablePrototypePanel=new eV.H4(()=>l.createElement(rA,{selection:this.props.sceneGraphSelection})),this._slidesInteractiveWidgetPanel=new eV.H4(()=>l.createElement(ig,{selection:this.props.sceneGraphSelection})),this._slidesSelectionPaints=new eV.H4(()=>l.createElement(l8.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:$.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3,customColorPicker:n5.GY,hideCustomColorPickerFillTypeToggle:!1})),this._sitesPositionPanel=new eV.H4(()=>l.createElement(n0.Qc,{recordingKey:"positionPanel"})),this._sitesLinkPanel=new eV.H4(()=>l.createElement(n0.rC,{recordingKey:"linkPanel"})),this._sitesPageMetadataPanel=new eV.H4(()=>l.createElement(n0.li,{recordingKey:"pageMetadataPanel"})),this._sitesCanvasOverlayPanel=new eV.H4(()=>l.createElement(n0.rf,null)),this._sitesAccessibilityPanel=new eV.H4(()=>l.createElement(n0.l,{recordingKey:"accessibilityPanel"})),this._sitesResponsivenessPanel=new eV.H4(()=>l.createElement(n0.eg,{key:"responsiveness"})),this._sitesHTMLWidgetPanel=new eV.H4(()=>l.createElement(n0.Mr,null)),this._sitesInteractionsPanel=new eV.H4(()=>l.createElement(n0.GO,{recordingKey:"interactionsPanel"})),this._sitesCodeComponentPanel=new eV.H4(()=>l.createElement(n0.nl,{recordingKey:"codeComponentPanel"})),this._dakotaRichContentNodePanel=new eV.H4(()=>l.createElement(F.a8,{selection:this.props.sceneGraphSelection})),this._dakotaItemPanel=new eV.H4(()=>l.createElement(F.Ug,{selection:this.props.sceneGraphSelection})),this._cooperConstrainedEditPanel=new eV.H4(()=>l.createElement(D,{recordingKey:"constrainedEditPanel"})),this._cooperPublishEditPanel=new eV.H4(()=>l.createElement(D,{recordingKey:"constrainedEditPanel"})),this._cooperExportPanel=new eV.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,n=(0,v.Nf)(this.props.appModel);return l.createElement(D,{key:"export",title:(0,x.t)("fullscreen.properties_panel.cooper_export"),standalone:!0,openFile:t,singleNodeName:aO.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:n,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:oe.iP})}),this.shouldShowCooperFreeformEditPanel=()=>this.props.appModel.activeCanvasEditModeType===s.m1T.COOPER_LAYOUT,this.isStyleSelected=()=>this.props.selectedStyleProperties&&!!this.props.selectedStyleProperties.guid,this.isLiveObjectSelected=()=>(this.props.selectionProperties.pasteSources||[]).length>0,this.selectionProperties=()=>this.isStyleSelected()?this.props.selectedStyleProperties:this.props.selectionProperties,this.shouldShowAlignControls=()=>(0,oe.d6)(this.props.shownPanels),this.shouldRenderUI3ToolbarItems=()=>this.props.isUI3,this.shouldShowConstraintsResizingPanel=()=>{let e=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&e[s.ibQ.CONSTRAINTS_ITEM]},this.shouldShowInteractionsPanel=()=>!!this.props.selectionProperties.isValidPrototypingSourceSelected,this.isStateSelected=()=>this.props.selectionProperties.stateGroupSelectionInfo?.mode===s.iCO.STATE,this.shouldShowLocalVariablesPanel=()=>{let e=(0,I.P)(this.props.selectedView),t=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&!this.props.appModel.isReadOnly&&0===Object.keys(this.props.sceneGraphSelection).length&&!t[s.ibQ.FRAME_PRESETS]&&!e},this.shouldShowSelectionPaintsPanel=()=>{let e=this.props.shownPanels;return(0,oe.fI)(e,this.scaleShouldHideOtherPanels(),this.props.selectionPaints)},this.shouldShowSlidesLinkPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!!e&&(e.TEXT??0)>0&&(0,Y.OU)(e,["TEXT"])},this.shouldShowSlidesAlignPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties,t=e&&(0,Y.vx)(e,"SLIDE");return this.shouldShowAlignControls()&&!t},this.doesNotHaveAnySelectedText=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!(e?.TEXT&&e.TEXT>0)},this.shouldShowStackPanel=e=>{let t=this.props.shownPanels;return(0,oe.IY)(t,this.scaleShouldHideOtherPanels(),this.props.selectionProperties,this.isStyleSelected()?this.props.selectedStyleProperties:void 0,e)},this.scaleShouldHideOtherPanels=()=>this.props.shownPanels[s.ibQ.SCALE_ITEM]&&!(0,u.kc)().ee_scale_tool_show_all_panels,this.shouldShowExportPanel=()=>this.props.openFile&&!(0,eF.Pe)(this.props.openFile)&&!(0,f.MP)(),this.shouldShowLocalStylesPanel=()=>{let e=(0,I.P)(this.props.selectedView);return!this.scaleShouldHideOtherPanels()&&0===Object.keys(this.props.sceneGraphSelection).length&&!this.props.shownPanels[s.ibQ.FRAME_PRESETS]&&!e},this.renderSimplifiedDesignPanels=()=>{let e=this.props.shownPanels;if((0,A.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,O.$D)(C.FigmaTeam.EDITOR_USABILITY,e)}return l.createElement(L.i,{displayAs:L.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(as.Mw,{panelName:as.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(n4.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),(0,u.kc)().piper_design_styles&&this._slidesThemePanel.render({isVisible:e[s.ibQ.SLIDES_THEME]}),this._transformPanel.render({isVisible:!0}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[s.ibQ.SCALE_ITEM]}),!this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),!this.props.isUI3&&this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),this.state.panelState===N.GR.DEFAULT_SIMPLIFIED&&l.createElement(uZ,{onExpand:()=>{this.setState({panelState:N.GR.OVERRIDDEN_EXPANDED})}}),this.state.panelState===N.GR.OVERRIDDEN_EXPANDED&&l.createElement(l.Fragment,null,this.props.isUI3&&this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),l.createElement(aA.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),this._vectorPanel.render({isVisible:e[s.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._maskPanel.render({isVisible:e[s.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this._typePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[s.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[s.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[s.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()})),!this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[s.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDesignPanels=()=>{let e=this.props.shownPanels;return(((0,A.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,M.Lg)()&&!(0,M.nl)()&&(0,O.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,A.Im)(e),shouldRenderInspectTab:this.shouldRenderInspectTab()}),e[s.ibQ.FRAME_PRESETS])?l.createElement(L.i,{displayAs:L.C.Block},this._framePresetPanel.render({isVisible:!0})):e[s.ibQ.PENCIL_TOOL]?l.createElement(L.i,{displayAs:L.C.Block},this._pencilToolPanel.render({isVisible:!0})):l.createElement(L.i,{displayAs:L.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(as.Mw,{panelName:as.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(n4.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this.props.isUI3&&this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),(0,u.kc)().piper_design_styles&&this._slidesThemePanel.render({isVisible:e[s.ibQ.SLIDES_THEME]}),this._transformPanel.render({isVisible:this.props.isUI3&&this.shouldShowAlignControls()||e[s.ibQ.TRANSFORM_ITEM]}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[s.ibQ.SCALE_ITEM]}),l.createElement(aA.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),this._templatePropertiesPanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),!this.props.isUI3&&this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),!this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}),this._liveObjectPanel.render({isVisible:this.isLiveObjectSelected()}),!this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._vectorPanel.render({isVisible:e[s.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),this._maskPanel.render({isVisible:e[s.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[s.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[s.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[s.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}),(0,u.kc)().jsx_debugging&&l.createElement(aV,null))},this.renderSlidesPanels=()=>{let e=this.props.shownPanels;return e[s.ibQ.PENCIL_TOOL]?l.createElement(L.i,{displayAs:L.C.Block},this._pencilToolPanel.render({isVisible:!0})):l.createElement(L.i,{displayAs:L.C.Block},this._slidesAlignPanel.render({isVisible:this.shouldShowSlidesAlignPanel()}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),shouldShowSlidesTypePanel:e[s.ibQ.TYPE_ITEM]}),this._slidesThemePanel.render({isVisible:e[s.ibQ.SLIDES_THEME]}),this._slidesInstancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._slidesTypePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._slidesFillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._slidesOpacityPanel.render({isVisible:e[s.ibQ.SLIDES_OPACITY_ITEM]}),this._slidesCornerPanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),this._slidesBorderPanel.render({isVisible:e[s.ibQ.STROKE_ITEM]&&this.doesNotHaveAnySelectedText()}),this._slidesShadowPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this._slidesLinkPanel.render({isVisible:e[s.ibQ.TYPE_ITEM]&&this.shouldShowSlidesLinkPanel()}),this._slidesSelectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._slidesEmbeddablePrototypePanel.render({isVisible:e[s.ibQ.SLIDES_EMBED]}),this._slidesInteractiveWidgetPanel.render({isVisible:e[s.ibQ.SLIDES_INTERACTIVE_WIDGET]}))},this.renderSlidesAnimationPanels=()=>{let e=this.props.shownPanels;return l.createElement(L.i,{displayAs:L.C.Block},this._slidesAnimationPanel.render({isVisible:e[s.ibQ.SLIDES_ANIMATION]}))},this.renderSitesPanels=()=>{let e=this.props.shownPanels,t=(0,u.kc)().sts_document_settings;return l.createElement(L.i,{displayAs:L.C.Block},this.shouldRenderUI3ToolbarItems()&&l.createElement(uq._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),withBottomBorder:!(t&&this.shouldShowSitesPageMetadataPanel())}),t?this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}):null,this._sitesCanvasOverlayPanel.render({isVisible:this.shouldShowSitesCanvasOverlayPanel()}),this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this._componentPanel.render({isVisible:e[s.ibQ.COMPONENT_ITEM]}),this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&this.shouldShowInstancePanel()}),this._sitesPositionPanel.render({isVisible:this.shouldShowSitesPositionPanel()}),this._transformPanel.render({isVisible:e[s.ibQ.TRANSFORM_ITEM]}),this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[s.ibQ.SCALE_ITEM]}),t?null:this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}),l.createElement(aA.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[s.ibQ.TEMPLATE_ITEM]}),this._vectorPanel.render({isVisible:e[s.ibQ.VECTOR_ITEM]}),this._maskPanel.render({isVisible:e[s.ibQ.MASK_ITEM]}),this._layerPanel.render({isVisible:e[s.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[s.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[s.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[s.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._fillPanel.render({isVisible:e[s.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[s.ibQ.STROKE_ITEM]}),this._effectsPanel.render({isVisible:e[s.ibQ.EFFECTS_ITEM]}),this._gridsPanel.render({isVisible:e[s.ibQ.GRIDS_ITEM]}),this._sitesCodeComponentPanel.render({isVisible:this.shouldShowSitesCodeComponentPanel()}),this._sitesHTMLWidgetPanel.render({isVisible:this.shouldShowSitesHTMLWidgetPanel()}),this._sitesAccessibilityPanel.render({isVisible:this.shouldShowSitesAccessibilityPanel()}),this._sitesResponsivenessPanel.render({isVisible:this.shouldShowSitesResponsivenessPanel()}),(0,V.U9)()&&this._dakotaRichContentNodePanel.render({isVisible:!1}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDakotaPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},this._dakotaItemPanel.render({isVisible:!0})),this.renderCooperPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},this._cooperConstrainedEditPanel.render({isVisible:!0}),l.createElement(D,{shownPanels:this.props.shownPanels}),l.createElement(D,{shownPanels:this.props.shownPanels,instancePanel:this._slidesInstancePanel,showInstancePanel:this.shouldShowInstancePanel(),selectionPaintsPanel:this._slidesSelectionPaints,showSelectionPaints:this.shouldShowSelectionPaintsPanel()})),this.renderCooperPublishPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},this._cooperPublishEditPanel.render({isVisible:!0})),this.renderInspectionPanels=()=>{let e=this.props.openFile?.canEdit,t=this.props.selectionProperties,n=!t.prototypeStartingPointsInfo||t.prototypeStartingPointsInfo?.length>0,r=0===Object.keys(this.props.sceneGraphSelection).length,i=r&&!e&&n;return l.createElement(B.fu,{name:eU.e0.CODE_PANEL},l.createElement(L.i,{displayAs:L.C.Block},l.createElement(as.Mw,{panelName:as.ON.INSPECT}),l.createElement(aT.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:this._viewOnlyFlowsPanel.render({isVisible:i}),localStylesPanel:this._localStylesPanel.render({isVisible:r,valueArgs:["code-local-styles"]})})))},this.renderLivingDesignsPanels=()=>l.createElement(L.i,{displayAs:L.C.Block},l.createElement(eL,null)),this.renderPrototypePanels=()=>{let e=this.props.shownPanels;return l.createElement(L.i,{displayAs:L.C.Block},this._sitesLinkPanel.render({isVisible:this.shouldShowSitesLinkPanel()}),this._sitesInteractionsPanel.render({isVisible:this.shouldShowSitesInteractionsPanel()}),this._framePresetPanel.render({isVisible:e[s.ibQ.FRAME_PRESETS]}),this._pencilToolPanel.render({isVisible:e[s.ibQ.PENCIL_TOOL]}),this._prototypePanel.render({isVisible:!e[s.ibQ.FRAME_PRESETS]&&!e[s.ibQ.PENCIL_TOOL]&&!this.selectionProperties().containsResponsiveSets}))},this.shouldRenderInspectTab=()=>this.props.appModel.showUi&&!!this.props.user&&this.props.appModel.isReadOnly,this.onKeyDown=e=>{this.props.selectedStyleProperties&&(0,o.fn)(this.props.selectedStyleProperties.guid)&&(e.event.keyCode===m.Uz.ESCAPE?(e.accept(),s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID)):e.event.keyCode===m.Uz.F&&s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID))},this.scrollContainer=null,this.refMainScrollContainer=e=>{this.scrollContainer=e},this.isReadOnlyNonInspect=()=>this.props.appModel.isReadOnly&&!(0,tK.$A)(this.props.selectedView),this.renderPanelContent=()=>{let e=this.props.appModel.topLevelMode,t=this.props.propertiesPanelTab,n=this.props.appModel.isReadOnly,r=e!==s.lyf.PREVIEW&&(e!==s.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==s.lyf.DEV_HANDOFF&&t===s.FAf.DESIGN,i=e!==s.lyf.PREVIEW&&(e!==s.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==s.lyf.DEV_HANDOFF&&t===s.FAf.SLIDE,a=e!==s.lyf.PREVIEW&&(e!==s.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==s.lyf.DEV_HANDOFF&&t===s.FAf.SLIDE_ANIMATION,o=e===s.lyf.LAYOUT&&!n&&t===s.FAf.SITE,c=e!==s.lyf.PREVIEW&&e!==s.lyf.BRANCHING&&t===s.FAf.PROTOTYPE,p=e===s.lyf.PREVIEW&&!this.props.userStateLoaded||t===s.FAf.INSPECT,d=e===s.lyf.LAYOUT&&!n&&t===s.FAf.COOPER,m=e===s.lyf.LAYOUT&&!n&&t===s.FAf.COOPER_PUBLISH,h=(0,V.U9)()&&e===s.lyf.LAYOUT&&!n&&t===s.FAf.DAKOTA,E=(0,u.kc)().livefish&&e===s.lyf.LAYOUT&&!n&&t===s.FAf.LIVING_DESIGNS,_=e===s.lyf.LAYOUT&&!n&&t===s.FAf.COOPER_EXPORT;return r||i||a||o||h||d||m||_||c||p||E||t===s.FAf.EXPORT||t===s.FAf.COMMENT||(0,O.x1)("PropertiesPanel","Rendering empty properties panels",{topLevelMode:s.lyf[e],tab:s.FAf[t],shouldRenderInspectTab:this.shouldRenderInspectTab()}),l.createElement(l.Fragment,null,r&&(this.state.panelState===N.GR.DEFAULT_EXPANDED?this.renderDesignPanels():this.renderSimplifiedDesignPanels()),i&&this.renderSlidesPanels(),a&&this.renderSlidesAnimationPanels(),o&&this.renderSitesPanels(),c&&this.renderPrototypePanels(),h&&this.renderDakotaPanels(),p&&this.renderInspectionPanels(),d&&this.renderCooperPanels(),m&&this.renderCooperPublishPanels(),E&&this.renderLivingDesignsPanels(),_&&this._cooperExportPanel.render({isVisible:!0}),t===s.FAf.EXPORT&&this._exportPanelInspectTab.render({isVisible:!0}),t===s.FAf.COMMENT&&l.createElement(this.props.commentsPanel,null))},this.onResize=e=>{e=(0,i.clamp)(e,ml+1,500),(0,b.UK)().propertiesPanelSplitPosition.set(e)},this.getRightPanelAnimation=(e,t)=>{if(this.props.isUI3)return;let n={ease:"easeInOut",duration:.2,delay:this.props.isCollapsed?void 0:.05};return this.props.isCollapsed?{initial:{left:`calc(${e}px + ${t})`},animate:{left:`calc(${e}px + ${t})`,display:"block",transitionEnd:{display:"none"}},transition:n}:{initial:{left:0},transition:n}}}componentDidUpdate(e,t){super.componentDidUpdate(e,t);let n=e.selectionProperties.productComponentGUIDBackingInstances,l=this.props.selectionProperties.productComponentGUIDBackingInstances;if(n!==l){let e=N.GR.DEFAULT_EXPANDED;if(l){let t=this.props.sceneGraph.get(l);t?.simplifyInstancePanels&&(e=N.GR.DEFAULT_SIMPLIFIED)}this.setState({panelState:e})}}getStylePreviewThumbnailTitle(e,t){if(t)switch(e){case"FILL":return(0,x.t)("design_systems.styles.view_color_style");case"TEXT":return(0,x.t)("design_systems.styles.view_text_style");case"EFFECT":return(0,x.t)("design_systems.styles.view_effect_style");case"GRID":return(0,x.t)("design_systems.styles.view_grid_style");default:return(0,x.t)("design_systems.styles.view_style")}else switch(e){case"FILL":return(0,x.t)("design_systems.styles.edit_color_style");case"TEXT":return(0,x.t)("design_systems.styles.edit_text_style");case"EFFECT":return(0,x.t)("design_systems.styles.edit_effect_style");case"GRID":return(0,x.t)("design_systems.styles.edit_grid_style");default:return(0,x.t)("design_systems.styles.edit_style")}}shouldShowSitesPositionPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_POSITION_ITEM]}shouldShowSitesLinkPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_LINK_ITEM]}shouldShowSitesPageMetadataPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_PAGE_METADATA_ITEM]}shouldShowSitesCanvasOverlayPanel(){return(0,n1.Vj)(this.props.selectedView)&&(0,u.kc)().internal_only_debug_tools}shouldShowSitesAccessibilityPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_ACCESSIBILITY_ITEM]}shouldShowSitesResponsivenessPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_RESPONSIVENESS_ITEM]}shouldShowSitesHTMLWidgetPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_HTML_WIDGET_ITEM]}shouldShowSitesInteractionsPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_INTERACTIONS_ITEM]}shouldShowSitesCodeComponentPanel(){return(0,n1.Vj)(this.props.selectedView)&&this.props.shownPanels[s.ibQ.SITES_CODE_COMPONENT_ITEM]}shouldShowInstancePanel(){return this.props.shownPanels[s.ibQ.INSTANCE_ITEM]&&!this.isLiveObjectSelected()}shouldShowComponentPropertiesPanel(){return this.props.shownPanels[s.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}renderLoading(e){return l.createElement(T.vL,{name:"propertiesPanel",focusOnMount:!0,handleKeyDown:this.onKeyDown},l.createElement(_.V,{className:p()(op.Lp,{[op.Ph]:this.props.isInsetEditorEnabled})},l.createElement(R.P,{ref:this.refMainScrollContainer,className:p()(op.ux,op.KE,S.Dm,{[op.eu]:e,[op.Ph]:this.props.isInsetEditorEnabled}),width:oe.iP,hideScrollbar:!0,scrollingDisabled:!0},l.createElement("div",{className:op.eh,"data-non-interactive":!0},l.createElement(oh.B7,null))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal()))}render(){if(this.props.isLoading)return this.renderLoading(this.props.shouldAnimateLoadingState);let e=this.props.selectedStyleProperties&&(0,o.fn)(this.props.selectedStyleProperties.guid),t=!!(this.props.dropdownShown||this.props.pickerShown?.modal),n=this.props.propertiesPanelTab,r=n===s.FAf.COMMENT,i=!this.isReadOnlyNonInspect(),a=(0,I.P)(this.props.selectedView),c=!e||!t,m=!r&&c,h=(0,G.ft)(),g=l.createElement("div",{className:r&&i&&!a?op.By:op.eh,onMouseDown:h?void 0:this.onMouseDown,onPointerDown:h?this.onMouseDown:void 0,"data-non-interactive":!0},l.createElement(H.j9.Consumer,null,()=>this.renderPanelContent())),P=this.props.isUI3,C=(0,b.UK)().propertiesPanelSplitPosition.getCopy(),A=P?"number"==typeof C&&C>ml+1?C:ml+1:oe.iP+1,O=P?`${(0,d.jz)(t9.M$q)}px`:"var(--spacer-2)",M=this.props.appModel.topLevelMode===s.lyf.HISTORY,L=P&&this.props.isCollapsed;return l.createElement(E.k,{name:"properties_panel",trackingEnabled:(0,u.kc)().trackable_properties||a,alsoTrack:()=>{let e=n===s.FAf.DESIGN?"design_view":"slide_view";return{pageId:(0,v.Nf)(this.props.appModel),selectedNodeIds:Object.keys(this.props.sceneGraphSelection),panelMode:a?e:void 0}}},l.createElement(T.vL,{name:"propertiesPanel",focusOnMount:!r,handleKeyDown:this.onKeyDown},l.createElement(k.lk.Provider,{value:this.showCreateStyleModal},l.createElement(_.V,{className:p()(op.Lp,{[op.R]:!this.props.appModel.showUi,[op.dn]:L,[op.Ph]:this.props.isInsetEditorEnabled&&!this.props.isUIMinimized,[op.Fo]:"side_panel"===this.props.inProductHelpViewType}),style:{width:A,"--inProductHelpSidePanelWidth":`${this.props.inProductHelpSidePanelWidth}px`}},this.props.shouldShowBackgroundGradient&&!this.props.isInsetEditorEnabled&&l.createElement(y.T,{side:"right"}),l.createElement(mn.X,null,l.createElement(me.l,{className:p()(op.ux,S.Dm,{[op.ew]:this.props.rulersVisible,[op.Ph]:this.props.isInsetEditorEnabled&&!this.props.isUIMinimized,[op.Jq]:!this.props.justChangedMinimizeUIValue}),onContextMenu:this.onContextMenu,"data-onboarding-key":"properties-panel",size:A,onResize:this.onResize,side:"left",animation:this.getRightPanelAnimation(A,O),"data-cancel-insertable-resource-drag-and-drop":!0},l.createElement(mi,{showRightSidebarPill:L},this.props.isUI3&&l.createElement(mt.qW,{openFile:this.props.openFile,dropdownShown:this.props.dropdownShown,multiplayer:this.props.multiplayer,user:this.props.user,isIntegration:(0,f.ck)(),selectedView:this.props.selectedView,recordingKey:this.props.recordingKey}),M&&l.createElement(w.yU,{recordingKey:"versionHistoryView",isUI3:P}),!L&&!M&&l.createElement(u8,{activeTab:n,shouldRenderInspectTab:this.shouldRenderInspectTab(),shouldShowAlignControls:this.shouldShowAlignControls(),isUI3:this.props.isUI3,recordingKey:this.props.recordingKey}),!L&&!M&&(r?g:l.createElement("div",{className:op.gq},l.createElement(R.P,{enableOverscroll:!0,key:this.props.propertiesPanelTab,ref:this.refMainScrollContainer,className:op.jG,containerId:N.rp,hideScrollbar:!m,onContextMenu:this.onContextMenu,scrollingDisabled:r||(e?t:!!this.props.dropdownShown)},g))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal())))))))}}function mi({children:e,showRightSidebarPill:t}){let n=l.useRef(null);(0,ol.C_)(n);let r=(0,ot.U1)(n),i=(0,on.b)(),a=(0,u1.qM)();return l.createElement("div",{ref:r,className:p()(op.KE,{[op.tM]:t,[op.Ph]:i&&!a})},e)}mr.displayName="PropertiesPanel";let ma=(0,d.jz)(t9.uj0),ms=e=>{e=(0,i.clamp)(e,ma+1,500),(0,b.UK)().propertiesPanelSplitPosition.set(e)};function mo(e){let t=(0,r.wA)(),n=(0,l.useCallback)(t=>{e.selectedStyleProperties&&(0,o.fn)(e.selectedStyleProperties.guid)&&(t.event.keyCode===m.Uz.ESCAPE?(t.accept(),s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID)):t.event.keyCode===m.Uz.F&&s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID))},[e.selectedStyleProperties]),i=(0,l.useCallback)(({styleType:e,inheritStyleKeyField:n,nodeId:l,rowLeft:r,rowTop:i})=>{t(g.sw()),t(g.Zs({rowLeft:r,rowTop:i,styleType:e,inheritStyleKeyField:n,nodeId:l}))},[t]),c=(0,l.useCallback)(()=>{s.glU.selectStyle(a.n3.INVALID,a.IA.INVALID),t(g.sw()),t((0,P.B)())},[t]),N=null,C=e=>{N=e},A=(0,l.useCallback)((t,n)=>{if(e.isUI3)return;let l={ease:"easeInOut",duration:.2,delay:e.isCollapsed?void 0:.05};return e.isCollapsed?{initial:{left:`calc(${t}px + ${n})`},animate:{left:`calc(${t}px + ${n})`,display:"block",transitionEnd:{display:"none"}},transition:l}:{initial:{left:0},transition:l}},[e.isCollapsed,e.isUI3]),O=e.propertiesPanelTab,M=O===s.FAf.COMMENT,R=(0,I.P)(e.selectedView),L=e.isUI3,x=(0,b.UK)().propertiesPanelSplitPosition.getCopy(),D=L?"number"==typeof x&&x>ma+1?x:ma+1:oe.iP+1,F=L?`${(0,d.jz)(t9.M$q)}px`:"var(--spacer-2)",V=L&&e.isCollapsed,K=(0,l.useCallback)(()=>{let t=O===s.FAf.DESIGN?"design_view":"slide_view";return{pageId:(0,v.Nf)(e.appModel),selectedNodeIds:Object.keys(e.sceneGraphSelection),panelMode:R?t:void 0}},[e.sceneGraphSelection,e.appModel,R,O]),U=e.appModel.topLevelMode===s.lyf.HISTORY;return l.createElement(l.Fragment,null,e.isLoading?l.createElement(ok,{shouldAnimate:e.shouldAnimateLoadingState,refMainScrollContainer:C,onKeyDown:n,stylePreviewShown:e.stylePreviewShown,isInsetEditorEnabled:e.isInsetEditorEnabled,stylePreviewModal:l.createElement(oT,{onCloseStylePreviewModal:c,stylePreviewShown:e.stylePreviewShown,propertiesPanelTab:e.propertiesPanelTab,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:h.Pt(e,"modal"),thumbnailRecordingKey:h.Pt(e,"stylePreviewPanel"),appModel:e.appModel,library:e.library,user:e.user,dispatch:t})}):l.createElement(E.k,{name:"properties_panel",trackingEnabled:(0,u.kc)().trackable_properties||R,alsoTrack:K},l.createElement(T.vL,{name:"propertiesPanel",focusOnMount:!M,handleKeyDown:n},l.createElement(k.lk.Provider,{value:i},l.createElement(_.V,{className:p()(op.Lp,{[op.R]:!e.appModel.showUi,[op.dn]:V,[op.Ph]:e.isInsetEditorEnabled&&!V,[op.Fo]:"side_panel"===e.inProductHelpViewType}),style:{width:D,"--inProductHelpSidePanelWidth":`${e.inProductHelpSidePanelWidth}px`}},e.shouldShowBackgroundGradient&&!e.isInsetEditorEnabled&&l.createElement(y.T,{side:"right"}),l.createElement(mn.X,null,l.createElement(me.l,{className:p()(op.ux,S.Dm,{[op.ew]:e.rulersVisible,[op.Ph]:e.isInsetEditorEnabled&&!V,[op.Jq]:!e.justChangedMinimizeUIValue}),onContextMenu:ov,"data-onboarding-key":"properties-panel",size:D,onResize:ms,side:"left",animation:A(D,F),"data-cancel-insertable-resource-drag-and-drop":!0},l.createElement(ow,{showRightSidebarPill:V},e.isUI3&&l.createElement(mt.qW,{openFile:e.openFile,dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user,isIntegration:(0,f.ck)(),selectedView:e.selectedView,recordingKey:e.recordingKey}),U&&l.createElement(w.yU,{recordingKey:"versionHistoryView",isUI3:L}),!V&&!U&&l.createElement(mc,{scrollContainer:N,refMainScrollContainer:C,...e}),l.createElement(oT,{onCloseStylePreviewModal:c,stylePreviewShown:e.stylePreviewShown,propertiesPanelTab:e.propertiesPanelTab,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:h.Pt(e,"modal"),thumbnailRecordingKey:h.Pt(e,"stylePreviewPanel"),appModel:e.appModel,library:e.library,user:e.user,dispatch:t})))))))))}function mc({scrollContainer:e,refMainScrollContainer:t,...n}){let i=(0,r.wA)(),[a,s]=(0,l.useState)(N.GR.DEFAULT_EXPANDED),o=(0,l.useRef)();return(0,l.useEffect)(()=>{let e=o.current,t=n.selectionProperties.productComponentGUIDBackingInstances;if(e!==t){o.current=t;let e=N.GR.DEFAULT_EXPANDED;if(t){let l=n.sceneGraph.get(t);l?.simplifyInstancePanels&&(e=N.GR.DEFAULT_SIMPLIFIED)}s(e)}},[n.selectionProperties.productComponentGUIDBackingInstances,n.sceneGraph]),l.createElement(l.Fragment,null,l.createElement(u8,{recordingKey:n.recordingKey,activeTab:n.propertiesPanelTab,shouldRenderInspectTab:n.appModel.showUi&&!!n.user&&n.appModel.isReadOnly,shouldShowAlignControls:(0,oe.d6)(n.shownPanels),isUI3:n.isUI3}),l.createElement(u0,{panelState:a,setPanelState:e=>s(e),dispatch:i,scrollContainer:e,refMainScrollContainer:t,...n}))}function mp(e){let{dispatch:t,...n}=e;return l.createElement(l.Fragment,null,(0,u.kc)().properties_panel_refactor?l.createElement(mo,{...n}):l.createElement(mr,{...e}))}},841983:(e,t,n)=>{n.d(t,{D:()=>u,N:()=>d});var l=n(411855),r=n(188507),i=n(356390),a=n(498606),s=n(677859),o=n(88220),c=n(426906);let p=["semi-bold","semi bold","bold","extra-bold","extra bold","black"];function d(e){return p.some(t=>e.toLowerCase().startsWith(t))}function u(){let e=(0,r.d4)(e=>d(e.mirror.selectionProperties.fontStyle?.toString()||"")),t=(0,r.d4)(e=>"STRIKETHROUGH"===e.mirror.selectionProperties.whiteboardTextDecoration);return l.createElement(l.Fragment,null,l.createElement(s.K0,{svg:o.A,tooltip:"toggle-bold",tooltipType:a.Ib.LOOKUP,active:e?"LOUD":void 0,onClick:()=>i.Y5.triggerActionInUserEditScope("toggle-bold"),recordingKey:"bold",role:"switch",blurOnClick:!0}),l.createElement(s.K0,{svg:c.A,tooltip:"text-toggle-strikethrough",tooltipType:a.Ib.LOOKUP,active:t?"LOUD":void 0,onClick:()=>i.Y5.triggerActionInUserEditScope("text-toggle-strikethrough"),recordingKey:"strikethrough",role:"switch",blurOnClick:!0}))}}}]);

//# debugId=d3f6bdd7-d9a4-5d7a-9db9-8be6b47640cc

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/ca22ae2628f02f3d2c8d173d43b1dd7f1aa666c1/properties_panel-dd851e30c3c890ad.min.js.map