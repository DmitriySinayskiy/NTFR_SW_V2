"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b73694f2-e9d8-5d4a-986c-521d1b7e8c84")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8840],{759822:(e,t,n)=>{n.d(t,{u4:()=>d,$$:()=>p});var a=n(411855),o=n(629019),i=n.n(o);let r="lazy_input--lazyInput--uH0Ln";class l extends a.PureComponent{constructor(e){super(e),this.procrastinating=!1,this.procrastinationTimer=null,this.onLazyUpdate=()=>{this.procrastinating=!1,this.updateIfNotLazy(this.state.requestedValue)},this.onChange=e=>{this.procrastinate(),this.setState({value:e.target.value}),this.props.onChange(e)},this.state={value:this.props.value}}componentDidMount(){this.props.autoFocus&&this.props.innerRef?.current&&this.props.innerRef.current.focus()}UNSAFE_componentWillReceiveProps(e){this.updateIfNotLazy(e.value)}componentWillUnmount(){this.procrastinationTimer&&(clearTimeout(this.procrastinationTimer),this.procrastinating=!1)}updateIfNotLazy(e){this.procrastinating?this.setState({requestedValue:e}):this.state.value!==e&&this.setState({value:e,requestedValue:void 0})}procrastinate(){this.procrastinating=!0,this.procrastinationTimer&&clearTimeout(this.procrastinationTimer),this.procrastinationTimer=setTimeout(this.onLazyUpdate,this.props.delay)}getProps(){let e={...this.props};return delete e.delay,delete e.innerRef,e.value=this.state.value,e.onChange&&(e.onChange=this.onChange),null==e.value&&(e.value=void 0),e.className?e.className=`${e.className} ${r}`:e.className=r,e}render(){return a.createElement("input",{...this.getProps(),ref:this.props.innerRef,dir:"auto"})}}l.displayName="LazyInput",l.defaultProps={type:"text",delay:1e3};let s=a.forwardRef((e,t)=>a.createElement(l,{...e,innerRef:t}));var c=n(3453);class d extends a.Component{constructor(){super(...arguments),this.onKeyDown=e=>{this.props.onKeyDown&&this.props.onKeyDown(e),27===e.keyCode&&e.target.blur()},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)}}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let t=this.props.dataTestId;return delete e.defaultClass,delete e.dataTestId,this.props.onClick&&(e.onClick=this.onClick),a.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":t},this.props.children)}}d.displayName="ButtonBase";class p extends a.Component{render(){let{fullWidth:e,...t}=this.props;return a.createElement(d,{defaultClass:i()(c.xZ,e&&c.Ij),...t})}}p.displayName="ButtonPrimary";class u extends a.Component{render(){let e=this.props;return a.createElement(d,{defaultClass:c.HM,type:"button",...e})}}u.displayName="ButtonSecondary",a.forwardRef(function({className:e,...t},n){return a.createElement(s,{className:i()(c._Z,e),...t,ref:n})});class m extends a.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{9===e.keyCode&&this.setState({showFocus:!0})},this.documentMouseDown=()=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${c.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${c.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let e=this.props.classOverride||this.classNameForInput(),t={...this.props,className:e};return delete t.classOverride,a.createElement("input",{type:"checkbox",onFocus:this.onFocus,...t})}}m.displayName="Checkbox"},840083:(e,t,n)=>{n.d(t,{G:()=>m,Q:()=>u});var a=n(411855),o=n(629019),i=n.n(o),r=n(966712),l=n(374626),s=n(192437),c=n(259927),d=n(977230),p=n(726732),u=(e=>(e.FILE_BROWSER="file_browser",e))(u||{});function m({entryPoint:e}){return a.createElement(s.tH,{boundaryKey:"figment-debugger",fallback:a.createElement("div",null)},a.createElement(_,{entryPoint:e}))}function _({entryPoint:e}){let[t,n]=(0,l.fp)(d.eE);return(0,a.useEffect)(()=>{n(!!(0,p.wh)())},[]),t&&(0,r.kc)().figment_debugger?a.createElement("div",{className:i()("file_browser"===e?"figment_debugger--fileBrowserContainer--KNMPr figment_debugger--container--4qsMx":"figment_debugger--container--4qsMx",c.s4,c.Dm)},a.createElement(E,null)):null}function E(){let[e,t]=(0,l.fp)(d.a4),[n,o]=(0,a.useState)([]),i=(0,a.useRef)(null),r=i.current&&i.current.value.length>0,s=r?n:e;return a.createElement("div",{className:"figment_debugger--mainWrapper--Tty8t",tabIndex:0,"data-fullscreen-intercept":!0},a.createElement(g,null,a.createElement("input",{ref:i,placeholder:"\u{1F50E} Event name",className:"figment_debugger--searchBar--uECKp",onInput:t=>{let n=t.target.value.toLowerCase();n.length<3&&o([]),o(e.filter(e=>e.requestJson.event.toLowerCase().includes(n)))}})),a.createElement(g,null,a.createElement("button",{onClick:()=>{t("clear")}},"[clear]")),r&&a.createElement(g,null,"Showing "+s.length+" of "+e.length+" most recent events"),s.map(e=>a.createElement(f,{key:e.requestJson.figment_debugger_uuid,req:e})))}function g(e){return a.createElement("div",{className:"figment_debugger--sectionWrapper--Zr0-r","data-fullscreen-intercept":!0},e.children)}function f({req:e}){let[t,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),r=e.requestJson,l=(0,a.useMemo)(()=>t&&null!=r.properties?Object.entries(r.properties).map(([e,t])=>a.createElement("div",{key:e},e,": ",JSON.stringify(t))):[],[r,t]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"figment_debugger--logrow--dxWpW",tabIndex:0,role:"button",onClick:()=>{n(!t),i(!1)},"data-fullscreen-intercept":!0},a.createElement("span",null,t?"\uFF0D":"\uFF0B"),"\xa0",a.createElement("span",null,e.networkState===d.tM.SUCCESS?"\u{1F49A}":e.networkState===d.tM.FAILURE?"\u{1F494}":"\u{1F9E1}"),"\xa0",a.createElement("span",{className:"figment_debugger--timestamp--BaHtN"},r.sentAt.slice(11,16)),"\xa0",r.event),t&&a.createElement("div",{className:"figment_debugger--propertiesWrapper--hZGnc"},a.createElement("div",{className:"figment_debugger--propertiesButtonsRow--ZL1rH"},a.createElement("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e.requestJson.properties)),i(!0)}},"[",o?"copied":"copy","]")),l))}},796467:(e,t,n)=>{n.r(t),n.d(t,{FullscreenPageView:()=>nt,LibraryAssetsReduxSyncing:()=>no,onFullscreenViewRender:()=>ni}),n(137592);var a=n(411855),o=n(188507),i=n(603625),r=n(243742),l=n(627776),s=n(966712),c=n(498750),d=n(563706);let p=new Set(["-","="]),u=new Set(["-","=","f","o","p","r","s"]);function m(e){if(!u.has(e.key))return;let t=d.Ay.mac?c.xH.META:c.xH.CONTROL;(0,c.vN)(e,t)?e.preventDefault():p.has(e.key)&&(t|=c.xH.SHIFT,(0,c.vN)(e,t)&&e.preventDefault())}var _=n(794272),E=n(99380),g=n(218881),f=n(286640),y=n(179479),h=n(69961),v=n(414441),b=n(863359),N=n(201547);function I(e){return(0,v.TR)()?a.createElement(T,{...e}):a.createElement(a.Fragment,null,e.children)}function T({name:e,trackingEnabled:t,alsoTrack:n,children:o}){let i=(0,y.F)(n),r=(0,v.U2)({name:e,trackingEnabled:t,alsoTrackRef:i,isNamespace:!0,autoTrackable:!1}),{trackablePath:l,error:s}=r,c=(0,v.MF)(()=>(0,v.ET)(l)),d=(0,h.o3)(h.nt.trackableDebug),p=(0,v.MF)(()=>(0,v.R8)({componentName:"TrackableNamespace",name:e,error:s,alsoTrackedProperties:c()}));return o=(0,N.C)({children:o,isDebugMode:d,name:e,color:s?"red":"purple",depth:l.length,getTooltipText:p}),a.createElement(b.f.Provider,{value:r},o)}var A=n(192437),x=n(256975),w=n(609219),S=n(293017),P=n(986270),O=n(931828),C=n(696097),k=n(672517),D=n(720289),L=n(126049),M=n(776250),R=n(809831),V=n(988022),K=n(661843),U=n(611720),F=n(516398),B=n(288536),W=n(692609),H=n(297666),z=n(517333),G=n(529529),Y=n(325680),q=n(756085),J=n(886119),X=n(697551),$=n(384792);let j=(0,H.s)((e,t)=>{z.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var Q=n(497306),Z=n(488983),ee=n(669178),et=n(694687),en=n(860178),ea=n(309798),eo=n(940596),ei=n(587670),er=n(588169),el=n(939863),es=n(392592),ec=n(22774),ed=n(356390),ep=n(272042),eu=n(245389);let em="keyboard-layout-preference",e_=(e,t,n)=>{t&&e(ec.FU({tab:t})),n||ed.Y5.triggerAction("toggle-keyboard-shortcuts")},eE=(e,t,n,a)=>{e(O.b({keyboard_manual_supported_bell:!0})),e(es.F.enqueue({message:(0,el.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,el.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>e_(e,"layout",a)},type:em,onDismiss:()=>{e(O.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,er.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},eg=(e,t,n)=>{e(O.b({keyboard_generic_supported_first_bell:!0})),e(es.F.enqueue({message:(0,el.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,el.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{e_(e,"layout",n),(0,er.rd)({layout:t})}},type:em,onDismiss:()=>{}})),(0,er.CZ)({layout:ei.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function ef(e,t){if(!z.eD)return null;let n=await z.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let a=(0,eu.pB)(n),o=(0,er.v7)();return a===o||e(a,o,n,null!=t),n}async function ey(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let a=await n.getLayoutMap();if(function(e,t){for(let[n,a]of e)if(t?.get(n)!==a)return!1;return!0}(a,t))return t;let{layoutJSON:o,detectedLayoutsWeb:i}=(0,ep.$$)(a),r=(0,ep.ZN)({layoutJSON:o,detectedLayouts:i,desktopLayout:null}),l=(0,er.v7)();return r===l||e(r,l,JSON.stringify(o),null!=t),a}var eh=n(974105),ev=n(27703),eb=n(336599),eN=n(388094),eI=n(58032),eT=n(743415),eA=n(705129),ex=n(933342),ew=n(535257),eS=n(216158),eP=n(830524),eO=n(331626),eC=n(239671),ek=n(294662),eD=n(143678),eL=n(280945),eM=n(88823),eR=n.n(eM),eV=n(646240),eK=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(eK||{}),eU=n(38580),eF=n(529928);let eB=(0,eU.eU)(eK.NOT_INITIALIZED),eW=(0,eF.bt)(e=>({state:e,fileKey:e.openFile?.key})),eH=[eK.ACTIVE_AFTER_IDLE,eK.ACTIVE_FIRST_TIME],ez=(0,eU.eU)(null,(e,t,n)=>{let{state:a,fileKey:o}=e(eW),i=e(eB);if((i&&eH.includes(i)?"start":"end")!=(n&&eH.includes(n)?"start":"end")){let e="";switch(n){case eK.ACTIVE_AFTER_IDLE:case eK.ACTIVE_FIRST_TIME:e="active";break;case eK.IDLE_DUE_TO_INACTIVITY:case eK.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,V.ds)("active_time_spent_event",o,a,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(eB,n)}),eG=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var eY=n(915440),eq=n(279453),eJ=n(355025),eX=n(963719),e$=n(629019),ej=n.n(e$),eQ=n(168198),eZ=n(762638),e0=n(759822),e1=n(929018),e2=n(737947),e6=n(761870),e3=n(195847),e4=n(517156),e5=n(322611);function e7(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.auth);return(0,a.useEffect)(()=>{t(e6.Ts({origin:"request_permissions_entry",redirectUrl:e2.Ay.location.pathname,formState:e3.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},[t,e.accountPickerData]),a.createElement(e5.u,{useOriginalSrcFills:!0,onBackClick:()=>{n.formState===e3.qB.ACCOUNT_PICKER?e.closeAuth():t(e6.Ts({origin:"request_permissions_entry",redirectUrl:e2.Ay.location.pathname,formState:e3.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))}},a.createElement("div",{className:"request_permissions_app--authViewContainer--1XJOG"},a.createElement(e4.Ob,{id:"request-permissions-app",modal:!0,auth:n})))}var e8=n(15344);function e9(e){let t=(0,R.lg)(),n=e.pageType||t,i=((0,o.d4)(e=>e.authedUsers)??{}).byId??{},r=e.authedUsers??Object.values(i),[l,s]=(0,a.useState)(!1);return a.createElement(eQ.w,{pageType:n},l?a.createElement(e7,{accountPickerData:{authed_users:r,authed_user_access_reason:{},destination_name:(0,el.t)("mfa_required_modal.account_switcher.destination")},closeAuth:()=>{s(!1)}}):a.createElement(e1.H,{org:e.org,switchAccountsSection:a.createElement(function(){let e=(0,en.iZ)();return e?a.createElement("div",{className:ej()(eZ.cx.mt24.$,e8.Yg)},(0,el.tx)("mfa_required_modal.account_switcher.text",{userEmail:e.email,link:a.createElement(e0.u4,{defaultClass:e8.yu,onClick:()=>{s(!0)}},(0,el.tx)("mfa_required_modal.account_switcher.switch_accounts"))})):null},null),fileKey:e.fileKey}))}var te=n(358145),tt=n(838e3),tn=n(662275),ta=n(650769),to=n(198371),ti=n(408405),tr=n(737499),tl=n(335682),ts=n(227338),tc=n(977466),td=n(799569),tp=n(67833),tu=n(321112);function tm(e){let{onDismiss:t,canUpgrade:n}=e;return a.createElement(k.fu,{name:"Workshop Expired File Banner"},a.createElement("div",{className:`workshop_expiry_footer--banner--ELf7G ${tu.yl}`},a.createElement("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1"},a.createElement(tp.oS,{className:"workshop_expiry_footer--icon--mM-A8",type:tp.y1.WHITEBOARD}),a.createElement("div",{className:"workshop_expiry_footer--textContent--TN7cv"},a.createElement("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,el.tx)("whiteboard.open_sessions.expiry_banner_title")),n&&a.createElement("span",{className:"workshop_expiry_footer--subtitle--jmRvc text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,el.tx)("whiteboard.open_sessions.expiry_banner_prompt")))),a.createElement(td.Jn,{onClick:t,className:"workshop_expiry_footer--closeButton--L8lrO"})))}var t_=n(974898),tE=n(279080);function tg(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,o.wA)(),t=(0,en.iZ)(),n=!t,i=(0,to.nF)(),r=i.enabled,l=i.enabled?i.id:null,s=(0,o.d4)(e=>e.progressBarState.mode),c=(0,o.d4)(e=>e.openFile?.isTryFile),d=(0,a.useMemo)(()=>{if(!t||null==l)return!1;if(c)return!0;let e=(0,f.DN)();try{return e.get((0,tE.v6)(l)).includes(t.email)}catch(e){return!1}},[t,l,c]),p=t?.email;(0,a.useEffect)(()=>{p&&l&&c&&(0,tE.kO)(l,p)},[p,l,c]);let u=(0,tl.MY)();(0,a.useEffect)(()=>{if(r&&!(0,ti.T)(s)&&"loaded"===u.status){let t=localStorage.getItem((0,ts.K)(l));n?t?(0,ta.QA)(t):e(tn.$O({type:t_.e})):u.data?.canEdit||d||e(tn.$O({type:t_.e}))}},[e,n,r,l,s,d,u]);let m=(0,o.d4)(e=>e.openFile?.key),_=(0,o.d4)(e=>e.openFile?.name);(0,a.useEffect)(()=>{if(r&&!(0,ti.T)(s)&&n&&c&&m&&_===(0,el.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,ts.K)(l));t&&e(tt.S({userName:t,file_key:m}))}},[r,s,l,n,c,m,_,e])}();let{showEditFileFooter:n,userCanSeeEditButton:i,dismissEditFileFooter:r}=function(e){let[t,n]=(0,a.useState)(!1),i=(0,o.wA)(),r=(0,en.iZ)(),l=(0,o.d4)(e=>e.openFile?.name),s=!r,c=(0,o.d4)(e=>e.openFile),{userCanEditFile:d,userCanSeeEditButton:p}=(0,a.useMemo)(()=>s?{userCanEditFile:!1,userCanSeeEditButton:!1}:c?{userCanEditFile:c.canEdit,userCanSeeEditButton:c.showEditButton}:{userCanEditFile:!1,userCanSeeEditButton:!1},[s,c]),u=(0,tr.Kx)(),m=(0,to.nF)(),_=m.enabled,E=(0,te.ZC)(_),g=m.enabled?m.until.valueOf():null,f=(0,a.useRef)(null),y=(0,a.useCallback)(()=>{if(!s){ei.h3O?.reconnect(!1),d||n(!0);return}i(e6.Ts({origin:"logged_out_footer",formState:e3.qB.SIGN_UP,redirectUrl:e2.Ay.location.pathname})),u?.updateFigJamTryExpiration?m.enabled&&m.until?u.updateFigJamTryExpiration(m.until):u.updateFigJamTryExpiration(new Date):i(tn.to({type:tc.x,data:{headerText:(0,el.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:l||""}),subtitle:(0,el.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()},[i,e,s,d,l,u,m]);return(0,a.useEffect)(()=>{if(_&&g){let e=Math.max(g-Date.now(),0);f.current=setTimeout(()=>{f.current=null,y()},e)}return()=>{f.current&&clearTimeout(f.current)}},[i,_,g,y]),(0,a.useEffect)(()=>{null!=E&&_!==E&&(_?ei.h3O?.reconnect(!1):(f.current&&clearTimeout(f.current),y()))},[i,_,E,y]),{showEditFileFooter:t,dismissEditFileFooter:(0,a.useCallback)(()=>{n(!1)},[]),userCanSeeEditButton:p}}(t);return n?a.createElement(tm,{onDismiss:r,canUpgrade:i}):null}var tf=n(717156),ty=n(726864),th=n(788811),tv=n(29680),tb=n(279145),tN=n(334290),tI=n(979686),tT=n(750252),tA=n(214673),tx=n(503316),tw=n(742482),tS=n(144119),tP=n(632544),tO=n(479296),tC=n(59779),tk=n(590843),tD=n(7860),tL=n(374626),tM=n(877723);let tR=function(){return null};var tV=n(410424),tK=n(74021),tU=n(271245),tF=n(632430),tB=n(715879),tW=n(114716),tH=n(860707),tz=n(661060),tG=n(915643),tY=n(893606),tq=n(987850),tJ=n(239737),tX=n(940245),t$=n(554630);let tj=new t$.b({name:"sites_external",dependencies:[],exports:["atoms.ts","components.ts","figma_api.ts","fullscreen.tsx","hooks.ts","html_serializer.ts","html_widget.ts","is_sites.ts","open_html_preview.ts","responsive_text_styles.ts","sites_fullscreen_view.ts","utils.ts","snapshot.ts","devtools.ts"],friendFiles:[],routeHints:["sites_external"]}).createLazyComponent(()=>n.e(9293).then(n.bind(n,303950)).then(e=>e.SitesFullscreenViewInner),{loading:tX.H4.NONE,error:tX.H4.NONE,componentName:"LazySitesFullscreenViewInner"}),tQ=new t$.b({name:"slides",dependencies:[],exports:["ai/present_summary/constants.ts","ai/present_summary/use_ai_slide_generator.tsx","ai/slides_ai_permissions.ts","atoms.ts","behaviors/slide_deck_add_behavior.ts","behaviors/slide_deck_reorder_row_behavior.ts","file_browser/new_slides_action.tsx","flapps/common/themed_flapp_config_data.ts","flapps/flapp_overlay.tsx","flapps/youtube/youtube_oembed.ts","hooks/experiments.ts","hooks/is_slides_hooks.ts","hooks/use_selected_slide.ts","hooks/use_selected_slide_like_nodes.ts","hooks/use_slide_like_node_ids.ts","is_slides.ts","left_panel/carousel.tsx","left_panel/generate_thumbnail.ts","left_panel/single_slide_view_utils.ts","left_panel/thumbnail_generator.tsx","onboarding/onboarding_keys.ts","onboarding/slides_ai_welcome.tsx","onboarding/slides_ten_release_announcement_overlay.tsx","presenter_view_app/audience_view_header.tsx","presenter_view_app/modal/slides_desktop_presenter_view_update.tsx","presenter_view_app/presenter_view_entry.tsx","properties_panel/color_controls/slides_color_picker.tsx","properties_panel/color_controls/slides_color_picker_context_menu.tsx","properties_panel/rewrite_controls/slides_rewrite_modal.tsx","properties_panel/rewrite_controls/slides_rewrite_text_utils.tsx","properties_panel/rewrite_controls/slides_rewrite_utils.tsx","properties_panel/slides_align_panel.tsx","properties_panel/slides_animation_panel.tsx","properties_panel/slides_border_panel.tsx","properties_panel/slides_corner_panel.tsx","properties_panel/slides_embeddable_prototype_panel.tsx","properties_panel/slides_fill_panel.tsx","properties_panel/slides_instance_panel.tsx","properties_panel/slides_interactive_widget_panel.tsx","properties_panel/slides_link_panel.tsx","properties_panel/slides_opacity_panel.tsx","properties_panel/slides_presentation_presets_entrypoint.tsx","properties_panel/slides_shadow_panel.tsx","properties_panel/slides_theme_panel.tsx","properties_panel/slides_type_panel.tsx","properties_panel/type_panel_controls/slides_text_style_actions.tsx","slide_presentation/audience_view.tsx","slide_presentation/audience_view_entry.tsx","slides_bindings.ts","slides_fullscreen_view.ts","slides_ui.ts","slides_ui.tsx","speaker_notes/speaker_notes_generate.ts","speaker_notes/speaker_notes_overlay.tsx","templates/modal/slides_template_theme_picker_modal.tsx","templates/template_atoms.ts","templates/template_hooks.ts","templates/template_publish.ts","templates/use_slides_template_publish.ts","themes/theme_atoms.ts","themes/theme_id_hooks.ts","themes/theme_utils.ts","toolbars/copy_presentation_link.tsx","toolbars/slide_view_toggle.tsx","toolbars/slides_browse_resource_modal.tsx","toolbars/slides_design_toggle.tsx","toolbars/slides_editor_toolbar.tsx","toolbars/slides_insert_embed_modal.tsx","toolbars/slides_insert_shape_modal.tsx","toolbars/slides_toolbelt.tsx","utils/slides_creation_helpers.ts","utils/slides_local_storage.ts","utils/slides_logging.ts","utils/slides_mode_toggle.ts","utils/slides_panel_helpers.ts","utils/slides_select_view_helpers.ts","utils/slides_selection.ts","utils/slides_tone_dial_menu.ts"],friendFiles:[],routeHints:["slides"]}).createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(9682),n.e(6829)]).then(n.bind(n,631328)).then(e=>e.SlidesFullscreenViewInner),{componentName:"LazySlidesFullscreenViewInner",error:tX.H4.NONE,loading:tX.H4.NONE});var tZ=n(133222),t0=n(828802),t1=n(117940),t2=n(606319),t6=n(425542);function t3(e){switch((0,R.my)()){case eC.nT.Design:return a.createElement(tZ.n,{...e});case eC.nT.Whiteboard:return a.createElement(tC.lR,{...e});case eC.nT.Sites:return a.createElement(tj,{...e});case eC.nT.Slides:return a.createElement(tQ,{...e});case eC.nT.DevHandoff:return a.createElement(t0.m,{...e});case eC.nT.Cooper:return a.createElement(tR,{...e});case null:return null}}let t4=a.memo(({children:e})=>{let t=(0,o.d4)(e=>e.openFile),n=t?t.key:"",i=(0,a.useRef)(null),r=(0,o.wA)(),l=(0,tL.md)(tB.h),c=(0,o.d4)(e=>e.openFile?.canEdit??!1),[p,u]=(0,a.useState)(!1),m=(0,tv.dH)(),_=(0,tv.p8)("isReadOnly"),E=(0,et.dq)(),g=(0,tY.R)(),f=(0,tv.p8)("showUi"),y=(0,R.E3)(),h=(0,te.ZC)(y);y!==h&&h&&r(S.PQ([])),(0,tq.j)(n),(0,tJ.KQ)(n),(0,tM.OQ)(n),(0,tJ.y1)(n),tF.nz(),(0,tW.N)(),(0,t1.Ky)(),(0,a.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),d.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(t6.FC),document.body.classList.add(t6.Wc),r(tK._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=ei.P2e?.getImageMemory();return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:ei.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:ei.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:ei.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:ei.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e?.compressedImages??0,fullscreenUncompressedImagesArrayBuffers:e?.uncompressedArrayBuffer??0,fullscreenUncompressedImagesImageBitmap:e?.uncompressedImageBitmap??0})),reservedWasmMemory:(0,tH.le)()||0,rendererGpuMemory:ei.P2e?.getRendererGpuMemory()||0,rendererBreakdown:ei.P2e?.getRendererMemoryBreakdown()??void 0}}),()=>{d.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(t6.Wc),document.documentElement.classList.remove(t6.FC)}},[r]),(0,a.useEffect)(()=>{t&&!i.current&&(r(tF.Yx({})),t&&!_?t?.canEdit&&r(tV.rH({fileKey:t.key})):(0,s.kc)().ce_new_missing_fonts_logging&&(0,tz.DI)(),i.current=t)},[r,_,t]),(0,a.useEffect)(()=>{(0,t1.RS)(r,t?.key,E)},[r,E,t?.key,y]),(0,a.useEffect)(()=>{z.eD&&z.eD.setEditFilePermissions(c)},[c]);let v=(0,a.useRef)(null),b=(0,a.useRef)(null);if((0,a.useEffect)(()=>{t&&(null===v.current||!v.current)&&r((0,tU.x4)()),t&&v.current&&t.key!==v.current&&r((0,tU.x4)()),b.current&&y!==b.current&&r((0,tU.x4)()),b.current=y,v.current=t?.key},[r,t,y]),"ok"!==l)return null;if(e)return a.createElement(a.Fragment,null,e);let N=y===eC.nT.Whiteboard,I=y===eC.nT.Whiteboard?(e,t)=>{(0,t1.P2)(e,t,m)}:void 0,T=(y===eC.nT.Design||y===eC.nT.DevHandoff)&&g&&f;return a.createElement(t2.v,{setShouldShowDragAndDropBorder:u,isDragTarget:N,onPointerDown:I},a.createElement(t3,{shouldShowDragAndDropBorder:p}),T&&a.createElement(tG.G,null))});var t5=n(447402);function t7(){let{error:e}=(0,A.Hb)();return e instanceof Error&&e.message.includes("Out of memory")?a.createElement(t5.PG,null):a.createElement(A.S1,null)}var t8=n(354235);let t9=()=>{let e=(0,o.Pj)();return a.useCallback(t=>{let n=e.getState().mirror.sceneGraph;return(0,Q.dA)(n,t)},[e])},ne=()=>{"hidden"===document.visibilityState&&(f.x4?.clear(),eL.L.cleanupSession())};function nt({children:e}){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.openFile);(0,x.lF)(n?.key??""),eS.M4.Folder.useValue(n?.folderId);let c=(0,o.d4)(e=>e.selectedView.editorType),p=(0,tI.FF)(),[u,_]=(0,a.useState)(!1),f=(0,r.DP)(),y=(0,tS.sO)(),h=(0,a.useCallback)(()=>{(0,t1.jS)(),_(!0)},[]),v=function({fileKey:e,onCanvasExpired:t}){let n=(0,en.TA)(),o=(0,et.dq)(),[i,r]=a.useState(!1),l=(0,eJ.K)(),c=(0,eY.Rs)(eq.NSA,{fileKey:e??""},{enabled:!!e}),d="loaded"===c.status&&c.data.file?.canRead!==!0;return a.useLayoutEffect(()=>{l&&d&&(r(!0),t())},[l,d,t]),a.useEffect(()=>{l&&!d&&M.az.trackDefinedEvent("mfa.file_access_without_restriction",{orgId:o??void 0,userId:n??void 0,fileKey:e})},[l,d,o,n,e]),!!(0,s.kc)().mfa_for_guests&&i}({fileKey:n?.key,onCanvasExpired:h}),b=(0,o.d4)(e=>e.mergingStatus);(0,a.useEffect)(()=>{if((0,s.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",m,!0),()=>void document.removeEventListener("keydown",m,!0)},[]),(0,F.LD)(),function(){let e=(0,a.useRef)(),t=(0,a.useRef)(),n=(0,o.wA)(),i=(0,o.d4)(e=>e.userFlags),r=(0,o.d4)(e=>!!e.user),l=function(e,t){let n=(0,o.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),i=(0,o.d4)(e=>e.user?.created_at),r=(0,a.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=i&&new Date(i).getTime()>=e},[i]);return(0,a.useCallback)((a,o,i,l)=>{t.keyboard_user_first_detection||l||!r?a!==ei.aTn.US_QWERTY||l||o!==ei.aTn.UNKNOWN?a&&o!==ei.aTn.UNKNOWN?t.keyboard_manual_supported_bell||eE(e,a,o,n):a&&o===ei.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||eg(e,a,n):(0,er.CZ)({layout:o,detectedLayoutStr:i??void 0,eventName:"keyboard_change_no_bell"}):(0,er.CZ)({layout:a,eventName:"ignore_us_qwerty"}):(e(O.b({keyboard_user_first_detection:!0})),a&&((0,er.rd)({layout:a}),(0,er.CZ)({layout:a,eventName:"auto_set_new_user_layout"})))},[e,t,n,r])}(n,i),s=(0,a.useCallback)(async()=>{if(r){if(z.eD){let t=await ef(l,e.current??null);e.current=t}else{let e=await ey(l,t.current??null);t.current=e}}},[l,r]);(0,a.useEffect)(()=>{ed.Y5.isReady()?s():ed.Y5.onReady().then(()=>setTimeout(s,500))},[])}(),(0,ee.XS)(),function(){let e=(0,o.Pj)(),t=(0,o.d4)(eh.d1),n=(0,o.d4)(eN.m0),i=(0,o.d4)(eN.No),r=(0,o.d4)(e=>e.library.published),l=(0,o.d4)(e=>e.openFile),c=(0,o.d4)(e=>e.fileVersion),d=(0,o.d4)(e=>e.loadingState),p=(0,o.d4)(e=>e.library.local),u=(0,o.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),m=(0,ev.ud)(),_=(0,o.d4)(e=>e.folders),E=(0,eI.l6)(),g=(0,o.d4)(e=>e.library.assetsPanelSearch.query),f=(0,o.d4)(e=>e.library.assetsPanelSearch.searchOptions),y=(0,eb.D2)(d,(0,eA.yD)(l?.key||"")),h=(0,eT.M)()&&(0,s.kc)().dse_new_asset_panel_fetch,v=(0,s.kc)().dse_new_asset_panel_fetch&&(0,s.kc)().asset_search_min_searches;(0,a.useEffect)(()=>{t&&ex.YG.sourcesDidChange()},[t,n,i,r,p,u,m,_]),(0,a.useEffect)(()=>{(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.queryDidChange(e)},[e,g,h]),(0,a.useEffect)(()=>{(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.searchOptionsDidChange(e)},[e,f,h]),(0,a.useEffect)(()=>{(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.subscriptionsDidChange(e,E)},[e,y,E,h]),(0,a.useEffect)(()=>{!v&&(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.OPEN_FILE)},[e,l,h,v]),(0,a.useEffect)(()=>{!v&&(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.FILE_VERSION)},[e,c,h,v]),(0,a.useEffect)(()=>{!v&&(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.LOADING_STATE)},[e,d,h,v])}(),(0,$.gN)(),z.eD&&function(){let e=(0,q.JI)(),t=(0,o.d4)(e=>e.mirror.appModel.isReadOnly),n=(0,X.Yo)(),i=(0,o.d4)(e=>e.openFile),r=(0,o.d4)(e=>e.localPlugins),l=(0,R.E3)(),s=(0,q.op)(),c=(0,o.d4)(e=>e.installedPluginVersions.plugins),d=(0,o.d4)(e=>e.mirror.selectedStyleProperties?.selectedWidgetInfo),p=(0,o.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),u=(0,o.d4)(e=>e.publishedPlugins),m=(0,o.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),_=(0,q.Be)(),E=_.orgPlugins,g=_.orgWidgets,f=(0,J.h)("plugin"),y=(0,J.h)("widget"),h=(0,q.NU)(),v=(0,q.qr)(),b=(0,q.ZT)(),N=null!=(0,$.SH)();a.useEffect(()=>{let a={isReadOnly:t,userCanRunPlugins:e,openFile:i,publishedPlugins:u,localExtensions:r,orgEntity:n,allSavedPlugins:c,recentlyUsedPlugins:s,org:m,editorType:l,widgetSelectionInfo:d,hideRecentsHeader:!0,activeTextReviewPlugin:p,orgSavedPlugins:E,orgSavedWidgets:g,orgPrivatePlugins:f,orgPrivateWidgets:y,savedWidgetVersions:h,recentlyUsedWidgets:v,publishedWidgets:b};j(G.$0(a),Y.wX(a))},[t,e,i,u,c,s,r,n,m,l,d,p,_,E,g,f,y,h,v,b,N])}(),function(){let e=(0,R.E3)(),t=(0,a.useCallback)(()=>{(0,M.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,L.A)(t,1e3,{leading:!0,trailing:!1}),i=(0,o.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),r=(0,a.useRef)(i);(0,a.useEffect)(()=>{r.current!==i&&(r.current=i,n())},[i,n])}();let N=(0,E.Sl)();(0,g.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,o.wA)(),t=(0,tI.FF)(),n=(0,tr.BI)(),[i,r]=(0,a.useState)(!1),l=(0,o.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED);a.useEffect(()=>{t&&!i&&n?.shouldOptimizeForIpadApp&&l&&!ei.Ez5?.defaultToolIsHandSelect()&&(r(!0),ed.Y5.triggerAction("set-tool-hand",null))},[t,n,i,r,l]);let s=(0,o.d4)(({mirror:{appModel:e}})=>e.showUi);a.useEffect(()=>{n?.updateUIVisible&&n.updateUIVisible(s)},[n,s]);let c=(0,tr.m0)();a.useEffect(()=>{c&&(c._try_to_flush_autosave=async()=>{let e=(0,th.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[c]);let d=(0,tN.Kd)();a.useEffect(()=>{n?.updateSaveStatus&&(d?l?n.updateSaveStatus(tA.av.SAVING):n.updateSaveStatus(tA.av.PAUSED):n.updateSaveStatus(tA.av.SAVED))},[n,d,l]);let p=(0,o.d4)(e=>(0,tb.Yh)(e.mirror.appModel,"undo")),u=(0,o.d4)(e=>(0,tb.Yh)(e.mirror.appModel,"redo"));a.useEffect(()=>{if(n?.updateUndoEnabled&&n.updateUndoEnabled(p),n?.updateRedoEnabled&&n.updateRedoEnabled(u),c){let t=t=>{e(es.F.dequeue({matchType:"undo_redo_gesture"})),e(es.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};c._trigger_undo=()=>{p&&(ed.Y5.triggerActionInUserEditScope("undo"),t((0,el.t)("fullscreen_actions.undo")))},c._trigger_redo=()=>{u&&(ed.Y5.triggerActionInUserEditScope("redo"),t((0,el.t)("fullscreen_actions.redo")))}}},[n,e,p,u,c]);let m=(0,tr.pt)();a.useEffect(()=>{m&&(m._set_ui_visibility=e=>{e!==s&&ed.Y5.triggerAction("toggle-ui")})},[m,s]);let _=(0,ty.Yk)();a.useEffect(()=>{n?.updateDLTHeight&&n.updateDLTHeight(_)},[_,n]);let E=(0,tv.dH)(),g=(0,tw.pK)(E),f=(0,tr.Ef)(),y=(0,o.d4)(e=>e.mirror?.appModel.isReadOnly);a.useEffect(()=>{g&&!y&&(f?.nativeToolbarUpdateActiveTool?.(g),f?.nativeToolbarUpdateMultiselectActive?.("MULTISELECT"===g))},[f,g,y]);let[h,v]=a.useState("ERASER"),[b,N]=a.useState("PENCIL");a.useEffect(()=>{!y&&g&&(0,tw.S0)(g)&&g!==h&&(N(h),v(g))},[g,h,v,N,y]),a.useEffect(()=>{m&&(m._switch_to_eraser=function(){if(y)return{success:!1,error:tx.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==h)return(0,tw.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=tw.Jh.get(b);return e&&(0,tw.Jm)(e),{success:!0,error:null,currentTool:b}}},m._switch_to_previous_drawing_tool=function(){if(y)return{success:!1,error:tx.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=tw.Jh.get(b);return e&&(0,tw.Jm)(e),{success:!0,error:null,currentTool:b}})},[y,g,b,h,m]),c&&(c._update_context_menu_visibility=e=>{ei.glU.updateNativeContextMenuVisibility(e)},c._override_document_visibility_state=tT.R),m&&(m._activate_multiselect_mode=()=>{(0,tw.Jm)("set-tool-multiselect")},m._deactivate_multiselect_mode=()=>{(0,tw.Jm)("set-tool-default")})}(),(0,eP.a4)(),(0,l.fp)(),a.useEffect(()=>eo.Bc,[]);let T=(0,g.I7)("exp_test_exposure_data_loss",!1,!0).getConfig(),A=!!(0,ea.f)("exp_test_exposure_data_loss_has_checked");a.useEffect(()=>{let e=T.getValue("should_expose_once",null);null===e||e&&A||((0,g.hW)("exp_test_exposure_data_loss"),e&&t(O.b({exp_test_exposure_data_loss_has_checked:!0})))},[T,A,t]),a.useEffect(()=>{c===eC.nT.Whiteboard&&(0,g.hW)("exp_unified_index_v3_figjam")},[c]),a.useEffect(()=>(c===eC.nT.Whiteboard&&d.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",ne),()=>{document.removeEventListener("visibilitychange",ne)}),[c]);let C=(0,D.o)();a.useEffect(()=>{if(C)return t(P.HQ({storeInRecentsKey:C})),c===eC.nT.Whiteboard&&(t(P.gr({storeInRecentsKey:C})),t(P.vZ({storeInRecentsKey:C}))),c!==eC.nT.DevHandoff&&t(P.aF({storeInRecentsKey:C})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)};function e(e){switch(e.key){case eO.vY:case eO.S7:t(P.HQ({storeInRecentsKey:C}));break;case eO.YN:case eO.xk:t(P.aF({storeInRecentsKey:C}));break;case eO.SO:t(P.gr({storeInRecentsKey:C}));break;case eO.JG:t(P.vZ({storeInRecentsKey:C}))}}},[t,c,C]);let k=(0,en.TA)();a.useEffect(()=>{k&&t(w.oQ())},[t,k]),function(){let e=(0,eV.Xr)(ez);(0,a.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(eK.IDLE_DUE_TO_INACTIVITY)},6e4)},a=()=>{n(),e(eK.ACTIVE_AFTER_IDLE)},o=eR()(a,500,{trailing:!1,leading:!0}),i=()=>{"visible"===document.visibilityState?a():e(eK.IDLE_DUE_TO_TAB_SWITCH)};return e(eK.ACTIVE_FIRST_TIME),eG.forEach(e=>{document.addEventListener(e,o)}),document.addEventListener("visibilitychange",i),n(),()=>{eG.forEach(e=>{document.removeEventListener(e,o)}),document.removeEventListener("visibilitychange",i),clearTimeout(t)}},[e,6e4])}(),a.useEffect(()=>{let e=e=>{if(b===i.y.MERGING)return e.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",e.preventDefault(),t(S.sx({name:"Unload During Merge Warning Shown"})),!1},n=()=>{b===i.y.MERGING&&t(S.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",e),window.addEventListener("unload",n),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",n)}},[b,t]);let K=(0,a.useRef)(!1);a.useEffect(()=>{(0,s.kc)().search_persistent_sessions&&n?.key&&!K.current&&(K.current=!0,U.y.startTimer(n.key,(0,ek.lM)()))},[n?.key]);let[W,H]=(0,tw.H_)(),Q=a.createElement(a.Fragment,null,a.createElement(nn,{file:n,onCanvasExpired:h},e),p&&a.createElement(t8.d,null,W?H&&a.createElement(tw.vW,null):a.createElement(tC.aT,null)));return a.createElement(I,{name:"editor",alsoTrack:()=>({editorType:(0,eC.Bu)(c),productType:(0,V.Dc)(c),uiVersion:f.version,fileKey:n?.key||"",slideView:y?(0,tP.R9)():void 0})},a.createElement(B.wG,null,a.createElement(E.q5.Provider,{value:N},a.createElement(a.Fragment,null,!u&&Q,!u&&a.createElement(tg,{onWorkshopExpired:h}),v&&a.createElement(na,{file:n})))))}function nn({children:e,file:t,onCanvasExpired:n}){let i=(0,o.d4)(e=>e.userStateLoaded),r=(0,o.d4)(e=>e.mirror.appModel.isInitialized),l=(0,_.R)(e=>e.comments),{anchorPositions:s,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:d,updateWatchedStablePaths:p}=(0,K.Cn)(),u=t9(),m=(0,en.TA)();(0,tf.ox)({file:t,onCanvasExpired:n});let E=(0,k.T8)(a.createElement(C.NX,{userId:m,file:t,orgId:t?.parentOrgId??null,activeId:l.activeThread?.id||null,anchorPositions:s,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:d,updateWatchedStablePaths:p,getPageIdsForNodes:u},a.createElement(tD.R,null,a.createElement(tk.P,null,a.createElement(A.tH,{boundaryKey:"InAppPage",fallback:a.createElement(t7,null),hasCustomWASMBuild:Z.y4},a.createElement(t4,null,e))))),eD.e0.EDITOR,null!=t?(0,V.oP)(t):{},null!=t&&i&&r);return a.createElement(a.Fragment,null,E)}function na({file:e}){let t=(0,et.sZ)();return(0,o.d4)(e=>e.modalShown?.type===eX.M)||!t?null:a.createElement(e9,{org:t,fileKey:e?.key})}function no(){return(0,W.co)(),null}let ni=(0,tO.n)(()=>{})},133222:(e,t,n)=>{n.d(t,{n:()=>el});var a=n(411855),o=n(188507),i=n(786013),r=n(587670),l=n(966712),s=n(192437),c=n(392592),d=n(205904),p=n(964881),u=n(632430),m=n(288536),_=n(441088),E=n(29680),g=n(830646);function f(e){let t=e.search(/</),n=e.search(/>/);return e.substring(t,n+1)}var y=n(170960),h=n(100197),v=n(338400),b=n(889556),N=n(152811),I=n(363668),T=n(690463),A=n(690003),x=n(933484),w=n(973801),S=n(374626),P=n(47506),O=n(226055),C=n(335682),k=n(284321),D=n(57392),L=n(100303),M=n(137345),R=n(286723),V=n(800307),K=n(876680),U=n(412371),F=n(225699),B=n(795847),W=n(168275),H=n(789819),z=n(187882);let G=new Map,Y=a.memo(function(){let e=(0,z.GQ)(),t=(0,S.md)(D.Lc),n=(0,o.d4)(k.ao),i=(0,C.q5)(),s=(0,o.d4)(e=>e.leftPanel),c=(0,z.cT)(),{pagesList:d,pageToNumChangesMap:p,isComparingChanges:u}=function(){let e=(0,z.n0)(),t=(0,o.d4)(e=>!!(0,l.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===r.m1T.COMPARE_CHANGES),n=(0,o.d4)(e=>e.versionHistory.compareId);return a.useMemo(()=>{if(!t||!n)return{pagesList:e,pageToNumChangesMap:G,isComparingChanges:t};let a=(0,R.ee)(e);return{pagesList:e,pageToNumChangesMap:a,isComparingChanges:t}},[t,n,e])}(),m=(0,h.J2)(r.Ez5.uiState().showCanvasSearch),_=(0,O.GS)(),g=(0,U.g)({pagesList:d}),f=(0,E.aV)();(0,z.bi)();let y=!!i&&n;return a.useEffect(()=>{y&&(0,P.YQ)({id:"Found Updates To Publish"})},[y]),a.createElement(V.Q,{ignoreRulers:f},a.createElement(B.s,null),a.createElement(F.$,null,_&&a.createElement(H.n,null),_&&a.createElement(W.d,null),m?a.createElement(L.EA.Provider,{value:!0},a.createElement(M.f,{showFilter:!0})):d.length>0&&a.createElement(K.yD,{recordingKey:"pagesPanel",isReadOnly:c,width:e,pagesList:d,hasTeamLibraryUpdates:t||y,activeTab:s.activeTab,showTabs:!c,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:u,pageToNumChanges:p,onPageContextMenu:g})))});var q=n(319008),J=n(165195),X=n(286886),$=n(359919),j=n(696963),Q=n(477759),Z=n(304657),ee=n(10706),et=n(82963),en=n(311350);function ea({children:e}){return a.createElement(en.G.Provider,{value:{loggerEventName:"design_navigate"}},e)}var eo=n(682761),ei=n(117940),er=n(425542);let el=a.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,E.p8)("isReadOnly"),n=(0,o.d4)(e=>e.progressBarState),S=(0,E.p8)("loadingEmbeds"),P=(0,h.ut)(r.Ez5?.uiState().showCanvasSearch,!1),O=(0,v.Lk)(),C=(0,a.useRef)(null),k=(0,o.d4)(e=>e.userFlags),D=!!(0,l.kc)().internal_only_debug_tools||!!k.has_cursor_bot_onboarding_v2,L=(0,o.d4)(e=>e.openFile),M=L?L.key:"",R=(0,o.d4)(e=>e.universalInsertModal),V=(0,o.wA)();(0,u.Gb)(M),(0,y.W)(),function(){let e=a.useRef(document.activeElement),t=(0,g.j)("Focus changed"),n=a.useCallback(()=>{let n=document.activeElement;n!==e.current&&(t({previousActiveElement:f(e.current?.outerHTML||""),newActiveElement:f(n?.outerHTML||"")}),e.current=n)},[t]);a.useEffect(()=>{if((0,l.kc)().eu_focus_logging)return document.addEventListener("focusin",n),()=>{document.removeEventListener("focusin",n)}},[n])}();let K=(0,p.l7)()?a.createElement(s.tH,{boundaryKey:"DevModeLeftPanel",fallback:s.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:i.eBU.DEVELOPER_TOOLS}},a.createElement(d.O,null)):a.createElement(Y,null);return a.createElement(ea,null,a.createElement(m.ED,null),a.createElement(eo.sk,null,n.mode!==r.Oin.OFF&&a.createElement("div",{className:er._q}),a.createElement(N.pO,{initialFilterState:{currentPage:!1}},S.map(e=>a.createElement(x._,{key:`loading-embed-${e}`,nodeId:e})),a.createElement(ei.qn,null),a.createElement(et.u,null),P&&a.createElement($.n,null),(0,l.kc)().ce_al_experiments_on&&a.createElement($.n,null),a.createElement(A.GR,null),a.createElement(A.bu,null),a.createElement(Q.J,null),a.createElement(ei.XI,{commentsDetailContainerRef:C}),(0,l.kc)().cursor_bot&&D&&a.createElement(J.S,null),a.createElement(w.X,null),a.createElement(I.J,null),a.createElement(q.Nz,null),a.createElement("div",{ref:C}),!(0,_.T)()&&K,!t&&a.createElement(j.E,null),a.createElement(T.G,null),e&&a.createElement(q.X5,null)),a.createElement(b.A,{isFigjamEditor:!1,isDesignEditor:!0,openFile:L}),R.showing&&a.createElement(s.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{V(c.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:s.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(Z.k,null))),O&&a.createElement(X.K,{className:er.PA},a.createElement(ee.s,null)))})},828802:(e,t,n)=>{n.d(t,{m:()=>nT});var a=n(411855),o=n(188507),i=n(786013),r=n(587670),l=n(192437),s=n(392592),c=n(346124),d=n(794272),p=n(574176),u=n(939863),m=n(308977),_=n(393812),E=n(239349),g=n(92597),f=n(617453),y=n(843495),h=n(100197),v=n(980150),b=n(564092);let N="dev_handoff_canvas_pill--dimension--WEwpp",I="dev_handoff_canvas_pill--size--9ZpSZ";var T=n(419902);function A(e){return e===r.mKm.HUG_CONTENT?"Auto":e===r.mKm.FILL_CONTAINER?"100%":"Fixed"}function x(e){let t=(0,E.mJ)(e);if(!t)return null;let n="INSTANCE"===t.type||"SYMBOL"===t.type||t.isStateGroup||t.isInstanceSublayer||t.isSymbolSublayer,a=!0;return"TEXT"===t.type&&(t.autoRename||t.characters.substring(0,10)===t.name.substring(0,10))&&(a=!1),{guid:t.guid,name:t.name,showName:a,type:t.type,isFigmaPurple:n,boundingBox:t.absoluteBoundingBox,hasEnabledStaticImagePaint:t.hasEnabledStaticImagePaint,isState:t.isState,isStateGroup:t.isStateGroup,isUIElement:(0,_.$F)(t)&&!t.isStateGroup,stackCounterAlignItems:t.stackCounterAlignItems,stackMode:t.stackMode,isGroup:t.isGroup,canHaveStatus:t.canHaveStatus,hasStatus:t.hasStatus,horizontalSizeMode:A(r.Qa7.stackHorizontalSize(t.guid)),verticalSizeMode:A(r.Qa7.stackVerticalSize(t.guid)),size:t.size,objectsPanelThumbnailId:t.objectsPanelThumbnailId}}function w(e){let t=(0,c.lerp)(0,2,(e-.1)*5);return(0,c.clamp)(t,0,2)}function S(e){let t=x(e.guid),n=(0,h.J2)((0,f.UK)().showGuids),o=(0,E.uQ)(),i=a.useRef(null),r=a.useCallback(e=>-w(e),[]),l=t&&(t.hasStatus||t.canHaveStatus&&t.guid===o)?e=>e-20:void 0;return t&&"SECTION"!==t.type?a.createElement(v.M,{ref:i,node:t,key:e.guid,offsetX:-2,offsetY:r,largeBorderRadius:!0,maxWidth:l,dataTestId:"devHandoffLayerNamePill"},a.createElement("div",{className:"dev_handoff_canvas_pill--layerName--eX5Zu"},a.createElement(v.T,{node:t}),t.showName&&a.createElement("span",{className:"dev_handoff_canvas_pill--pillText--7B3-h ellipsis--ellipsis--Tjyfa"},t.name,n&&` (${e.guid})`))):null}let P=e=>e.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function O(e,t=0){let n=(0,m.v4)(),a=(0,g.qM)(n,t,P),{variable:o,variableDisplayName:i,isSuggested:r}=(0,b.xp)(e,t);return o?{value:i,isSuggested:r}:{value:a}}function C(e){let t=x(e.guid),{value:n,isSuggested:o}=O("WIDTH",t?.size.x??0),{value:i,isSuggested:r}=O("HEIGHT",t?.size.y??0),l=a.useCallback(e=>w(e),[]);return t&&t.isUIElement?a.createElement(v.M,{node:t,key:e.guid,dataTestId:"devHandoffSizePill",centered:!0,bottom:!0,offsetY:l,largeBorderRadius:!0},a.createElement("div",{className:"dev_handoff_canvas_pill--sizeInfo--pKiuc text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("span",{className:N},(0,u.tx)("fullscreen.properties_panel.transform_panel.w")),a.createElement("span",null,t.horizontalSizeMode),a.createElement("span",{className:I,"data-testid":"canvasPillWidth"},n),a.createElement("span",null,o&&a.createElement(p.B,{svg:T.A})),a.createElement("span",{className:N},(0,u.tx)("fullscreen.properties_panel.transform_panel.h")),a.createElement("span",null,t.verticalSizeMode),a.createElement("span",{className:I,"data-testid":"canvasPillHeight"},i),a.createElement("span",null,r&&a.createElement(p.B,{svg:T.A})))):null}function k(){let{hoveredNode:e,selection:t}=(0,d.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection)[0],n=e.mirror.appModel.hoveredNode;return{hoveredNode:n===y.Hr?null:n,selection:t===y.Hr?null:t}}),[n,o]=a.useState(!1),i=a.useCallback(e=>{e.altKey!==n&&o(e.altKey)},[n]);return(a.useEffect(()=>(document.addEventListener("pointermove",i),document.addEventListener("keyup",i),document.addEventListener("keydown",i),()=>{document.removeEventListener("pointermove",i),document.removeEventListener("keyup",i),document.removeEventListener("keydown",i)})),n)?null:a.createElement(a.Fragment,null,t&&e===t&&a.createElement(C,{guid:t}),e&&a.createElement(S,{guid:e}))}var D=n(205904),L=n(256975),M=n(964881),R=n(632430),V=n(288536),K=n(441088),U=n(29680),F=n(170960),B=n(338400),W=n(889556),H=n(593392),z=n(109388),G=n(752795),Y=n(939683),q=n(374626),J=n(153234),X=n(975350),$=n(949632),j=n(779709),Q=n(630331),Z=n(497306),ee=n(457630),et=n(601607),en=n(319882),ea=n(767129),eo=n(844519),ei=n(882316),er=n(707458),el=n(629019),es=n.n(el),ec=n(663668),ed=n(646240),ep=n(860601),eu=n(812115),em=n(522739),e_=n(966981),eE=n(259927),eg=n(798099),ef=n(356390),ey=n(662531),eh=n(498606),ev=n(100303),eb=n(233890),eN=n(869156),eI=n(788612),eT=n(712685);let eA="annotation--annotationContainer--k4xiM",ex="annotation--wrapperEditing--C2Zlx",ew="annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",eS="annotation--contentContainer--vSuqs",eP="annotation--properties--1p6UF",eO="annotation--noValue--HHQOU",eC="annotation--propertyOptionIconSvg--LypST",ek="annotation--icon--w1enR",eD="annotation--chit--3je6E",eL="annotation--solidPaint--ClR6h",eM="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",eR="annotation--variablePill--VNxoI";function eV({valueProps:e,isHovered:t,variableContainerClassName:n}){if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return a.createElement("div",{className:es()("annotation--multipleVariableWrapper--OW3M1",o&&"annotation--vertical--zmpVv")},e.value.map((i,r)=>a.createElement("div",{key:r,className:"annotation--multipleVariableValue--5-5xk"},a.createElement(eV,{valueProps:i,isHovered:t,variableContainerClassName:n}),r<e.value.length-1&&!o&&a.createElement("span",null,", "))))}let o=`${(0,eI.m3)(e)}`;return e.variable?a.createElement(eT.w,{dataTestId:"styledValueVariable",containerClassName:es()(eR,n),text:e.variable,disableHover:!0,isHovered:t,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,u.t)("dev_handoff.variables.inferred_value",{value:o}):o}):a.createElement(a.Fragment,null,o)}var eK=n(221537);function eU({svg:e}){return a.createElement(p.B,{svg:e,className:es()(ek,eC)})}var eF=n(258890),eB=n(996620),eW=n(957069);function eH({node:e,variable:t,isPreview:n=!1}){return t?n?a.createElement(a.Fragment,null,t.name):a.createElement(eT.w,{containerClassName:eR,text:t.name,disableHover:!0}):(0,eK.rO)(e.stackPrimaryAlignItems)?(0,u.tx)("dev_handoff.annotations.auto"):a.createElement(a.Fragment,null,(0,eI.nd)(e.stackSpacing,"px"))}function ez({node:e,isPreview:t=!1}){let n=(0,eN.u)(e.boundVariables?.itemSpacing?.id);return a.createElement("div",{className:n?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l"},a.createElement("span",null,a.createElement(eH,{node:e,variable:n,isPreview:t})))}function eG({rawValues:e,variables:t,isPreview:n=!1}){if(e.length!==t.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let o=t.map((t,n)=>({value:e[n],format:"pixels",variable:t?.name})),i=o[0]?.variable;for(let e of o)if(e.variable!==i){if(n)return(0,u.tx)("fullscreen.mixed");return a.createElement(eV,{variableContainerClassName:eR,valueProps:{format:"mixed",value:o}})}return i?n?a.createElement(a.Fragment,null,i):a.createElement(eV,{variableContainerClassName:eR,valueProps:o[0]}):e.some(t=>t!==e[0])?n?(0,u.tx)("fullscreen.mixed"):a.createElement(eV,{variableContainerClassName:eR,valueProps:{format:"pixels",value:e}}):a.createElement(eV,{variableContainerClassName:eR,valueProps:{format:"pixels",value:e[0]}})}function eY({node:e,isPreview:t=!1}){let{stackTopPadding:n,stackRightPadding:o,stackBottomPadding:i,stackLeftPadding:r}=e,l=(0,eN.u)(e.boundVariables?.paddingTop?.id),s=(0,eN.u)(e.boundVariables?.paddingRight?.id),c=(0,eN.u)(e.boundVariables?.paddingBottom?.id),d=(0,eN.u)(e.boundVariables?.paddingLeft?.id),p=[l,s,c,d].some(e=>!!e);return a.createElement("div",{className:es()(p?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l")},a.createElement("span",null,a.createElement(eG,{rawValues:[n,o,i,r],variables:[l,s,c,d],isPreview:t})))}function eq({node:e}){if("WRAP"===e.stackWrap)return a.createElement(eU,{svg:eW.A});switch(e.stackMode){case"HORIZONTAL":return a.createElement(eU,{svg:eF.A});case"VERTICAL":return a.createElement(eU,{svg:eB.A});default:return null}}function eJ({node:e}){if("WRAP"===e.stackWrap)return(0,u.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(e.stackMode){case"HORIZONTAL":return(0,u.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,u.tx)("dev_handoff.annotations.autolayout_vertical");default:return null}}function eX({node:e}){if("NONE"===e.stackMode)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,u.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,u.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,u.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,u.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,u.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,u.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,u.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,u.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,u.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,u.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,u.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,u.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,u.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,u.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,u.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,u.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,u.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,u.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,u.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,u.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,u.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}var e$=n(416095),ej=n(750029),eQ=n(428877),eZ=n(991443),e0=n(238093);function e1(e,t){let n=(0,o.d4)(e=>e.library),a=(0,e0.f$)(e),i=(0,E.mJ)(a);if(!e||!a||!i)return null;let r=(0,e$.Gp)(e.key,[a],n);if(!r)return null;let l=r.value;return"DANGLING"===r.kind&&(l.style_type=t),l.description=i.description,l.name=i.name,l.isLocal="LOCAL"===r.kind,l}function e2(e,t){if(1===t)return e;let n=(100*t).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${n}`}function e6(e,t,n){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:o}=e,{a:i=1}=o,r=n({...o,a:i*a},{alphaInPercent:!0});return t?t.name:r}case"GRADIENT_LINEAR":return e2((0,u.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return e2((0,u.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return e2((0,u.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return e2((0,u.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return e2((0,u.t)("dev_handoff.annotations.image"),a);case"VIDEO":return e2((0,u.t)("dev_handoff.annotations.video"),a);default:return null}}function e3({paints:e,styleRef:t,variables:n}){let o=n?.[0],i=(0,eQ.Ig)(),r=(0,eN.u)(o?.id),l=e1(t,"FILL");return 0===e.length?null:l?a.createElement(a.Fragment,null,l.name):e.length>1?(0,u.tx)("dev_handoff.annotations.multiple"):a.createElement(a.Fragment,null,e6(e[0],r,i))}function e4({paints:e}){let t=e[0];return a.createElement(ej.J,{className:eD,tabIndex:-1,paint:t,allowMouseDownPropagation:!0})}function e5({paint:e,variableAlias:t}){let n=(0,eQ.Ig)(),o=(0,eN.u)(t?.id),i=e6(e,o,n);return i?a.createElement("div",{className:eL},a.createElement(ej.J,{className:eD,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),a.createElement("span",{className:eM,title:i},o?a.createElement(eT.w,{containerClassName:eR,text:i,disableHover:!0}):i)):null}function e7({styleRef:e,styleType:t,hideIcon:n=!1}){let i=e1(e,t);return(!function(e){let t=(0,o.d4)(e=>e.library),n=(0,e0.f$)(e),a=n?(0,e$.Gp)(e.key,[n],t):void 0;(0,e$.w$)(a)}(e),i)?a.createElement("div",{className:eL},!n&&a.createElement("div",{className:es()("annotation--styleChit--yCQ3O annotation--chit--3je6E",ek)},a.createElement(eZ.zi,{dsStyle:i})),a.createElement("span",{className:eM,title:i.name},i.name)):null}function e8({paints:e,styleRef:t,variables:n}){let{data:o}=e;return t?a.createElement(e7,{styleRef:t,styleType:"FILL"}):0===o.length?null:a.createElement("div",{className:"annotation--mixedValues--Z0qIk"},o.map((e,t)=>a.createElement(e5,{key:t,paint:e,variableAlias:n?.[t]})))}var e9=n(798558),te=n(723081),tt=n(666139);function tn({effects:e}){if(0===e.length)return null;if(e.length>1)return(0,u.tx)("fullscreen.mixed");switch(e[0].type){case"DROP_SHADOW":return(0,u.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,u.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,u.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,u.tx)("fullscreen.properties_panel.effects.inner_shadow");case void 0:return null}}function ta({effects:e,styleRef:t}){return a.createElement(a.Fragment,null,e.map((e,n)=>a.createElement(ti,{effect:e,styleRef:t,key:n})))}let to=new te.SU;function ti({effect:e,styleRef:t}){let n=(0,eQ.Ig)(),o=t&&a.createElement(tr,{styleRef:t});switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:t}=e,i=t?n(t,{alphaInPercent:!0}):null,r=[e.offset?.x,e.offset?.y,e.radius,e.spread].filter(e=>void 0!==e).join(", ");return a.createElement("div",null,o,a.createElement("span",null,a.createElement(tn,{effects:[e]})),t&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("div",{className:eL},a.createElement(ej.J,{className:es()(eD,"annotation--chitInline--vG6cM"),color:t,allowMouseDownPropagation:!0}),a.createElement("span",{className:eM,title:i||void 0},i))),a.createElement("span",null),a.createElement("span",null,r),e.blendMode&&"NORMAL"!==e.blendMode&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("span",null,to.format(e.blendMode))))}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return a.createElement("div",null,o,a.createElement("span",null,a.createElement(tn,{effects:[e]})),void 0!==e.radius&&a.createElement("span",null,` ${(0,eI.nd)(e.radius,"px")}`));case void 0:return null}}function tr({styleRef:e}){let t=(0,e0.f$)(e),n=(0,E.mJ)(t);return t&&n?a.createElement("div",null,n.name):null}var tl=n(142284);let ts=e=>{switch(e){case"RIGHT":return(0,u.t)("inspect_panel.typography.align_right");case"CENTER":return(0,u.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,u.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,u.t)("dev_handoff.annotations.align_left")}};function tc(){return a.createElement(p.B,{svg:tl.A,className:es()(ek,eC)})}function td({textAlignHorizontal:e}){return a.createElement(a.Fragment,null,ts(e))}function tp({lineHeightOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,eN.u)(t?.id);if("mixed"===e)return(0,u.tx)("fullscreen.mixed");if(o&&n)return a.createElement(a.Fragment,null,o.name);if("PERCENT"===e.units&&100===e.value)return(0,u.tx)("dev_handoff.annotations.auto");let i="RAW"===e.units?{value:100*e.value,units:"PERCENT"}:e;return a.createElement(eI.lN,{variableContainerClassName:eR,valueProps:{format:"fig_number",value:i,variable:o?.name}})}function tu({fontNameOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,eN.u)(t?.id);return"mixed"===e?(0,u.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(eI.lN,{variableContainerClassName:eR,valueProps:{value:e.family,variable:o?.name}})}function tm({fontWeightOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,eN.u)(t?.id);return"mixed"===e?(0,u.tx)("fullscreen.mixed"):(o&&o.resolvedType!==r.rXF.FLOAT&&(o=null),o&&n)?a.createElement(a.Fragment,null,o.name):a.createElement(eI.lN,{variableContainerClassName:eR,valueProps:{value:e,variable:o?.name}})}var t_=n(313888),tE=n(595869),tg=n(560185),tf=n(30562),ty=n(438806),th=n(904595),tv=n(235107),tb=n(58502),tN=n(144919);function tI({node:e}){let{symbolId:t}=e;if(!t)return a.createElement(a.Fragment,null);let n=er.q.instance.get(t);if(!n)return a.createElement(a.Fragment,null);if(n.isState){let e=n.parentNode?.name;return a.createElement(a.Fragment,null,`${e} (${n.name})`)}return a.createElement(a.Fragment,null,n.name)}let tT=new Map([[r.L5V.HEIGHT,{label:(0,u.tx)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>a.createElement(eU,{svg:ty.A}),PreviewValue:({node:e})=>a.createElement(tC,{value:e.size.y,variableAlias:e.boundVariables.height,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.size.y,variableAlias:e.boundVariables.height}),index:0}],[r.L5V.MIN_HEIGHT,{label:(0,u.tx)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>a.createElement(eU,{svg:ty.A}),PreviewValue:({node:e})=>a.createElement(tC,{value:e.minHeight,variableAlias:e.boundVariables.minHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.minHeight,variableAlias:e.boundVariables.minHeight}),index:0}],[r.L5V.MAX_HEIGHT,{label:(0,u.tx)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>a.createElement(eU,{svg:ty.A}),PreviewValue:({node:e})=>a.createElement(tC,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight}),index:0}],[r.L5V.WIDTH,{label:(0,u.tx)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>a.createElement(eU,{svg:tv.A}),PreviewValue:({node:e})=>a.createElement(tC,{value:e.size.x,variableAlias:e.boundVariables.width,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.size.x,variableAlias:e.boundVariables.width}),index:0}],[r.L5V.MIN_WIDTH,{label:(0,u.tx)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>a.createElement(eU,{svg:tv.A}),PreviewValue:({node:e})=>a.createElement(tC,{value:e.minWidth,variableAlias:e.boundVariables.minWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.minWidth,variableAlias:e.boundVariables.minWidth}),index:0}],[r.L5V.MAX_WIDTH,{label:(0,u.tx)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>a.createElement(eU,{svg:tv.A}),PreviewValue:({node:e})=>a.createElement(tC,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth}),index:0}],[r.L5V.CORNER_RADIUS,{label:(0,u.tx)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>a.createElement(eU,{svg:tE.A}),PreviewValue:({node:e})=>a.createElement(tw,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tw,{node:e}),index:0}],[r.L5V.STACK_MODE,{label:(0,u.tx)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({node:e})=>a.createElement(eq,{node:e}),PreviewValue:({node:e})=>a.createElement(eJ,{node:e}),DisplayValue:({node:e})=>a.createElement(eJ,{node:e}),index:0}],[r.L5V.STACK_ALIGNMENT,{label:(0,u.tx)("dev_handoff.annotations.alignment"),category:"stack",Icon:({node:e})=>a.createElement(eU,{svg:(0,e9.GN)(e)}),PreviewValue:({node:e})=>a.createElement(eX,{node:e}),DisplayValue:({node:e})=>a.createElement(eX,{node:e}),index:0}],[r.L5V.STACK_SPACING,{label:(0,u.tx)("inspect_panel.properties.gap"),category:"stack",Icon:({node:e})=>a.createElement(eU,{svg:"HORIZONTAL"===e.stackMode?tg.A:tf.A}),PreviewValue:({node:e})=>a.createElement(ez,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ez,{node:e}),index:0}],[r.L5V.STACK_PADDING,{label:(0,u.tx)("inspect_panel.properties.padding"),category:"stack",Icon:()=>a.createElement(eU,{svg:th.A}),PreviewValue:({node:e})=>a.createElement(eY,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(eY,{node:e}),index:0}],[r.L5V.TEXT_STYLE,{label:(0,u.tx)("dev_handoff.annotations.text_style"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(tD,{styleRef:e.inheritedTextStyle}),DisplayValue:({node:e})=>a.createElement(e7,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}),index:0}],[r.L5V.FONT_FAMILY,{label:(0,u.tx)("inspect_panel.typography.font"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(tu,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tu,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0]}),index:0}],[r.L5V.FONT_STYLE,{label:(0,u.tx)("inspect_panel.code.font_style"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),DisplayValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),index:0}],[r.L5V.FONT_SIZE,{label:(0,u.tx)("dev_handoff.annotations.font_size"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(tC,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tC,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0]}),index:0}],[r.L5V.LINE_HEIGHT,{label:(0,u.tx)("fullscreen.type_panel.line_height"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(tp,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tp,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0]}),index:0}],[r.L5V.LETTER_SPACING,{label:(0,u.tx)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(tk,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tk,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0]}),index:0}],[r.L5V.TEXT_ALIGN_HORIZONTAL,{label:(0,u.tx)("dev_handoff.annotations.text_align"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(td,{textAlignHorizontal:e.textAlignHorizontal}),DisplayValue:({node:e})=>a.createElement(td,{textAlignHorizontal:e.textAlignHorizontal}),index:0}],[r.L5V.FONT_WEIGHT,{label:(0,u.tx)("inspect_panel.typography.weight"),category:"text",Icon:tc,PreviewValue:({node:e})=>a.createElement(tm,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tm,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0]}),index:0}],[r.L5V.FILL,{label:(0,u.tx)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({node:e})=>a.createElement(e4,{paints:e.fillPaints.data}),PreviewValue:({node:e})=>a.createElement(e3,{paints:e.fillPaints.data,variables:e.boundVariables.fills,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(e8,{paints:e.fillPaints,styleRef:e.inheritedFillStyle,variables:e.boundVariables.fills}),index:0}],[r.L5V.STROKE,{label:(0,u.tx)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({node:e})=>a.createElement(e4,{paints:e.strokePaints.data}),PreviewValue:({node:e})=>a.createElement(e3,{paints:e.strokePaints.data,variables:e.boundVariables.strokes,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(e8,{paints:e.strokePaints,styleRef:e.inheritedFillStyleForStroke,variables:e.boundVariables.strokes}),index:0}],[r.L5V.STROKE_WIDTH,{label:(0,u.tx)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>a.createElement(eU,{svg:tb.A}),PreviewValue:({node:e})=>a.createElement(tS,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tS,{node:e}),index:0}],[r.L5V.EFFECT,{label:(0,u.tx)("inspect_panel.code.effect"),category:"paint",Icon:function(){return a.createElement(eU,{svg:tt.A})},PreviewValue:({node:e})=>a.createElement(tn,{effects:e.effects.filter(e=>e.visible)}),DisplayValue:({node:e})=>a.createElement(ta,{effects:e.effects.filter(e=>e.visible),styleRef:e.inheritedEffectStyle}),index:0}],[r.L5V.OPACITY,{label:(0,u.tx)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>a.createElement(eU,{svg:tN.A}),PreviewValue:({node:e})=>a.createElement(tx,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tx,{node:e}),index:0}],[r.L5V.COMPONENT,{label:(0,u.tx)("dev_handoff.annotations.component"),category:"component",Icon:()=>a.createElement(eU,{svg:t_.A}),PreviewValue:tI,DisplayValue:tI,index:0}]]),tA=0;function tx({node:e,isPreview:t=!1}){let n=e.boundVariables.opacity,o=(0,eN.u)(n?.id??void 0);return o&&t?a.createElement(a.Fragment,null,o.name):a.createElement(eV,{variableContainerClassName:eR,valueProps:{format:"percent",value:e.opacity,variable:o?.name}})}function tw({node:e,isPreview:t=!1}){let{rectangleTopLeftCornerRadius:n,rectangleTopRightCornerRadius:o,rectangleBottomRightCornerRadius:i,rectangleBottomLeftCornerRadius:r}=e,l=(0,eN.u)(e.boundVariables?.topLeftRadius?.id),s=(0,eN.u)(e.boundVariables?.topRightRadius?.id),c=(0,eN.u)(e.boundVariables?.bottomRightRadius?.id),d=(0,eN.u)(e.boundVariables?.bottomLeftRadius?.id);return a.createElement(eG,{rawValues:[n,o,i,r],variables:[l,s,c,d],isPreview:t})}function tS({node:e,isPreview:t=!1}){return e.borderStrokeWeightsIndependent?a.createElement(tO,{node:e,isPreview:t}):a.createElement(tP,{node:e,isPreview:t})}function tP({node:e,isPreview:t}){let n=(0,eN.u)(e.boundVariables.strokeWeight?.id);return n&&t?a.createElement(a.Fragment,null,n.name):a.createElement(eV,{variableContainerClassName:eR,valueProps:{value:e.strokeWeight,variable:n?.name,format:"pixels"}})}function tO({node:e,isPreview:t}){let{borderTopWeight:n,borderRightWeight:o,borderBottomWeight:i,borderLeftWeight:r}=e,l=(0,eN.u)(e.boundVariables.strokeTopWeight?.id),s=(0,eN.u)(e.boundVariables.strokeRightWeight?.id),c=(0,eN.u)(e.boundVariables.strokeBottomWeight?.id),d=(0,eN.u)(e.boundVariables.strokeLeftWeight?.id);return a.createElement(eG,{rawValues:[n,o,i,r],variables:[l,s,c,d],isPreview:t})}function tC({value:e,variableAlias:t,isPreview:n}){let o=(0,eN.u)(t?.id);return null===e?null:"mixed"===e?(0,u.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(eV,{variableContainerClassName:eR,valueProps:{value:(0,eI.nd)(e,"px"),variable:o?.name}})}function tk({value:e,variableAlias:t,isPreview:n}){let o=(0,eN.u)(t?.id);return"mixed"===e?(0,u.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(eV,{variableContainerClassName:eR,valueProps:{format:"fig_number",value:e,variable:o?.name}})}function tD({styleRef:e}){let t=(0,e0.f$)(e),n=(0,E.mJ)(t);return n?a.createElement(a.Fragment,null,n.name):null}function tL(){let e=(0,Y.IL)(),t=(0,ed.Xr)(en.J),n=!!(0,M.hA)();return a.useCallback(a=>{ey.l7.user("clear-annotations",()=>{a.setAnnotation(null);let o=(0,Z.kh)(er.q.instance,a.guid);e("delete_annotation",{nodeId:a.guid,nodeType:a.type,tlfId:o?.guid,isDevModeFocusView:n}),t(!1),(0,$.d)().lockMouseMoves.set(!1),ef.Y5.triggerAction("commit")})},[t,e,n])}tT.forEach(e=>{e.index=tA++});var tM=n(462166),tR=n(243742),tV=n(560945),tK=n(592096),tU=n(91408),tF=n(860168);let tB=(0,tU.jz)("220px"),tW=(0,tU.jz)(tF.KwN),tH=(0,tU.jz)(tF.RHC);var tz=(e=>(e[e.ALIGNED=0]="ALIGNED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e))(tz||{});function tG(e,t,n){let{x:a,y:o,w:i,h:r}=e.absoluteBoundingBox,{x:l,w:s}=t.absoluteBoundingBox,{offsetX:c,offsetY:d,zoomScale:p}=n,u=a-l,m=l+s-(a+i),_=u<m,E=Math.min(Math.max(20*p,5),20);return _?{lineWidth:u*p+E,offsetX:(l-c)*p-E,offsetY:(o+r/2-d)*p,isLeftAligned:_}:{lineWidth:m*p+E,offsetX:(l+s-c)*p+E,offsetY:(o+r/2-d)*p,isLeftAligned:_}}function tY(e,t,n){let a=[];for(let t of e){let e=(n||t.height)+8;for(a.push({basis:t.offsetY-e/2,length:1,height:e});a.length>1&&function(e,t){let n=e.basis+e.height-t.basis;return!(n<=0)&&(e.height+=t.height,e.length+=t.length,e.basis-=n*t.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let o=0;for(let i of a){let{basis:a}=i;for(let r=0;r<i.length;r++){let i=e[o],r=(n||i.height)+8;t[i.node.guid]=a+r/2,a+=r,o++}}}function tq(e,t,n){let a=[],o=[],i={};for(let e of t)e.isLeftAligned?a.push(e):o.push(e);return tY(a,i,n?6:void 0),tY(o,i,n?6:void 0),t.map(t=>{let{y:n,h:a,w:o}=t.node.absoluteBoundingBox,r=i[t.node.guid],l=(n-e.offsetY)*e.zoomScale,s=t.lineWidth,c=0,d=0,p=t.lineWidth;return r<l?(c=1,d=l-r,p+=o/2*e.zoomScale):r>(n+a-e.offsetY)*e.zoomScale&&(c=2,d=r-(n+a-e.offsetY)*e.zoomScale,p+=o/2*e.zoomScale),{...t,offsetY:r,lineAlignment:c,lineHeight:d,lineWidth:p,originalLineWidth:s}})}function tJ({node:e,setDimensions:t,offsetX:n,offsetY:i,lineWidth:l,originalLineWidth:s,lineHeight:c,lineAlignment:d,isLeftAligned:p,viewportInfo:u,shouldMinimize:m,canOverlapNode:_=!1,children:g}){let f=(0,Y.IL)(),h=(0,a.useRef)(null),v=(0,tV.w)(m?void 0:h),b=(0,o.d4)(e=>e.mirror.appModel.hoveredNode),[N,I]=(0,a.useState)(!1),T=(0,L._I)(),A=(0,U.dH)(),x="ui3"===(0,tR.DP)().version,w=e.guid===b||N,S=(0,E.uQ)(),P=(0,q.md)(en.J),O=P&&S===e.guid,C=m&&!O,k=A===r.NLJ.ANNOTATE&&!w&&null!==S&&S!==e.guid,D=O||u.zoomScale>=.05&&(e.guid===S||e.annotations.length>0),M=(0,tK.LO)(),R=a.useCallback(e=>{(0,$.d)().lockMouseMoves.set(e)},[]);(0,a.useLayoutEffect)(()=>{v&&t(e.guid,v)},[e.guid,v,t]);let V={top:`${u.y+u.height/2}px`,left:`${u.x+u.width/2}px`,transform:`translate(${n}px, calc(${i}px - 50%))`};return a.createElement("div",{ref:h,className:es()("annotation--annotationWrapper--pKMw2",{"annotation--wrapperMinimized--UOExu":C&&!w,[ex]:O}),style:V,"data-testid":"annotationWrapper"},D&&a.createElement(a.Fragment,null,a.createElement("div",{className:es()("annotation--annotationLine--jr4Mc",{"annotation--annotationLineLeftAligned--W-1DZ":p,"annotation--annotationLineAboveNode--WwqWD":d===tz.ABOVE,"annotation--annotationLineBelowNode--JeafT":d===tz.BELOW}),style:{width:l,height:c}},a.createElement("div",{className:es()("annotation--annotationLineStartDot--x6RNc",{"annotation--annotationLineStartDotHovered--Chqa7":!T&&w})}),a.createElement("div",{className:"annotation--annotationLineEndDot--Lsq0a"})),a.createElement("div",{onMouseOut:()=>{R(!1),I(!1)},onMouseOver:()=>{P||(R(!0),y.Uc(e.guid),C&&!N&&f("hover_minimized_annotation",{nodeId:e.guid,nodeType:e.type}),I(!0))},className:es()({"annotation--annotationLeftAligned--FHQRp":p,"annotation--annotationRightAligned--VrH8e":!p,"annotation--annotationHovered--QUHJv":!O&&w}),style:{transform:function(e,t,n,a,o,i,l,s){let c=r.Ez5.isFullscreenYScrollbarNeeded()&&(!s||!r.Ez5.isUI3EdgeToEdgeCanvasEnabled());if(n){let n=`calc(${-a}px - ${e.width/2}px + ${l.left}px + 4px)`,r=i?`calc(${o+t*e.zoomScale}px - 100% - 8px)`:`calc(${o}px - 100% - 8px)`;return`translate(min(${r}, max(-100%, ${n})), 0)`}{let n=i?`calc(-${o+t*e.zoomScale}px + 8px)`:`calc(-${o}px + 8px)`,r=`calc(${e.width/2}px - ${a}px - 100% - ${l.right}px - ${c?s?tH:tW:4}px)`;return`translate(max(${n}, min(0px, ${r})), 0)`}}(u,e.absoluteBoundingBox.w,p,n,s,_,M,x)}},a.createElement("div",{className:es()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":p})}),T&&(!C||w)&&g(k))))}var tX=n(501191);function t$({viewportInfo:e,nodeInfo:t,setDimensions:n}){let o=function(){let e=(0,Y.IL)(),{Sprig:t}=(0,e_.A)(),n=!!(0,M.hA)();return a.useCallback((a,o,i)=>{ey.l7.user(i?"edit-annotation":"create-annotation",()=>{a.setAnnotation(o);let r=(0,Z.kh)(er.q.instance,a.guid),l={nodeType:a.type,nodeId:a.guid,tlfId:r?.guid??a.guid,hasText:!!o.label,numProperties:o.properties.length,isDevModeFocusView:n};i?e("edit_annotation",l):(e("create_annotation",l),t("track","create_annotation")),ef.Y5.triggerAction("commit")})},[t,e,n])}(),i=tL(),r=(0,ed.Xr)(en.J),{node:l}=t,s=l.annotations[0],[c,d]=a.useState(s?.label??""),[p,u]=a.useState(s?.properties??[]),m=a.useCallback(()=>{let e=s&&(""!==s.label||s.properties.length>0),t=0===(0,ec.A)(c).length;t&&0===p.length?s&&i(l):o(l,{label:t?"":c,properties:p},e),r(!1),(0,$.d)().lockMouseMoves.set(!1)},[s,c,p,i,l,o,r]);return a.createElement(a.Fragment,null,a.createElement(t1,{viewportInfo:e,onPointerDown:m}),a.createElement(tJ,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:!1,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n,canOverlapNode:!0},()=>a.createElement(tj,{node:t.node,saveAnnotation:m,inputText:c,setInputText:d,inputProperties:p,setInputProperties:u})))}function tj({node:e,saveAnnotation:t,inputText:n,setInputText:o,inputProperties:i,setInputProperties:r}){let l=(0,Y.IL)(),s=tL(),[c,d]=a.useState(-1),[m,_]=a.useState(!1),[E,g]=a.useState(!1),f=a.useRef(null),y=a.useRef(null),h=a.useRef(null),{availableProperties:v,selectedProperties:b}=a.useMemo(()=>{let t=[],n=[];for(let a of tQ)i.some(e=>e.type===a.type)?n.push(a):(0,tM.J)(e,a.type,!0)&&t.push(a);return{availableProperties:t,selectedProperties:n}},[e,i]);a.useEffect(()=>{l("show_annotation_dialog",{nodeId:e.guid,nodeType:e.type})},[l,e.guid,e.type]);let N=a.useCallback(()=>{f.current?.focus()},[]),I=a.useCallback(e=>{d(-1),_(!1),r([...i,{type:e}])},[r,i]);function T(e){r(i.filter(t=>t.type!==e)),N()}let A=a.useCallback(()=>{(0,$.d)().lockMouseMoves.set(!1)},[]),x=a.useCallback((e,t)=>{if(d(e),g(t),t&&y.current){for(let t of y.current.children)if(t.getAttribute("data-property-type")===`property-${v[e]}`){t.focus();break}}},[d,g,v]),w=a.useCallback(()=>{m?(_(!1),d(-1),h.current?.focus()):t()},[m,t]),S=a.useCallback(()=>{m&&(-1===c?x(v.length-1,!0):c>0&&x(c-1,!0))},[v.length,c,x,m]),P=a.useCallback((e,t)=>{if(m){-1===c?x(0,!0):c<v.length-1&&x(c+1,!0);return}e&&!t&&(_(!0),x(0,!0))},[v.length,m,c,x]),O=(0,J.v_)("createAnnotation","keydown",(0,a.useCallback)(e=>{"Escape"===e.key?w():"ArrowUp"===e.key?(S(),e.stopPropagation()):"ArrowDown"===e.key?(P(e.ctrlKey||e.metaKey,e.shiftKey),e.stopPropagation()):("Enter"===e.key||" "===e.key)&&c>=0&&c<v.length&&(I(v[c].type),e.preventDefault(),h.current?.focus())},[v,P,S,w,c,I]));a.useEffect(()=>(document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}),[O]);let C=J.qP("annotationLabelInput","submit",o),k=J.qP("annotationLabelInput","enter",t),D=e=>{_(!m),e?x(0,!0):d(-1)},L=0===n.length&&0===b.length;return a.createElement(eb.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:n}=e;"Escape"===n.key&&(e.accept(),t())}},a.createElement("div",{onPointerDown:eg.dG},a.createElement("div",{className:es()(ew,eE.Dm)},a.createElement("div",{className:es()(eS,{"annotation--contentContainerNoProperties--pc2WE":0===b.length})},a.createElement("div",{dir:"auto"},a.createElement(eu.X,{fallback:null,errorFallback:null,mountBehavior:"focus",placeholder:(0,u.t)("dev_handoff.annotations.add_annotation"),defaultValue:n,onInputChange:C,onBlur:ep.lQ,hideToolbar:!0,onEnterKeyPressed:k})),b.length>0&&a.createElement("div",{className:eP},b.map(t=>a.createElement(t0,{key:`selected-${t.type}`,onRemoveProp:T,node:e,property:t})))),a.createElement("div",{className:"annotation--authoringRow--cIo3-"},a.createElement(em.GG,{className:es()("annotation--addPropertyButton--67vPO",{"annotation--active--Q00x6":m}),forwardedRef:h,onMouseDown:e=>D((0,ev.SK)(e)),onKeyDown:e=>{m||"Enter"!==e.code&&"Space"!==e.code||(D(!0),e.preventDefault(),e.stopPropagation())},tabIndex:0,"data-tooltip-type":eh.Ib.TEXT,"data-tooltip":(0,u.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton"},a.createElement(p.B,{className:"annotation--plusIcon--Ove-l",svg:tX.A,width:"16",height:"16"}),(0,u.tx)("dev_handoff.annotations.pin_properties_label")),a.createElement(ea.K,{actionOnPointerDown:!0,onClick:()=>{s(e),A()},disabled:L,"aria-label":(0,u.t)("dev_handoff.annotations.delete"),recordingKey:"createAnnotationTrashIcon",htmlAttributes:{"data-tooltip":(0,u.t)("dev_handoff.annotations.delete"),"data-tooltip-type":eh.Ib.TEXT}},a.createElement(eo.i,null)))),m&&a.createElement("div",{onMouseLeave:()=>x(-1,!1),ref:y,onBlur:e=>{e.relatedTarget?.getAttribute("data-property-type")||_(!1)},className:es()(ew,"annotation--dropdown--WLrjl")},0===v.length&&a.createElement("div",{className:"annotation--allPropertiesAdded--KzT8m"},(0,u.tx)("dev_handoff.annotations.all_properties_added")),v.map((t,n)=>a.createElement(a.Fragment,{key:`option-${t.type}`},n>0&&t.config.category!==v[n-1].config.category&&a.createElement("div",{className:"annotation--propertyDivider--Q3tgS"}),a.createElement(tZ,{node:e,property:t,isHovered:c===n,autoFocus:c===n&&E,onMouseOver:()=>x(n,!1),onMouseDown:e=>{I(t.type),e.preventDefault()}}))))))}let tQ=Array.from(tT.entries()).map(([e,t])=>({type:e,config:t}));function tZ({node:e,property:t,isHovered:n,autoFocus:o,onMouseDown:i,onMouseOver:r}){let l=t.config.PreviewValue,s=t.config.Icon;return a.createElement(em.GG,{className:es()("annotation--propertyOption--GJWeu text--fontPos12--YsUAh text--_fontBase--QdLsd",{"annotation--hoveredProperty--ZOJgv":n}),onMouseDown:i,onMouseOver:r,role:"menuitem",autoFocus:o,"data-property-type":`property-${t.type}`,tabIndex:-1,recordingKey:`createAnnotationOptionButton-${t.type}`},a.createElement("div",{className:"annotation--propertyOptionIconLabel--vFND-"},a.createElement("div",{className:"annotation--propertyOptionIcon---NJse"},a.createElement(s,{node:e})),t.config.label),a.createElement("div",{className:es()("annotation--preview--SrnLk","annotation--propertyValue--yhAB- annotation--_ellipsis--8F1VE")},a.createElement(l,{node:e})))}function t0({node:e,onRemoveProp:t,property:n}){let o=n.config.DisplayValue,i=(0,tM.J)(e,n.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ"},n.config.label),a.createElement("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X"},a.createElement("span",{className:es()("annotation--selectedPropertyValue--wwu2U",{[eO]:!i})},i?a.createElement(o,{node:e}):(0,u.tx)("dev_handoff.annotations.no_value")),a.createElement("span",{className:"annotation--selectedPropertyDelete--DMdrA"},a.createElement(em.GG,{className:"annotation--selectedPropertyDeleteButton--rko2T",recordingKey:`removeAnnotation${n.type}`,"data-tooltip-type":eh.Ib.TEXT,"data-tooltip":(0,u.t)("dev_handoff.annotations.remove_property"),onClick:ey.nc.user("remove-annotation",()=>{t(n.type)}),onKeyDown:ey.nc.user("remove-annotation",e=>{t(n.type),e.preventDefault()})},a.createElement(ei.f,null)))))}function t1({viewportInfo:e,onPointerDown:t}){return a.createElement(em.D8,{className:`${ex} ${eE.Dm} ${eE.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:t})}var t2=n(534611),t6=n(686759),t3=n(278312),t4=n(698993);function t5({viewportInfo:e,nodeInfo:t,setDimensions:n}){return a.createElement(tJ,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:t.shouldMinimize,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n},e=>a.createElement(t7,{node:t.node,isFadedOut:e}))}function t7({node:e,isFadedOut:t}){let n=(0,Y.IL)(),o=(0,E.uQ)(),i=(0,U.dH)(),l=o===e.guid,s=(0,ed.Xr)(en.J),c=tL(),d=(0,a.useMemo)(()=>r.w3z.isReadOnly(r.SES.ANNOTATIONS),[]),p=(0,h.J2)(r.Ez5.devHandoffState().selectedMeasurementId),u=!!(0,M.hA)(),m=e=>{e&&(y.wr(),(0,t4.S)("annotations"),y.Dh([e]))},_=a.useCallback(t=>{!d&&l&&p===t2.AD&&(document.activeElement?.classList.contains("focus-target")||(0,t3.t)(document.activeElement)||document.activeElement?.classList.contains(eA))&&("Backspace"===t.key||"Delete"===t.key)&&c(e)},[d,l,p,c,e]);a.useEffect(()=>(document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)),[_]);let g=a.useCallback(()=>{let e=window.getSelection()?.toString()||"";e&&(0,t6.Dk)(e,{withLineBreaks:!0})},[]);if(0===e.annotations.length)return null;let f=e.annotations[0],{label:v,properties:b}=f,N=[...b].sort((e,t)=>tT.get(e.type).index-tT.get(t.type).index);return a.createElement(em.D8,{className:es()("annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",eS,{"annotation--viewAnnotationSelected--UApdn":l,"annotation--canSelect--zG4JI":!l,"annotation--viewAnnotationFadedOut--7LQPE":t}),role:"button",tabIndex:0,onMouseDown:()=>{l||(m(e.guid),n("click_annotation_content",{nodeId:e.guid,nodeType:e.type,hasText:!!f.label,numProperties:f.properties.length,currentTool:i,isDevModeFocusView:u}))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onDoubleClick:()=>{d||(l||m(e.guid),s(!0))},onCopy:g},v&&a.createElement(eu.R,{value:v,fallback:null,errorFallback:null,quillClassName:"annotation--label--Tf5gK"}),N&&N.length>0&&a.createElement("div",{className:eP},N.map((t,n)=>a.createElement(t8,{key:n,node:e,property:t}))))}function t8({node:e,property:t}){let n=tT.get(t.type),o=n.DisplayValue,i=e&&e.isAlive(),r=(0,tM.J)(e,t.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--propertyDisplayLabel--PQ2vF"},n.label),a.createElement("span",{className:es()("annotation--propertyDisplayValue--bxdp7",{[eO]:!r}),"data-testid":`annotationPropertyValue-${t.type.toString()}`},i&&r?a.createElement(o,{node:e}):(0,u.tx)("dev_handoff.annotations.no_value")))}var t9=n(688553),ne=n(565727),nt=n(107047),nn=n(236238),na=n(163771);function no(e){let{children:t}=e,n=(0,a.useRef)(null),[o,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.innerHTML=[t9.Nz,nt.Nz,ne.Nz,na.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  z-index: 0;\n}\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  z-index: 1;\n}\n.annotation--wrapperEditing--C2Zlx {\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  position: absolute;\n  top: 50%;\n  border-top: 1px dashed var(--color-icon-handoff);\n  /* Push to left of annotation box */\n  transform: translate(-100%, -50%);\n}\n.annotation--annotationLineStartDot--x6RNc {\n  position: absolute;\n  top: -6.5px;\n  left: 100%;\n\n  width: 12px;\n  height: 12px;\n\n  background: color-mix(in srgb, var(--color-icon-handoff) 45%, transparent);\n  border: 1px solid var(--color-icon-success);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDot--x6RNc:before {\n  content: '';\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 2px;\n  height: 2px;\n\n  background: var(--color-text-onbrand);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDotHovered--Chqa7 {\n  background: var(--color-icon-handoff);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  position: absolute;\n  top: -3.5px;\n  left: -3px;\n\n  width: 6px;\n  height: 6px;\n\n  background: var(--color-icon-handoff);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(0, -50%);\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineStartDot--x6RNc {\n  left: auto;\n  right: 100%;\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineEndDot--Lsq0a {\n  left: auto;\n  right: -3px;\n}\n.annotation--annotationLineAboveNode--WwqWD:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  transform: translate(-100%, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT .annotation--annotationLineStartDot--x6RNc {\n  top: auto;\n  bottom: -6.5px;\n}\n.annotation--annotationLineAboveNode--WwqWD .annotation--annotationLineEndDot--Lsq0a {\n  top: auto;\n  bottom: -3.5px;\n}\n.annotation--annotationLineBelowNode--JeafT:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(-100%, calc(-100% + 0.5px));\n}\n.annotation--annotationLineLeftAligned--W-1DZ.annotation--annotationLineAboveNode--WwqWD {\n  border-right: 1px dashed var(--color-icon-handoff);\n  transform: translate(0, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT.annotation--annotationLineLeftAligned--W-1DZ {\n  border-right: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(0, calc(-100% + 0.5px));\n}\n.annotation--_annotationBase--MPByC {\n  background: var(--color-bg);\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: 6px;\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  /* This avoids a size shift when adding a border */\n  border: 1px solid transparent;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n}\n/* This is when the node is hovered (not annotation).\n   Clicking an already selected node does nothing so has no hover state. */\n.annotation--annotationHovered--QUHJv .annotation--viewAnnotation--cA-c1:not(.annotation--viewAnnotationSelected--UApdn),\n\n.annotation--viewAnnotation--cA-c1.annotation--canSelect--zG4JI:hover {\n  background: var(--color-bg-hover);\n}\n.annotation--viewAnnotationSelected--UApdn {\n  border: 1px solid var(--color-border-selected-strong);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-container {\n      background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 38px;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-editor {\n      min-height: 24px;\n      padding: 2px 6px;\n      margin: 4px 0 6px 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -9px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 15px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0);\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  left: -8px;\n}\n.annotation--label--Tf5gK.quill-readonly .ql-editor {\n    font-size: 11px;\n  }\n.annotation--label--Tf5gK.quill-readonly .ql-editor h1,\n    .annotation--label--Tf5gK.quill-readonly .ql-editor h2 {\n      font-size: 14px;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor pre.ql-syntax {\n      white-space: pre-wrap;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor > * {\n      cursor: default;\n    }\n.annotation--label--Tf5gK .ql-container {\n    background-color: transparent;\n  }\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 6px 10px 8px 10px;\n  max-width: 220px;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  gap: 4px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 6px 10px 0 10px;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  padding: 8px;\n}\n.annotation--createAnnotation--tWKSM .annotation--contentContainer--vSuqs {\n  /* Fixed width when authoring */\n  width: 220px;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n}\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding: 0 6px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n\n  margin-left: -8px;\n  padding-left: 8px;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 4px;\n}\n/* Don't add margin top to first \"row\" of grid */\n.annotation--propertyDisplayLabel--PQ2vF:first-child,\n.annotation--propertyDisplayLabel--PQ2vF:first-child + .annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child + .annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 0;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n\n  padding: 0 4px 0 12px;\n\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.annotation--selectedPropertyDeleteButton--rko2T {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 16px;\n\n  width: 16px;\n  height: 16px;\n\n  cursor: pointer;\n\n  font-size: 0;\n\n  background: transparent;\n  border: 0 none;\n  border-radius: 2px;\n  box-sizing: content-box;\n\n  padding: 0;\n}\n.annotation--selectedPropertyDeleteButton--rko2T:hover {\n    background: var(--color-bg-tertiary);\n  }\n.annotation--propertyOption--GJWeu {\n\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 32px;\n  padding: 0px 16px;\n  gap: 8px;\n\n  font-family: Inter;\n  font-size: 13px;\n  font-weight: 400;\n}\n.annotation--propertyOption--GJWeu:focus {\n    outline: none;\n  }\n.annotation--propertyDivider--Q3tgS {\n  height: 1px;\n  background: var(--color-border);\n  margin: 8px 0;\n}\n.annotation--propertyOptionIcon---NJse {\n  width: 16px;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--propertyOptionIconLabel--vFND- {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  gap: 8px;\n}\n.annotation--allPropertiesAdded--KzT8m {\n  padding: 0 12px;\n  height: 32px;\n  font-size: 11px;\n  display: flex;\n  align-items: center;\n}\n.annotation--hoveredProperty--ZOJgv {\n  background: var(--color-bg-hover);\n}\n.annotation--preview--SrnLk {\n  color: var(--color-text-secondary);\n}\n.annotation--propertyValue--yhAB- {\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--authoringRow--cIo3- {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding: 0 4px 4px 8px;\n}\n[data-fpl-version='ui3'] .annotation--authoringRow--cIo3- {\n    padding: 0 8px 4px 8px;\n  }\n.annotation--addPropertyButton--67vPO {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n  background-color: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 500;\n  height: 24px;\n}\n.annotation--addPropertyButton--67vPO.annotation--active--Q00x6 {\n    background-color: var(--color-bg-pressed);\n  }\n.annotation--addPropertyButton--67vPO:focus-visible {\n    border-color: var(--color-border-selected);\n  }\n.annotation--plusIcon--Ove-l {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  flex: 0 0 16px;\n  line-height: 16px;\n  fill: var(--color-icon);\n}\n.annotation--dropdown--WLrjl {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 8px 0;\n  top: calc(100% + 8px);\n  left: 0;\n  width: 220px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n",nn.N].join("\n"),e.append(t),i(e)}},[]),a.createElement("div",{ref:n,"data-testid":"annotation-renderer-shadow-dom-container",className:eA},o&&(0,z.createPortal)(t,o))}function ni(){let e=(0,o.wA)(),t=(0,E.uQ)(),n=(0,o.d4)(e=>e.isFullscreenDocumentLoaded),i=(0,h.J2)(r.Ez5.uiState().showAnnotations),l=(0,U.dH)(),s=(0,ee._X)({subscribeToUpdates_expensive:!0}),c=(0,h.J2)((0,$.d)().lockMouseMoves);a.useEffect(()=>{c&&s.zoomScale<.05&&(0,$.d)().lockMouseMoves.set(!1)},[c,s]);let[d,p]=(0,q.fp)(en.J);(0,a.useEffect)(()=>{i||p(!1)},[i,p]),(0,a.useEffect)(()=>{d&&e((0,X.UU)())},[e,d]);let[u,m]=(0,a.useState)({}),{nodesWithAnnotationInfo:_,annotationsBeingViewed:g,newAnnotationNodeInfo:f}=function(e,t){let n=(0,o.d4)(e=>e.mirror.appModel.currentPage),i=(0,h.J2)(r.Ez5.annotationObserver().annotationInfoByTlf),l=(0,U.dH)(),s=(0,E.uQ)(),c=(0,q.md)(en.J),d=(0,h.J2)(r.Ez5.devHandoffState().focusMode),p=(0,h.J2)(r.Ez5.devHandoffState().focusNodeId),u=(0,M.hA)(),m=(0,et.Fk)((e,t)=>e.get(t)?(0,Z.qT)(e,t):[],n),{tlfsWithNodes:_,newAnnotationNode:g}=(0,et.Fk)((e,t,n,a,o,i,l,s,c,d)=>{let p=[];for(let n of l.keys()){let a=e.get(n);a&&a.containingCanvas===t&&(d?(0,Z.hD)(e,n,e=>{e.guid===d&&p.push(n)}):p.push(n))}if(s&&(n===r.NLJ.ANNOTATE||a)){let t=(0,Z.kh)(e,s)||e.get(s);t?.guid&&!l.has(t.guid)&&p.push(t.guid)}let u=null;if(j.z4.getIsExtension()&&o&&i){let t=(0,Z.kh)(e,i)||e.get(i);t?.guid&&(p=[t?.guid])}let m=p.map(t=>{let n=e.get(t),{nodes:o,tlfContainsSelectedNode:i,newAnnotationNode:r}=function e(t,n,a=[],o){let i=!1,r=null;if(t){if(t.guid===n&&(i=!0),"SECTION"===t.type)return{nodes:[],tlfContainsSelectedNode:i,newAnnotationNode:r};t.childrenNodes.forEach(t=>{let{nodes:l,tlfContainsSelectedNode:s,newAnnotationNode:c}=e(t,n,a,o);return i=i||s,r=r||c,l}),t.annotations.length>0&&t.visible?a.push(t):o&&t.guid===n&&(r=t)}return{nodes:a,newAnnotationNode:r,tlfContainsSelectedNode:i}}(n,s,[],a);return r&&n&&(u={node:r,tlf:t}),{nodes:o,tlfContainsSelectedNode:i,topLevelFrameNode:n}});return c.forEach(e=>{l.has(e.guid)||m.push({nodes:[],tlfContainsSelectedNode:!1,topLevelFrameNode:e})}),{tlfsWithNodes:m,newAnnotationNode:u}},n,l,c,d,p,i,s,m,u),{annotationsBeingViewed:f,nodesWithAnnotationInfo:y}=(0,a.useMemo)(()=>{let n={x:e.offsetX,y:e.offsetY},a=_.map(({nodes:a,tlfContainsSelectedNode:o,topLevelFrameNode:i})=>{if(!i||!i.isAlive())return null;let r={x:i.absoluteBoundingBox.x,y:i.absoluteBoundingBox.y,width:i.absoluteBoundingBox.w,height:i.absoluteBoundingBox.h};if(0===a.length)return nr(r,(0,ee.qc)(e))?{topLevelFrameNode:i,nodes:a,nodesWithFinalPositionData:[],shouldMinimize:!1,originalShouldMinimize:!1,tlfContainsSelectedNode:o,distanceFromCenter:nl({x:e.offsetX,y:e.offsetY},r),dimensionsWithAnnotations:r}:null;let l=.4>Math.max((r.width||0)*e.zoomScale/e.width,(r.height||0)*e.zoomScale/e.height)&&!o,s=0,c=0,d=a.map(n=>{let a=t[n.guid]||{width:0,height:0},o=tG(n,i,e);return o.isLeftAligned?s=Math.max(s,24+a.width/e.zoomScale):c=Math.max(c,24+a.width/e.zoomScale),{...o,height:t[n.guid]?.height||0,node:n,tlfGuid:i.guid,shouldMinimize:l}}).sort((e,t)=>e.offsetY-t.offsetY),p=tq(e,d,l),u=1/0,m=-1/0;p.forEach(t=>{let n=t.height/e.zoomScale,a=t.offsetY/e.zoomScale+e.offsetY-n/2;u=Math.min(u,a),m=Math.max(m,a+n)});let _=Math.min(r.y,u),E=Math.max(r.y+r.height,m),g={x:r.x-s,y:_,width:r.width+s+c,height:E-_};return nr(g,(0,ee.qc)(e))?(o&&(n={x:g.x+g.width/2,y:g.y+g.height/2}),{topLevelFrameNode:i,nodes:a,nodesWithFinalPositionData:p,shouldMinimize:l,originalShouldMinimize:l,tlfContainsSelectedNode:o,distanceFromCenter:nl({x:e.offsetX,y:e.offsetY},g),dimensionsWithAnnotations:g}):null}).filter(G.isNotNullish).sort((e,t)=>nl(n,e.dimensionsWithAnnotations)-nl(n,t.dimensionsWithAnnotations)),o=a.filter(e=>!e.shouldMinimize);for(let e=0;e<o.length-1;e++){let t=o[e];for(let n=e+1;n<o.length;n++){let e=o[n];nr(t.dimensionsWithAnnotations,e.dimensionsWithAnnotations)&&(t.tlfContainsSelectedNode?e.shouldMinimize=!0:e.tlfContainsSelectedNode?t.shouldMinimize=!0:t.distanceFromCenter<e.distanceFromCenter?e.shouldMinimize=!0:t.shouldMinimize=!0)}}let i=[],r=a.flatMap(({nodes:n,nodesWithFinalPositionData:a,shouldMinimize:o,originalShouldMinimize:r,topLevelFrameNode:l})=>{if(n.length>0&&!o&&i.push({tlf:l.guid,numNodes:n.length}),o===r)return a;let s=n.map(n=>({...tG(n,l,e),height:t[n.guid]?.height||0,node:n,tlfGuid:l.guid,shouldMinimize:o})).sort((e,t)=>e.offsetY-t.offsetY);return tq(e,s,o)});return{annotationsBeingViewed:i,nodesWithAnnotationInfo:r}},[t,_,e]);return{nodesWithAnnotationInfo:y,annotationsBeingViewed:f,newAnnotationNodeInfo:(0,a.useMemo)(()=>{if(!g)return null;let n=function(e,t){let{x:n,y:a,w:o,h:i}=e.absoluteBoundingBox,{offsetX:l,offsetY:s,zoomScale:c,width:d}=t,p=r.Ez5.isFullscreenYScrollbarNeeded(),u=Math.min(20*c,20),m=n+o,_=(n-l)*c+d/2>tB+8&&!((l-m)*c+d/2>tB+(p?16:4));return _?{lineWidth:u,offsetX:(n-l)*c-u,offsetY:(a+i/2-s)*c,isLeftAligned:_}:{lineWidth:u,offsetX:(m-l)*c+u,offsetY:(a+i/2-s)*c,isLeftAligned:_}}(g.node,e);return{...n,height:t[g.node.guid]?.height||0,newAnnotationNode:g,tlfGuid:g.tlf,shouldMinimize:!1,node:g.node,lineAlignment:tz.ALIGNED,lineHeight:0,originalLineWidth:n.lineWidth}},[t,g,e])}}(s,u),y=(0,Y.IL)(),v=g.length,b=g.reduce((e,t)=>e+t.numNodes,0);(0,a.useEffect)(()=>{v&&l===r.NLJ.SELECT&&y("showing_annotations_for_tlfs",{topLevelFrameCount:v,nodesWithAnnotationsCount:b})},[v,b,l,y]);let N=(0,J.v_)("annotationsKeyDown","keydown",(0,a.useCallback)(e=>{l===r.NLJ.ANNOTATE&&!d&&t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(p(!0),e.stopPropagation())},[l,d,t,p]));if(a.useEffect(()=>(document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)),[N]),a.useEffect(()=>{Q.NB?.setIsShowingAnnotations(0!==g.length)},[g]),!n||!i&&l!==r.NLJ.ANNOTATE)return null;function I(e,t){(u[e]?.height!==t.height||u[e]?.width!==t.width)&&m(n=>({...n,[e]:t}))}let T=null,A=_.map(e=>d&&e.node.guid===t?(T=a.createElement(t$,{nodeInfo:e,viewportInfo:s,setDimensions:I}),null):a.createElement(t5,{key:e.node.guid,nodeInfo:e,viewportInfo:s,setDimensions:I})),x=d&&f&&a.createElement(t$,{nodeInfo:f,viewportInfo:s,setDimensions:I});return a.createElement(a.Fragment,null,a.createElement(no,null,A),T,x)}function nr(e,t){let n=e.x,a=e.x+e.width,o=e.y,i=e.y+e.height,r=t.x,l=t.x+t.width,s=t.y,c=t.y+t.height;return n<l&&a>r&&o<c&&i>s}function nl(e,t){let n={x:t.x+t.width/2,y:t.y+t.height/2};return Math.hypot(n.x-e.x,n.y-e.y)}function ns(){return a.createElement(H.p,null,a.createElement(ni,null))}var nc=n(152811),nd=n(690463),np=n(690003),nu=n(933484),nm=n(319008),n_=n(286886),nE=n(477759),ng=n(304657),nf=n(10706),ny=n(82963),nh=n(311350);function nv({children:e}){return a.createElement(nh.G.Provider,{value:{loggerEventName:"dev_handoff_navigate"}},e)}var nb=n(682761),nN=n(117940),nI=n(425542);let nT=a.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,o.d4)(e=>e.progressBarState),n=(0,U.p8)("loadingEmbeds"),c=!!(0,L._I)(),d=(0,M.l7)(),p=(0,B.Lk)(),u=(0,a.useRef)(null),m=(0,o.d4)(e=>e.openFile),_=m?m.key:"",E=(0,o.d4)(e=>e.universalInsertModal),g=(0,o.wA)();return(0,R.Gb)(_),(0,F.W)(),a.createElement(nv,null,a.createElement(V.ED,null),a.createElement(nb.sk,null,t.mode!==r.Oin.OFF&&a.createElement("div",{className:nI._q}),a.createElement(nc.pO,{initialFilterState:{currentPage:!0}},n.map(e=>a.createElement(nu._,{key:`loading-embed-${e}`,nodeId:e})),a.createElement(nN.qn,null),a.createElement(ny.u,null),c&&a.createElement(k,null),a.createElement(np.GR,null),a.createElement(np.bu,null),a.createElement(nE.J,null),!d&&a.createElement(ns,null),a.createElement(nN.XI,{commentsDetailContainerRef:u}),a.createElement(nm.Nz,null),a.createElement("div",{ref:u}),!(0,K.T)()&&a.createElement(l.tH,{boundaryKey:"DevModeLeftPanel",fallback:l.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:i.eBU.DEVELOPER_TOOLS}},a.createElement(D.O,null)),a.createElement(nd.G,null),e&&a.createElement(nm.X5,null)),a.createElement(W.A,{isFigjamEditor:!1,isDesignEditor:!1,openFile:m}),E.showing&&a.createElement(l.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{g(s.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(ng.k,null))),p&&a.createElement(n_.K,{className:nI.PA},a.createElement(nf.s,null)))})},606319:(e,t,n)=>{n.d(t,{v:()=>R});var a=n(411855),o=n(188507),i=n(587670),r=n(629019),l=n.n(r),s=n(966712),c=n(374626);n(30637);var d=n(448169),p=n(692609),u=n(441088),m=n(694687),_=n(241437),E=n(100197),g=n(840083),f=n(776250),y=n(38329),h=n(646240),v=n(915440),b=n(742808),N=n(727749),I=n(293017),T=n(650769),A=n(198371),x=n(756085),w=n(788744),S=n(315329),P=n(279453),O=n(117940);function C(){return(0,S.o)(),a.createElement(a.Fragment,null)}function k(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.showEditButton),r=(0,o.d4)(e=>e.fileByKey),l=(0,o.d4)(e=>e.userAnalyticsData),c=(0,o.d4)(e=>e.user),d=(0,o.d4)(e=>e.openFile?.canEdit),p=(0,o.d4)(e=>null!=e.openFile),{fileKey:u,orgId:m}=e,_=null!=u&&!!r[u]?.is_favorited,E=(0,v.Rs)(P.jJU,{fileKey:u||""},{enabled:!!u});a.useEffect(()=>{if("loaded"===E.status){let e=E.data.file?.developerRelatedLinks,t=e?.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(t)try{i.glU.setDeveloperRelatedLinks(t)}catch{}}},[E]);let g=a.useRef(!1),k=(0,h.Xr)(A.Kc),D=(0,v.Rs)(P.JKh,{fileKey:u||""},{enabled:!!u});a.useLayoutEffect(()=>{if("loaded"!==D.status)return;let e=D.data.figFileWorkshopMode;k(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(g.current=!0),t(T.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[D,t,k]);let L=a.useRef(null),M=a.useRef(!1),R=a.useRef(null),V=a.useRef(null),K=(0,v.Rs)(P.ehp,{fileKey:u||""},{enabled:!!u});a.useLayoutEffect(()=>{if("loaded"!==K.status)return;let e=K.data.file;if(null===L.current){let t=(0,s.Ay)().editing_file;null!==e&&t&&e.key===t.key&&!!t.can_edit!==e.canEdit&&((0,f.sx)("open_file_inconsistent_permission",{file_key:e.key,lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit,user:y.D.getState().user?.id},{batchRequest:!0}),(0,b.Rh)("open_file.inconsistent_permissions",{lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit}))}if((0,O.X_)({openFile:e,wasInWorkshop:g.current,previousCanEdit:L.current,wasInUnclaimedTryFile:M.current,previousCanView:V.current,previousFileKey:R.current?.key||null},t),null==e)return;V.current=e.canView,L.current=e.canEdit,g.current&&e.isTryFile&&(M.current=!0);let a=y.D.getState().selectedView;"fullscreen"===a.view&&a.fileKey===e?.key&&R.current!==e&&(t(I.UC({openFile:{...e,showEditButton:n,isFavorited:_}})),R.current=e)},[K,t,n,_,p]);let U=(0,x.Be)();return a.useLayoutEffect(()=>{let e=y.D.getState().selectedView;if(!U.loaded||"fullscreen"!==e.view)return;let{plugins:n,widgets:a,orgPlugins:o,orgWidgets:i}=U,r={...n,...o},l={...a,...i};t(N.g3(r)),t(N.zI(l))},[t,m,U]),(0,w.rB)(),d&&(0,S.n)(l,c?.email)?a.createElement(C,null):a.createElement(a.Fragment,null)}var D=n(354235),L=n(425542);function M(){return(0,p.co)(),null}function R({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=O.j6,ignoreInteractionTest:r=!1,isDragTarget:p=!1}){let f=(0,o.d4)(e=>e.modalShown),y=(0,u.T)();(0,c.md)(_.Pp);let h=(0,E.ut)(i.Ez5?.devHandoffState()?.focusMode,!1),v=(0,o.d4)(e=>e.openFile),b=v?v.key:"",N=(0,m.dq)(),I=a.useRef(!1);return a.createElement(D.d,null,a.createElement(d.Y,{isDragTarget:()=>p,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)},style:(0,s.kc)().fullscreen_page_view_inversion?{flex:"1 1 auto"}:void 0},a.createElement("div",{"aria-hidden":!!f,className:l()(L.nP,y&&h&&L.$J),onPointerDown:e=>{n(e,I)},style:(0,s.kc)().fullscreen_page_view_inversion?{height:"100%"}:void 0},a.createElement(k,{fileKey:b||null,orgId:N}),e,a.createElement(g.G,null),a.createElement(M,null),!1,!1)))}},973801:(e,t,n)=>{n.d(t,{X:()=>k});var a=n(411855),o=n(188507),i=n(648836),r=n(385754),l=n(405070),s=n(75888),c=n(677859),d=n(587670),p=n(629019),u=n.n(p),m=n(498750),_=n(541524),E=n(662531),g=n(100197),f=n(7959),y=n(630978),h=n(695342),v=n(221537),b=n(12519);let N="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",I="stack_controls--scrubbableControl--b1ChI",T="stack_controls--inputSvg--wFizL",A="stack_controls--stackSpacingRow--Uus3H";function x(){let e=(0,g.J2)(d.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===d.RN9.SPACING?a.createElement(S,{focusOnMount:n}):t===d.RN9.COUNTER_SPACING?a.createElement(P,{focusOnMount:n}):a.createElement(O,{stackRegion:t,focusOnMount:n})}let w=e=>{if(e.keyCode===m.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;d.Qa7.tabActiveStackRegion(t)}};function S({focusOnMount:e}){return a.createElement(f.fI,{className:A},a.createElement(b.KI,{focusOnMount:e,outerClassName:I,inputClassName:N,svgClassName:T,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:C,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function P({focusOnMount:e}){return a.createElement(f.fI,{className:A},a.createElement(y.q,{focusOnMount:e,outerClassName:I,inputClassName:N,svgClassName:T,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:C,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function O({stackRegion:e,focusOnMount:t}){let[n]=(0,v.HF)(e),o=Array.isArray(n)?n.length:0;return e===d.RN9.SPACING?null:a.createElement(f.fI,{className:u()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":o>3})},a.createElement(h.s,{paddingSelection:e,focusOnMount:t,outerClassName:I,inputClassName:N,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:C,noBorderOnFocus:!0,svgClassName:T,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function C(e){(0,_.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),E.l7.user("paste-in-stack",()=>{d.glU.triggerAction("paste",{})}))}let k=a.memo(function(){return(0,o.d4)(e=>e.mirror.appModel.isReadOnly)?null:a.createElement(D,null)});function D(){return a.createElement(i.k,{isShown:!0},a.createElement(s.IA,null,a.createElement(L,{testID:"DesignInlineMenu"})))}function L({testID:e}){let t=(0,o.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,o.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?a.createElement(c.W1,{size:"small",testID:e},a.createElement(r.jk,null),a.createElement(l.x,null)):t?a.createElement(c.W1,{testID:e,darkModePreferred:!0},a.createElement(x,{key:"stackControls"})):null}},286886:(e,t,n)=>{n.d(t,{K:()=>y});var a=n(411855),o=n(629019),i=n.n(o),r=n(91408),l=n(374626),s=n(603689),c=n(259927),d=n(809831),p=n(506599),u=n(226055),m=n(617453),_=n(100197),E=n(239671),g=n(672591),f=n(860168);function y(e){let t;let n=(0,s.lz)(),o=(0,m.qw)(),y=(0,d.E3)(),{isPropertiesPanelCollapsed:h}=(0,p.iT)(),v=(0,l.md)(g.Ds),b=(0,_.J2)((0,m.UK)().renderRulers);return(0,u.GS)()&&(t={right:`calc(${y===E.nT.DevHandoff?n:o}px + ${(0,r.jz)(f.M$q)}px)`,top:`${(0,r.jz)(f.M$q)}px`},h&&(t={...t,right:`calc(${v}px + ${(0,r.jz)(f.M$q)}px)`}),b&&(t={...t,top:`calc(${(0,r.jz)(f.M$q)}px + ${(0,r.jz)(f.y9S)}px)`})),a.createElement("div",{style:t,className:i()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",c.Dm,e.className)},e.children)}},900878:(e,t,n)=>{n.d(t,{E:()=>l,P:()=>s});var a=n(587670),o=n(574724);function i(e,t){let n={},o=e.getVariableConsumptionMap();if(Object.keys(o).length>0)for(let[i,l]of Object.entries(o))if(l?.isMixed||l?.type!==a.Z_n.ALIAS){if(!l?.isMixed&&l?.type===a.Z_n.EXPRESSION)for(let o of function e(t){let n=[];for(let o of t.value.expressionArguments)o.type===a.Z_n.ALIAS?n.push(o.value):o.type===a.Z_n.EXPRESSION&&n.push(...e(o));return n}(l))r(o,i,e,t,n)}else{let a=l?.value;n[a]||r(a,i,e,t,n)}for(let a of e.childrenNodes)Object.assign(n,i(a,t));return n}function r(e,t,n,a,o){if(!o[e]){o[e]={nodesUsed:{}};let t=a.get(e)?.name;t&&(o[e].name=t);let n=a.get(e)?.description;n&&(o[e].description=n);let i=a.get(e)?.resolvedType;i&&(o[e].resolvedType=i)}return o[e].nodesUsed[n.guid]||(o[e].nodesUsed[n.guid]={nodeName:n.name,fields:[]}),o[e].nodesUsed[n.guid].fields.push(t),o}function l(e,t,n=new Map){let a=function(e,t=new Map,n=!1){if(n)return i(e.getRoot(),t);let a=e.getCurrentPage();return null===a?{}:i(a,t)}(e,t);if(n.size>0)for(let[e,t]of n)a[e]||(a[e]={nodesUsed:{}},a[e].name=t.name,a[e].description=t.description,a[e].resolvedType=t.resolvedType,a[e].priority="LOW");return function(e){let t="";for(let[n,a]of Object.entries(e)){if(t+=`${n} has name "${a.name}", resolvedType "${a.resolvedType}"`,a.description&&(t+=`, description "${a.description.slice(0,100)}"`),a.priority?t+=`, priority "${a.priority}"`:t+=', priority "NORMAL"',Object.keys(a.nodesUsed).length>0)for(let[e,{nodeName:n,fields:o}]of(t+=", and is used in ",Object.entries(a.nodesUsed)))t+=`node ${n} with fields ${o.join(", ")}`;t+="\n"}return t}(a)}async function s(e,t,n=.5){let a=[];for(let[t,n]of e)n.description?a.push(`${n.name}: ${n.description}`):a.push(n.name);let i=(await o.Ay.openai.computeEmbeddings({model:"text-embedding-3-small",input:[t,...a],use_cache:!0})).data.map(e=>e.embedding),r=i[0],l=new Map,c=Array.from(e);for(let e=1;e<i.length;e++)if(function(e,t){return e.reduce((e,n,a)=>e+n*t[a],0)/(Math.sqrt(e.reduce((e,t)=>e+t*t,0))*Math.sqrt(t.reduce((e,t)=>e+t*t,0)))}(r,i[e])>n){let[t,n]=c[e-1];l.set(t,n)}return l}},511787:(e,t,n)=>{n.d(t,{f:()=>E});var a=n(411855),o=n(153234),i=n(572206),r=n(268537),l=n(574176),s=n(318812),c=n(720488),d=n(983092),p=n(820396),u=n(1715),m=n(50275),_=n(501191);function E({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:r,hide:p}=(0,s.BK)("expression-builder-create-variable"),u=a.useRef(null),E=o.rf(o.Pt(t,"createVariableDropdown"),"click",a.useCallback(()=>{1===e.length?v(e[0]):r()},[e,r])),[f,y]=a.useState(!1),h=a.useRef(null),v=e=>{let t=u.current?.getBoundingClientRect();t&&(h.current={initialPosition:new i.Mi(t.left,t.top),resolvedType:e},y(!0))},b=()=>{y(!1)};return a.createElement(a.Fragment,null,a.createElement("button",{ref:u,className:m.ZS,onClick:E},a.createElement(l.B,{svg:_.A})),f&&(f&&h.current?a.createElement(d.IU,{initialPosition:h.current.initialPosition,resolvedType:h.current.resolvedType,onCreateVariable:b,onClose:b}):null),n&&u.current&&a.createElement(c.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:u.current.getBoundingClientRect()},e.map(e=>a.createElement(g,{key:e,resolvedType:e,onClose:p,showCreationModal:v,recordingKey:t}))))}function g({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:i}){let l=(0,u.F)(e),s=o.rf(o.Pt(i,"createVariableOption",l.name),"click",a.useCallback(()=>{n(e),t()},[t,e,n]));return a.createElement(r.c$,{className:m.Fs,onClick:s},a.createElement(p.i,{type:e,showTooltip:!1}),l.name)}},696963:(e,t,n)=>{let a;n.d(t,{E:()=>au});var o=n(411855),i=n(188507),r=n(767129),l=n(829816),s=n(536825),c=n(631437),d=n(587670),p=n(534611),u=n(629019),m=n.n(u),_=n(866206),E=n(91408),g=n(966712),f=n(374626),y=n(529004),h=n(860601),v=n(153234),b=n(572206),N=n(827586),I=n(46481),T=n(939863),A=n(259927),x=n(226055),w=n(356390),S=n(541524),P=n(662531),O=n(848661),C=n(457630),k=n(29680),D=n(335682),L=n(94500),M=n(945020),R=n(498606),V=n(233890),K=n(7959),U=n(611407),F=n(392592),B=n(934533),W=n(239349),H=n(178462),z=n(771941),G=n(869156),Y=n(601607),q=n(113468),J=n(38340),X=n(178248),$=n(900878);function j(){let[e,t]=o.useState(""),n=function(){let e=(0,i.wA)(),t=(0,Y.Fk)(e=>e),n=(0,i.d4)(e=>e.mirror.appModel.currentPage),{selectedInteractions:a}=(0,J.Ay)(q.J.NORMAL),r=(0,G.Rb)(),l=o.useCallback((e,t)=>{let{interactions:n,errorMessage:o}=function(e,t,n){let a=function e(t){var n,a;switch(t.type){case"Navigate to":return n=t.target,{connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE",transitionNodeID:p.sH(n)};case"Back":return{connectionType:"BACK"};case"Open Overlay":return a=t.target,{connectionType:"INTERNAL_NODE",navigationType:"OVERLAY",transitionNodeID:p.sH(a)};case"Close Overlay":return{connectionType:"CLOSE"};case"Set Variable":let o=t.expression.join(" ");return function(e,t){let n;try{n=(0,H.q)(t,new z.o)}catch(e){return console.error("Failed to parse expression string in set variable action: ",t),null}return{connectionType:"SET_VARIABLE",targetVariable:{id:e},targetVariableData:n}}(t.target,o);case"Conditional":return function({guardExpression:t,thenAction:n,elseAction:a}){let o=t.join(" ");if(a)try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,H.q)(o,new z.o),actions:[e(n)]},{actions:[e(a)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",o),null}try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,H.q)(o,new z.o),actions:[e(n)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",o),null}}(t)}}(e);if(!a)return{interactions:t,errorMessage:"Failed to get action"};for(let e of t){for(e.actions=e.actions||[];e.actions.length<=n;)e.actions.push({connectionType:"NONE"});e.actions[n]=a}return{interactions:t,errorMessage:""}}(e,a,t);return o||(w.Y5.updateSelectionProperties({prototypeInteractions:n}),null)},[a]);return o.useCallback(async o=>{try{if(!(0,g.kc)().prototype_ai_auto_adv_proto)return{generatedActions:[],errorMessage:"Feature flag not enabled"};let i=(0,W.Zl)(t,n);if(!i||!i.childrenGuids)return{generatedActions:[],errorMessage:"No page node found"};e(F.F.enqueue({message:"AI is generating interaction",type:"ai-generating-interaction",icon:B.zX.SPINNER}));let s=(0,X.dT)(i.childrenGuids,t,!1),c=(0,U.Lg)(s).join(", "),d=new Map(r.map(e=>[e.node_id,{name:e.name,description:e.description,resolvedType:e.resolvedType}])),p=await (0,$.P)(d,o),u=(0,$.E)(t,d,p),m=a[0]?.actions?.length===1&&"NONE"===a[0].actions[0].connectionType?0:a.length,_=await (0,X.h6)({userDescription:o,variablesUsed:u,canvasDescriptions:c},l,m);return e(F.F.dequeue({matchType:"ai-generating-interaction"})),_.errorMessage?e(F.F.enqueue({message:"AI had issue while generating interaction"})):e(F.F.enqueue({message:"AI has finished generating interaction"})),_}catch(t){return console.error(t),e(F.F.dequeue({matchType:"ai-generating-interaction"})),e(F.F.enqueue({message:"AI failed to generate interaction",type:"error"})),{generatedActions:[],errorMessage:t.toString()}}},[t,n,l,r,a,e])}();return o.createElement(K.ks,{placeholder:"Describe a new action",value:e,onChange:e=>t(e.currentTarget.value),onKeyDown:t=>{t.stopPropagation(),"Enter"===t.key&&(t.currentTarget.blur(),n(e))}})}var Q=n(83695),Z=n(776250),ee=n(344780),et=n(320063),en=n(325682),ea=n(820286),eo=n(175290),ei=n(574176),er=n(762638),el=n(422237),es=n(503965);let ec=(0,el.ex)("prototype_action_info",function(){return o.createElement("div",{className:er.cx.flex.itemsCenter.justifyCenter.$},o.createElement(ei.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:es.A}),o.createElement("span",{className:er.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,T.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));function ed(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"}))}var ep=n(522739),eu=n(723081),em=n(318812),e_=n(30637),eE=n(46878),eg=n(538697),ef=n(872429);class ey extends eg.c${}class eh extends eg.l6{}function ev({action:e}){return o.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},o.createElement(I.U,{svg:(0,eE.Yb)(e)},(0,eE.av)(e)))}function eb(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,O.E7)(e.action),r=(0,eE.Yb)(a),l=(0,eE.av)(a),s=(0,x.GS)(),c=new eu.js(s),p=new eu.Z6(s),u=!(0,i.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),_=o.useCallback(e=>e-24,[]),E=o.useCallback(e=>e+24,[]),f=m()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!s}),y=o.createElement(I.U,{svg:r},l);return o.createElement(eh,{disabled:u,id:t,dataTestId:"action-select",className:f,chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:n?c:p,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,icon:y,iconClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",recordingKey:v.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,e_.nl)(),dropdownAlignment:_,dropdownWidth:E},function(e){let t=(0,ef.cJ)(),n=o.createElement(ey,{key:"NONE",value:"NONE",icon:o.createElement(ev,{action:"NONE"}),recordingKey:v.Pt(e,"clear-option"),disabled:!1}),a=o.createElement(ey,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:o.createElement(ev,{action:"NAVIGATE_TO"}),recordingKey:v.Pt(e,"navigate-to-option"),disabled:!1}),i=o.createElement(ey,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:o.createElement(ev,{action:"SWAP_STATE_TO"}),recordingKey:v.Pt(e,"swap-state-to-option"),disabled:!d.glU.isSelectionContainedInStateOrStateInstance()}),r=o.createElement(ey,{key:"GO_BACK",value:"GO_BACK",icon:o.createElement(ev,{action:"GO_BACK"}),recordingKey:v.Pt(e,"back-option"),disabled:!1}),l=o.createElement(ey,{key:"SCROLL_TO",value:"SCROLL_TO",icon:o.createElement(ev,{action:"SCROLL_TO"}),recordingKey:v.Pt(e,"scroll-to-option"),disabled:!1}),s=o.createElement(ey,{key:"OPEN_URL",value:"OPEN_URL",icon:o.createElement(ev,{action:"OPEN_URL"}),recordingKey:v.Pt(e,"url-option"),disabled:!1}),c=o.createElement(ey,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:o.createElement(ev,{action:"OPEN_OVERLAY"}),recordingKey:v.Pt(e,"open-overlay-option"),disabled:!1}),p=o.createElement(ey,{key:"SWAP_WITH",value:"SWAP_WITH",icon:o.createElement(ev,{action:"SWAP_WITH"}),recordingKey:v.Pt(e,"swap-with-option"),disabled:!1}),u=o.createElement(ey,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:o.createElement(ev,{action:"CLOSE_OVERLAY"}),recordingKey:v.Pt(e,"close-option"),disabled:!1}),m=!t&&o.createElement(ey,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:o.createElement(ev,{action:"SET_VARIABLE"}),recordingKey:v.Pt(e,"set-variable"),disabled:!1}),_=!t&&(0,g.kc)().prototype_set_mode_action&&o.createElement(ey,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:o.createElement(ev,{action:"SET_VARIABLE_MODE"}),recordingKey:v.Pt(e,"set-variable-mode"),disabled:!1}),E=!t&&!e.isNestedInConditional&&o.createElement(ey,{key:"CONDITIONAL",value:"CONDITIONAL",icon:o.createElement(ev,{action:"CONDITIONAL"}),recordingKey:v.Pt(e,"conditional"),disabled:!1}),f=o.createElement(eg.sK,{key:"first-divider"}),y=o.createElement(eg.sK,{key:"second-divider"}),h=o.createElement(eg.sK,{key:"third-divider"}),b=(0,x.GS)()?[n,f,a,i,r,l,s,y,c,p,u,...t?[]:[h],m,_,E]:[n,f,a,i,r,y,m,_,E,l,s,h,c,p,u];if(e.showVideoActions){let t=[o.createElement(eg.sK,{key:"fourth-divider"}),o.createElement(ey,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:v.Pt(e,"update-media-play-pause-options"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:v.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:o.createElement(ev,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:v.Pt(e,"update-media-skip_to"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:v.Pt(e,"update-media-skip-by-options"),disabled:!1})];b=b.concat(t)}return b.filter(Boolean)}(e))}var eN=n(634832),eI=n(983405),eT=n(773833),eA=n(736656),ex=n(533573),ew=n(712685),eS=n(912547);let eP="prototype_action_verbose_title--actionNameInsertion--aF4kI",eO="prototype_action_verbose_title--actionName--qWJL3",eC="prototype_action_verbose_title--actionNameUI3--JAYsG",ek=()=>{let e=(0,i.d4)(e=>e.mirror.sceneGraph);return o.useMemo(()=>new eu.cP(e),[e])};function eD({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:a}){let i=(0,en.YT)()===en.Oz.TWO_COL,r=o.useContext(eA.c),l=i&&r===eA.P.LEFT,s=t||n,c=(0,G.u)((0,O.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),u=(0,O.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,eT.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,_=c?.name??u?.name,E=ek(),g=new eu.Z6((0,x.GS)()),f=(0,eu._X)(e),y=(0,O.E7)(f),v=o.createElement(I.U,{svg:(0,eE.Yb)(y)},(0,eE.av)(y)),b=e=>{if(!e.connectionType||(0,O.gl)(e.connectionType))return null;let t=m()({[eO]:!0,[eC]:i}),n=m()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":i});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let a=e.transitionNodeID;if((0,O.gl)(a))return o.createElement("div",{className:t},(0,T.t)("proto.variant_actions.mixed"));if(void 0===a)return null;let i=p.dI(a),r=E.format(i);return o.createElement("div",{className:n},r)}case"URL":{let a=e.connectionURL;if(!a)return null;if((0,O.gl)(a))return o.createElement("div",{className:t},(0,T.t)("proto.variant_actions.mixed"));return o.createElement("div",{className:n},a)}case"SET_VARIABLE":if(!e.targetVariableData||(0,O.gl)(e.targetVariableData))return null;return o.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},o.createElement(Q.y3,{targetVariableData:e.targetVariableData,onClick:h.lQ,showVariableThumbnails:!1,isNarrowPanel:s,isInConditional:!0}));case"CONDITIONAL":{if((0,O.gl)(e)||(0,O.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return o.createElement(Q.y3,{targetVariableData:t,onClick:h.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,eN.assertNever)(e.connectionType)}},N=m()({[eS.Li]:s&&!i,[eS.O8]:!s&&!i,[eS.kE]:i}),A=m()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":i});return o.createElement("div",{className:N,onClick:a,role:"button",tabIndex:0},o.createElement(eI.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},o.createElement("div",{className:A},v),(e=>{let t=y?g.format(y):"Undefined",n=m()({[eO]:!0,[eC]:i});if((0,O.gl)(e.connectionType)&&(t=(0,T.t)("fullscreen.mixed")),!e.connectionType||(0,O.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t));var a=b(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_change_to")),a);if(a){if("OVERLAY"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:eP},(0,T.tx)("proto.action_overlay_title",{overlayFrameName:o.createElement("span",null,a)})));if("SWAP"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_swap_overlay_title")),a)}return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"UPDATE_MEDIA_RUNTIME":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"URL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},a?(0,T.t)("proto.action_url_title"):(0,T.t)("proto.action_open_link")),a);case"SET_VARIABLE":{let r=e.targetVariableData&&(0,O.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===d.rXF.COLOR,s=m()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":i});if(_&&a)return o.createElement(o.Fragment,null,o.createElement("div",{className:r?s:eP},(0,T.tx)("proto.action_set_variable_title",{variableName:o.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},o.createElement(ew.w,{text:_,isDeleted:!!c&&(0,ex.eF)(c),disableHover:l})),variableValue:o.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},a)})));return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},i?(0,T.t)("proto.if"):(0,T.t)("proto.action_conditional_title")),a);default:(0,eN.assertNever)(e.connectionType)}})(e)))}var eL=n(566418),eM=n(215122),eR=n(789529),eV=n.n(eR),eK=n(636149),eU=n.n(eK),eF=n(675551),eB=n.n(eF),eW=n(184058),eH=n.n(eW),ez=n(776621),eG=n(154483),eY=n(994481),eq=n(564092),eJ=n(100039);let eX="prototype_set_variable_mode_controls--dropdownRow--vl5z4",e$="missing";class ej extends eg.l6{}class eQ extends eg.c${}class eZ extends eg.l6{}class e0 extends eg.c${}let e1={},e2=(0,eG.fv)();function e6(){let e=(0,G.h6)()||e1,t=(0,eq.iR)(),n=o.useMemo(()=>{let n=eB()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,key:e.key,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,isCompatible:!0}))||[],explicitMode:null,inheritMode:null,fileKey:e2(e)}));return eV()({},e,n)},[t,e]),a=o.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.fileKey})),[n]),r=o.useMemo(()=>Object.values(a).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[a]),l=o.useMemo(()=>eH()(r.map(e=>e.modeData.fileKey??eJ.BH)),[r]),s=(0,G.el)(l),[c,p]=o.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=eU()(r,e=>e.isLocal?"_local":e.modeData.fileKey&&void 0===s[e.modeData.fileKey]?"_unknownFile":e.modeData.fileKey),a=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{fileKey:e,fileName:s[e]},...t]).flat(1);return t&&(a.push({fileKey:eJ.BH,fileName:(0,T.t)("variables.mode_properties_panel.used_variables.subheading")}),a.push(...t)),[e??[],a]},[s,r]),u=(0,eq.d2)(),m=o.useCallback(e=>{let t=u[(0,eM.yG)(e)],n=r.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[u,r]),_=r.length>0?r[0]:void 0,E=_?.setKey,g=_?.modeData.collectionID,f=o.useMemo(()=>E&&m(E),[E,m]),y=(0,i.wA)();return{localVariableSets:c,allVariableSets:r,firstVariableSet:_,firstVariableSetID:g,firstVariableSetMode:f,getDefaultNewModeForVariableCollectionKey:m,reportAnalyticsEventWhenSelected:e=>{let t=d.mSn.getVariableSetInfoForSetModeAnalytics(e);y((0,L.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:p}}function e3({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:a,recordingKey:i,actionIndexPath:r}){let{getDefaultNewModeForVariableCollectionKey:l,allVariableSets:s,reportAnalyticsEventWhenSelected:c}=e6(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:p}=(0,en.zt)(),u=(0,x.GS)();o.useEffect(()=>{if(!n||(0,O.gl)(n))return;let e=s.find(e=>e.setKey===n);e?((0,ez.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,ez.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,s,a]);let[m,_]=o.useMemo(()=>{let t=(0,O.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let a=eL.gr.toRefIfSubscribed(t);if(a)return e.find(e=>e.setKey===a.key)}(s,e)||e$,n=(()=>{if(!(0,O.gl)(t)&&void 0!==t&&t!==e$)return t})();return[t,n]},[e,s]),E=o.createElement(e7,{selectedVariableSet:m,onChange:e=>{d?p():(c(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:l(e.setKey)}))},actionIndexPath:r}),g=u?o.createElement(eY.cS,{input:E,label:(0,T.tx)("proto.set_variable_mode.collection_label")}):o.createElement(K.fI,{recordingKey:v.Pt(i,"selectTargetVariableSet")},E),f=o.createElement(te,{selectedVariableSetKey:_&&_.setKey,selectedVariableModeID:t,onChange:e=>{d?p():a({targetVariableModeID:e})},actionIndexPath:r}),y=u?o.createElement(eY.cS,{input:f,label:(0,T.tx)("proto.set_variable_mode.mode_label")}):o.createElement(K.fI,{recordingKey:v.Pt(i,"selectTargetVariableMode")},f);return o.createElement("div",{className:u?void 0:er.cx.relative.$},g,_&&y)}let e4={format:e=>void 0===e?(0,T.t)("proto.prototype_panel.edit_set_mode.none"):e===e$?(0,T.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==e$&&t!==e$&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function e5(e,t){return"fileKey"in e?[t&&o.createElement(eg.sK,{key:e.fileKey+"divider"}),o.createElement(eQ,{isHeader:!0,key:e.fileKey+"header",formattedValue:e.fileName})]:o.createElement(eQ,{key:e.setKey,value:e})}function e7({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let a=(0,i.wA)(),r=(0,em.Um)(),l="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:c,subscribedVariableSetsWithSections:d}=e6();return o.createElement(ej,{id:l,className:eX,property:e,formatter:e4,dispatch:a,dropdownShown:r?.type===l?r:null,onChange:e=>{(0,O.gl)(e)||void 0===e||e===e$||t(e)}},c.length>0?[s.length>0&&o.createElement(eQ,{key:v.Pt(l,"local_variables"),isHeader:!0,formattedValue:(0,T.t)("variables.mode_properties_panel.local_variables.subheading")}),...s.map(e=>e5(e,!1)),...d.map((e,t)=>e5(e,s.length>0||t>0))]:[])}let e8={format:e=>void 0===e?(0,T.t)("proto.prototype_panel.edit_set_mode.none"):e===e$?(0,T.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""};function e9(e){return o.createElement(e0,{key:e.modeId.guid,value:e})}function te({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:a}){let r=(0,i.wA)(),l=(0,em.Um)(),s="set-variable-mode--select-variable-mode-"+a,{allVariableSets:c}=e6(),d=o.useMemo(()=>c.find(t=>t.setKey===e)?.modeData.modeOptions,[e,c]),p=o.useMemo(()=>(0,O.gl)(t)||void 0===t?t:d?.find(e=>e.modeId.guid===t)||e$,[t,d]);return o.createElement(eZ,{id:s,className:eX,property:p,formatter:e8,dispatch:r,dropdownShown:l?.type===s?l:null,onChange:e=>{!e||(0,O.gl)(e)||e===e$||n(e.modeId.guid)}},d&&d?.map(e9))}var tt=n(939791),tn=n(794272),ta=n(32067),to=n(109388),ti=n(485463),tr=n(256296),tl=n(775664),ts=n(279702),tc=n(420186),td=n(218973),tp=n(750029),tu=n(251518),tm=n(205135),t_=n(410465),tE=n(860168),tg=n(910392),tf=n(909666),ty=n(442458);let th=tl.TI;function tv({children:e}){return(0,x.GS)()?o.createElement(eY.TN,null,e):o.createElement(K.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function tb({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[r,l]=o.useState(!1),[s,c]=o.useState(new b.Mi),u=(0,i.wA)(),m=(0,x.GS)(),_="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:E,destinationOverlayBackgroundType:g,destinationOverlayPositionType:f,destinationOverlayBackgroundInteraction:y}=(0,tn.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[_]?.destinationOverlayBackgroundInteraction})),h=o.useRef(),N=o.useRef(),I=o.useCallback(()=>{l(!1)},[l]),A=o.useCallback(()=>{if(r)I();else{l(!0);let e=m?to.findDOMNode(N.current):to.findDOMNode(h.current);c((0,tc.cn)(e))}},[r,I,m]),w=o.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";P.l7.user("overlay-background-type-edit-scope",()=>{d.X3B.setOverlayBackgroundType(p.dI(a),t)}),u((0,L._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[u,a]),S=o.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";P.l7.user("overlay-background-interaction-edit-scope",()=>{d.X3B.setOverlayBackgroundInteraction(p.dI(a),t)}),u((0,L._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[u,a]),C=o.useCallback(()=>(0,O._W)(E,{r:0,g:0,b:0,a:.25}),[E]),k=o.useCallback((e,t)=>{t!==ts.zk.NO&&P.l7.user("overlay-background-color-edit-scope",()=>{d.X3B.setOverlayBackgroundColor(p.dI(a),e)})},[a]),D=o.useCallback((e,t)=>{k(e,ts.zk.YES)},[k]),M=o.useCallback((e,t)=>{let n=C();k({r:n.r,g:n.g,b:n.b,a:e},t)},[C,k]),R=o.useCallback(e=>{P.l7.user("overlay-position-type-edit-scope",()=>{d.X3B.setOverlayPositionType(p.dI(a),e)}),u((0,L._P)({name:"Overlay position changed",params:{position:e}}))},[u,a]),V=C(),U=C().a,F=(0,O.E7)(f),B="CLOSE_ON_CLICK_OUTSIDE"===(0,O.E7)(y),W="SOLID_COLOR"===(0,O.E7)(g),H=o.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(tp.J,{onClick:W?A:()=>{},color:V,opacity:U,recordingKey:v.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),o.createElement(tm.AN,{className:m?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:th,property:V,disabled:!W,onChange:D,recordingKey:v.Pt(t,"colorInput"),noBorderOnFocus:!0}),o.createElement(td.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:U,onValueChange:M,dispatch:u,disabled:!W,noBorderOnFocus:!0,recordingKey:v.Pt(t,"opacity")}));return o.createElement(K.Zk,{className:m?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!m&&o.createElement(K.fI,null,o.createElement(K.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,T.tx)("proto.overlay_settings"))),o.createElement(tS,{overlayPositionType:F,onOverlayPositionTypeChange:R,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&o.createElement(tv,null,o.createElement(ti.S,{label:o.createElement(tr.J,null,(0,T.tx)("proto.close_when_clicking_outside")),recordingKey:v.Pt(t,"closeOnClickOutside"),onChange:S,checked:B})),o.createElement(tv,null,o.createElement(ti.S,{label:o.createElement(tr.J,null,m?(0,T.tx)("proto.overlay_panel.background"):(0,T.tx)("proto.add_background")),recordingKey:v.Pt(t,"addBackgroundBehindOverlay"),onChange:w,checked:W})),W&&(m?o.createElement(eY.cS,{ref:N,label:(0,T.tx)("proto.overlay_panel.background"),input:H}):o.createElement(K.fI,{ref:h}," ",H," ")),r&&o.createElement(tu.sk,{disabledVariableIds:new Set,title:(0,T.t)("proto.background"),initialPosition:s,color:V,boundVariable:null,onChange:k,onClose:I,recordingKey:v.Pt(t,"colorPicker")}))}class tN extends eg.l6{}class tI extends eg.c${}class tT extends o.PureComponent{constructor(){super(...arguments),this.titleFormatter=new eu.Cr,this.renderOverlayPositionOption=(e,t)=>o.createElement(tI,{key:t,value:e,recordingKey:v.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return o.createElement(tN,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:tE.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:v.Pt(this.props,"select")},e,o.createElement(eg.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}tT.displayName="OverlayPositionDropdown";class tA extends t_.I{}class tx extends t_.Y{}class tw extends o.PureComponent{render(){return o.createElement(tA,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},o.createElement(tx,{value:"CENTER",tooltip:(0,T.t)("proto.tooltip_overlay_position_center"),svg:tf.A,recordingKey:v.Pt(this.props,"center")}),o.createElement(tx,{value:"TOP_LEFT",tooltip:(0,T.t)("proto.tooltip_overlay_position_top_left"),svg:ty.A,recordingKey:v.Pt(this.props,"top-left")}),o.createElement(tx,{value:"BOTTOM_CENTER",tooltip:(0,T.t)("proto.tooltip_overlay_position_bottom_center"),svg:tg.A,recordingKey:v.Pt(this.props,"bottom-center")}))}}function tS({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,x.GS)(),r=(0,i.wA)(),l=(0,em.Um)(),s=o.createElement(tT,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:r,dropdownShown:l,onChange:t,recordingKey:v.Pt(n,"overlayPositionDropdown")}),c=o.createElement(tw,{property:e,onChange:t,recordingKey:v.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?o.createElement(eY.cS,{label:(0,T.tx)("proto.overlay_panel.position"),input:s}):o.createElement(K.fI,null,s,c)}var tP=n(149658),tO=n(301036),tC=n(927457),tk=n(268537),tD=n(720488),tL=n(501191);function tM(e){let t=`interaction-panel-create-action-${e.recordingKey}`;var{showing:n,toggle:a,hide:i}=(0,em.BK)(t);let r=(0,o.useRef)(null),l=e.recordingKey,{shouldShowAdvancedPrototypingPaywall:s,showAdvancedPrototypinglMultipleActionsModal:c}=(0,en.zt)(),d=(0,o.useCallback)(()=>{!e.skipPaywall&&s?c():a()},[e.skipPaywall,s,c,a]),p=v.rf(v.Pt(l,"createActionDropdown"),"click",d),u=(0,en.YT)()===en.Oz.TWO_COL,_=(0,en.SJ)(),E=(0,en.qv)(_,e.isNestedInConditional),g=m()({[eS.x1]:e.renderButton,[eS.xm]:!e.renderButton&&!u,[eS.U3]:!e.renderButton&&u});return o.createElement(o.Fragment,null,o.createElement("button",{ref:r,className:g,onClick:p,"aria-label":(0,T.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":R.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,T.t)("proto.prototype_panel.add_nested_action"):(0,T.t)("proto.prototype_panel.add")},e.renderButton?o.createElement(I.U,{svg:tL.A},o.createElement(tC.e,null)):(0,T.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&r.current&&o.createElement(tD.Cf,{arrowOffsetFromRectLeft:17,leanPadding:0,minWidth:130,lean:"right",targetRect:r.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0},E.map((t,n)=>(0,en.vc)(t)?o.createElement(tk.wv,{key:`type_${n}`}):o.createElement(tR,{onClose:i,addButtonPressed:e.addButtonPressed,key:t,recordingKey:l,actionType:t}))))}function tR({actionType:e,onClose:t,addButtonPressed:n,recordingKey:a}){let i=o.useCallback(()=>{n((0,en.Bs)(e)),t()},[t,e,n]),r=v.rf(v.Pt(a,"createActionOption",e),"click",i),l=(0,x.GS)(),s=(0,eE.Yb)(e),c=(0,eE.av)(e),d=new eu.Z6(l),p=e?d.format(e):"Undefined";return o.createElement(tk.c$,{className:eS.BP,onClick:r},o.createElement(I.U,{className:eS.QE,svg:s},c),o.createElement("div",{"aria-label":p},p))}let tV="prototype_conditional_controls--conditionalRowUI3--rQlu6",tK="prototype_conditional_controls--conditionIcon--Npk57";var tU=n(381809),tF=n(527967),tB=n(5068);function tW({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:i,onAddAction:r,autoOpenVariablePicker:l,isSelected:s,handleMouseDownUI3:c,...p}){let u=p.conditionalActions,m=u?.actions?u?.actions:[],_=u?.condition?u?.condition:void 0,E=(0,en.YT)()===en.Oz.TWO_COL,g=E?tV:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",f=o.createElement(Q.KN,{resolvedType:d.rXF.BOOLEAN,targetVariableData:_,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0}),y=o.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},o.createElement(tM,{addButtonPressed:r,recordingKey:v.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),h=o.createElement(o.Fragment,null,E?o.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,T.tx)("proto.else")):o.createElement(ei.B,{className:tK,svg:tU.A}),m.length>0&&o.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},o.createElement(tM,{addButtonPressed:r,recordingKey:v.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!E,isNestedInConditional:!0}))),b=E?o.createElement("div",{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onMouseDown:c},h):o.createElement(K.fI,{className:E?tV:"prototype_conditional_controls--conditionalRow--u0PaS"},h);return o.createElement(o.Fragment,null,p.ifStatement&&o.createElement("div",{className:g},!E&&o.createElement(eo.Y,{direction:"horizontal",spacing:4},o.createElement("span",{className:E?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},o.createElement(eo.Y,{direction:"horizontal",spacing:0},o.createElement(ei.B,{className:tK,svg:tF.A}),o.createElement(eo.Y,{direction:"horizontal",spacing:0},(0,O.hS)(_)&&f),o.createElement(ei.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:tB.default}))),m.length>0&&y)),!p.ifStatement&&b,m&&m.map((a,i)=>o.createElement(nR,{key:i,updateMultipleDestinationNodes:t.appendActionIndex(i),action:a,recordingKey:v.Pt(p.recordingKey,"conditional-action-row",i),updateSelectionProperties:n.appendActionIndex(i),onDeleteAction:()=>e(i),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],i],numActions:m.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:r,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:l})),0===m.length&&o.createElement(nR,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:p.emptyAction,recordingKey:v.Pt(p.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],numActions:m.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:r,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:l}))}function tH(e,t,n){return function(a){var o=[...t];o.length>e?o[e].condition=a:o.push({condition:0===e?a:void 0,actions:[]},{condition:1===e?a:void 0,actions:[]}),n({conditionalActions:o})}}function tz({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:r,updateSelectionProperties:l,interactionType:s,recordingKey:c,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:u,selectedActionIndex:m,expandedRows:_,autoOpenVariablePicker:E,onNewActionAdded:g,handleMouseDownUI3:f}){let y=(0,i.wA)(),h=(0,k.p8)("currentPage"),b=(0,en.YT)()===en.Oz.TWO_COL,N=b?m.equals(u):void 0,{shouldShowAdvancedPrototypingPaywall:I,showAdvancedPrototypingConditionalActionsModal:A}=(0,en.zt)(),x=(0,O.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],w=e=>function(t){var n=[...x];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},S=e=>function(t){var n=[...x],a=0;if(n.length>e){var o=n[e].actions;o?o.push(t):o=[t],a=o.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(E.current=!0),l({conditionalActions:n}),g&&g(new tO.Op([u[0],e,a-1])),y((0,L._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:h,actionInConditionalAction:!0}}))},P=e=>function(t){if(I)A();else{var n=[...x];let a=x[e],o=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?o.push(n):y((0,L._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:h,actionInConditionalAction:!0}}))}n[e].actions=o,l({conditionalActions:n})}},C=x.length>0?x[0]:void 0,D=x.length>1?x[1]:void 0;return o.createElement("div",{style:b?{position:"relative"}:void 0},(0,O.gl)(a.conditionalActions)&&o.createElement(eI.Y1,null,o.createElement("div",{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},role:"button",tabIndex:0},(0,T.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,O.hS)(a.conditionalActions)&&o.createElement(o.Fragment,null,o.createElement(tW,{key:0,conditionalActions:C,recordingKey:v.Pt(c,"conditional-block",0),updateCondition:tH(0,x,l),updateActions:w(0),onAddAction:S(0),updateMultipleDestinationNodes:r.appendActionIndex(0),onDeleteAction:P(0),interactionType:s,updateSelectionProperties:l.appendActionIndex(0),ifStatement:!0,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[u[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:m,autoOpenVariablePicker:E,expandedRows:_,emptyAction:{ifStatement:!0,action:a},isSelected:N,handleMouseDownUI3:f}),o.createElement(tW,{key:1,conditionalActions:D,recordingKey:v.Pt(c,"conditional-block",1),updateCondition:tH(1,x,l),updateActions:w(1),onAddAction:S(1),updateMultipleDestinationNodes:r.appendActionIndex(1),onDeleteAction:P(1),interactionType:s,updateSelectionProperties:l.appendActionIndex(1),ifStatement:!1,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[u[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:m,autoOpenVariablePicker:E,expandedRows:_,emptyAction:{ifStatement:!1,action:a},isSelected:N,handleMouseDownUI3:f})))}function tG({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,...i}){let r=t.length>0?t[0]:void 0,l=r?.condition?r?.condition:void 0,s=m()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!l});return o.createElement(o.Fragment,null,o.createElement(eY.cS,{input:null,label:(0,T.tx)("proto.condition")}),o.createElement(tt.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,O.hS)(l)?o.createElement("div",{className:s},o.createElement(Q.KN,{resolvedType:d.rXF.BOOLEAN,targetVariableData:l,updateSelectionProperties:e.appendActionIndex(0),recordingKey:i.recordingKey,updateConditionInConditionalAction:tH(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var tY=n(843495),tq=n(497306),tJ=n(234945),tX=n(510879),t$=n(830002),tj=n(731262);class tQ extends eg.c${}class tZ extends eg.l6{}class t0 extends o.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=d.baT.ALL;"SCROLL_TO"===this.props.action?e=d.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=d.baT.STATES);let{viableIds:t,disabledIds:n}=d.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{tY.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=eU()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>e===t&&(0,O.hS)(t)?tq.Ql(this.props.scene,e)?.guid:this.props.scene.get(e)?.parentGuid),a=Object.keys(n);(0,tq.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:i,index:r}=(0,tq.H_)(this.props.scene,a);return i&&r&&(a.splice(r,1),a=[i,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(o.createElement(eg.sK,{key:a})),e.push(o.createElement(tQ,{key:`disabled-${t}`,value:t+" ",recordingKey:v.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(o.createElement(tQ,{key:`enabled-${t+n}`,value:t,recordingKey:v.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new eu.cP(e.scene)}render(){let e=this.props.nodeId===O.oV?O.oV:p.dI(this.props.nodeId),t=this.state.viableIds;(0,O.hS)(e)&&e!==p.AD&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,i="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(tQ,{key:`enabled-${e}`,value:e,recordingKey:v.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),r=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(tQ,{key:`disabled-${e}`,value:e,recordingKey:v.Pt(this.props,`disabled-option-${t}`),disabled:!0})),l=this.props.isUI3?o.Fragment:K.fI;return o.createElement(l,null,o.createElement(tZ,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:tE.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:v.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,e_.nl)()},i,0!==n.length&&0!==t.length&&o.createElement(eg.sK,null),r))}}let t1=o.memo(function(e){let t=(0,D.tS)(),n=(0,D._G)(),a=(0,i.d4)(t2),r=(0,i.d4)(tJ.qd),l=(0,i.d4)(tJ.dK),s=(0,tX.D)(r,l),c=(0,i.d4)(t6),p=o.useMemo(()=>(0,tj.cP)(c,t,n,e.actionIndexPath),[c,t,n,e.actionIndexPath]),u=o.useMemo(()=>(0,tj.cP)(a,t,n),[a,t,n]),m=p||u;if(!m||m.mode!==d.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:_,stateGroupModel:E,selectedStates:g,selectedStatesPropertyValues:f}=m,y=E.propertySortOrder||[],h=E.propertyValues;return h?o.createElement(t$.lS,{sortedProperties:y,stateGroupPropertyValues:h,selectedStatesPropertyValues:f,selectedStates:g,allStates:_,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,s[e]||[]))n[t]=a;for(let e of r)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function t2(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function t6(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var t3=n(169231),t4=n(100197),t5=n(511787),t7=n(939143),t8=n(656963),t9=n(746806);let ne="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",nt="prototype_set_variable_controls--icon---HzDt",nn="prototype_set_variable_controls--placeholderText--PBIqf";function na({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...r}){let l=o.useRef(null),s=(0,i.wA)(),c=(0,x.GS)(),u=(0,i.d4)(e=>e.variablePickerShown),_=(0,G.tZ)((0,O.hS)(t)&&"id"in t?t.id:void 0),E=(0,G.u)((0,O.hS)(t)&&"id"in t?t.id:void 0),[f,y]=o.useState("");(0,et.h)(()=>{a&&!0===a.current&&(I(),a.current=!1)});let N=(0,G.BQ)((0,O.hS)(t)&&"id"in t?t.id:void 0)??(0,eT.m9)((0,O.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);o.useEffect(()=>{void 0!==e&&N&&"MIXED"!==N&&(0,O.hS)(e)&&e.resolvedType!==N.resolvedType&&!((0,eT.tz)(e.resolvedType)&&(0,eT.tz)(N.resolvedType))&&n({targetVariableData:void 0})},[N,n,e]);let I=()=>{let e=l.current.getBoundingClientRect();s((0,t3.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:d.rXF.STRING,initialPosition:new b.Mi(e.left-20,e.top),key:r.recordingKey,onVariableSelected:P}))},A=o.useCallback(()=>{s((0,t3.B)())},[s]),[w,S]=o.useState(!1),P=o.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},o=d.CWU.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===d.rXF.COLOR&&o&&(a.targetVariableData=o??void 0),n(a),s((0,L.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),S(!0)}},[s,e,n]),C=o.useCallback(e=>{e.value.stablePath.map(e=>p.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),S(!0))},[n]),k=o.useMemo(()=>(0,g.kc)().ds_variable_props_proto?{type:"COMPONENT_PROPS",layout:"list"}:{type:"LOCAL_VARIABLES",layout:"list"},[]);o.useEffect(()=>{let e=d.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,t4.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let D="nodeFieldAlias"in t?(0,eT.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,M=D?(0,eT.Xx)(D.varValue.resolvedType):null,R=null;if((0,O.gl)(t))R=null;else if(N?.resolvedType===d.rXF.COLOR)R=(0,O.gl)(e)?o.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,T.t)("fullscreen.mixed")):o.createElement(o.Fragment,null,o.createElement(t8.g,{variableValue:e??N,onChange:e=>{n({targetVariableData:e})},recordingKey:v.Pt(r.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=r.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=d.rXF.BOOLEAN;E?a=E.resolvedType:D&&(a=D.varValue.resolvedType===d.rXF.TEXT_DATA?d.rXF.STRING:D.varValue.resolvedType),R=o.createElement("div",{className:c?void 0:er.cx.ml12.$},o.createElement("div",{className:ne},o.createElement(Q.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:w,setAutoOpenExpressionBuilder:S,updateSelectionProperties:n,recordingKey:r.recordingKey,isNarrowPanel:r.isNarrowPanel,showVariableThumbnails:!0}),!c&&o.createElement(ei.B,{className:m()(nt,t),svg:tB.default})))}let V=m()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!c&&!r.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!c&&r.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":c,[nn]:c&&!(_||D)}),K=o.createElement(ep.D8,{recordingKey:v.Pt(r.recordingKey,"selectTargetVariable"),onClick:I},o.createElement("div",{className:c?void 0:(0,O.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:l},o.createElement(eo.Y,null,o.createElement("div",{className:V},o.createElement("div",{className:ne},(0,O.gl)(t)?o.createElement("div",{className:m()(er.cx.pt2.$,er.cx.pb2.$)},(0,T.t)("fullscreen.mixed")):_?o.createElement(ew.w,{text:_,thumbnailValue:N,isDeleted:!!E&&(0,ex.eF)(E)}):D?o.createElement(ew.w,{text:D.name,thumbnailValue:M,isDeleted:!1,colorTheme:ew.J.COMPONENT}):o.createElement("div",{className:m()(er.cx.pt2.$,er.cx.pb2.$,c?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},c?(0,T.t)("proto.select_variable.short"):(0,T.t)("proto.select_variable")),!c&&o.createElement(ei.B,{className:nt,svg:tB.default})))))),U=c?o.createElement(eY.cS,{input:K,label:(0,T.tx)("proto.variable")}):K,F=m()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!c&&r.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!c&&!r.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":c,[nn]:c&&!e&&N?.resolvedType!==d.rXF.COLOR}),B=o.createElement("div",{className:F,"data-testid":"set-variable-container"},R),W=c?null!==R?o.createElement(eY.cS,{label:(0,T.tx)("proto.variable.value"),input:B}):null:B;return o.createElement("div",{className:c?void 0:er.cx.relative.$},U,u.isShown&&"variable-picker-set-variable-action"===u.type&&u.key===r.recordingKey?o.createElement(o.Fragment,null,o.createElement(t9.vx,{title:"",headerSize:"hidden",initialPosition:u.initialPosition,onClose:A,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},(0,g.kc)().ds_variable_props_proto?o.createElement(t7.jc,{selectedItem:E,disabledVariableIds:new Set,currentView:k,toggleLayout:h.lQ,pickerType:"set-variable",setControlRightButtons:o.createElement(t5.f,{resolvedTypes:[d.rXF.BOOLEAN,d.rXF.STRING,d.rXF.FLOAT,d.rXF.COLOR]}),onVariableSelected:P,onClose:A,recordingKey:v.Pt(r.recordingKey,"variablePickerForSelection"),searchQuery:f,onSearchInputChange:y,onComponentPropSelected:C}):o.createElement(t7.YK,{selectedItem:E,disabledVariableIds:new Set,currentView:k,toggleLayout:h.lQ,pickerType:"fields",setControlRightButtons:o.createElement(t5.f,{resolvedTypes:[d.rXF.BOOLEAN,d.rXF.STRING,d.rXF.FLOAT,d.rXF.COLOR]}),onVariableSelected:P,onClose:A,recordingKey:v.Pt(r.recordingKey,"variablePickerForSelection"),searchQuery:f,onSearchInputChange:y})),o.createElement(t7.$3,{onClose:A})):null,W)}var no=n(96796),ni=n(463420),nr=n(347082),nl=n(896474),ns=n(394781);let nc=(0,el.ex)("prototype_state_management_info",function(){let e=o.createElement("a",{className:er.cx.cursorPointer.colorTextTooltipSecondary.$,href:"https://help.figma.com/hc/articles/14397859494295",rel:"noopener noreferrer",target:"_blank",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},(0,T.tx)("proto.state_management.info_tooltip_learn_more")),t=o.createElement("span",null,o.createElement("strong",null,(0,T.tx)("proto.animation_panel.preserve_scroll_position")));return o.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,T.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}),nd="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",np="prototype_state_management_panel--expandCaret--uuDge";var nu=n(949207),nm=n(432023);function n_({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:r,showResetInteractiveComponentState:l,updateSelectionProperties:s,stateManagementVersion:c,selectedInteractions:d}){let p=(0,i.wA)(),u=(0,x.GS)(),[m,_]=o.useState(!u),E=o.useContext(eA.c);if((0,en.YT)()===en.Oz.TWO_COL&&E===eA.P.LEFT)return null;let g=(0,en.LH)(c),f=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),s({...function(e){if((0,O.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,O.gl)(e.preserveScroll),recordingKey:v.Pt(n,"preserve-scroll-check"),label:o.createElement(tr.J,null,(0,T.tx)("proto.animation_panel.preserve_scroll_position"))}),y=u?o.createElement(eY.TN,null,f):o.createElement(K.fI,{className:nd},f),h=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:ns.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,O.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,O.gl)(e.resetScrollPosition),recordingKey:v.Pt(n,"reset-scroll-position-check"),label:o.createElement(tr.J,null,(0,T.tx)("proto.animation_panel.reset_scroll_position"))}),b=o.createElement("div",{"data-tooltip-type":R.Ib.SPECIAL,"data-tooltip":nc,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:u?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},o.createElement(nl.In,{icon:"info-16"})),N=u?o.createElement(eY.TN,null,h," ",b):o.createElement(K.fI,{className:nd},h),A=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:ns.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,O.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,O.gl)(e.resetInteractiveComponents),recordingKey:v.Pt(n,"reset-component-state-check"),label:o.createElement(tr.J,null,(0,T.tx)("proto.animation_panel.reset_component_state"))}),w=u?o.createElement(eY.TN,null,A):o.createElement(K.fI,{className:nd},A),S=o.createElement(ti.S,{onChange:t=>{p((0,L._P)({name:"Reset Video Position Changed",params:{newValue:t}})),s({...function(e){if((0,O.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,O.gl)(e.resetVideoPosition),recordingKey:v.Pt(n,"reset-video-position-check"),label:o.createElement(tr.J,null,(0,en.LH)(c)?(0,T.tx)("proto.state_management.reset_video_state"):(0,T.tx)("proto.animation_panel.reset_video_state"))}),P=u?o.createElement(eY.TN,null,S):o.createElement(K.fI,{className:nd},S),C=o.createElement(K.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,en.kM)(c)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!u&&o.createElement(K.fI,null,o.createElement(K.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,T.tx)("proto.state_management")),!(0,en.kM)(c)&&b),(0,en.uU)(c)&&a&&y,r&&(0,en.uU)(c)&&P,g&&N,g&&l&&w,g&&r&&P,(0,O.gl)(c)&&o.createElement(eo.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},o.createElement(K.UZ,null,(0,T.tx)("proto.state_management.mixed_state_update")))),k=()=>{_(!m)},D=o.createElement(ep.D8,{key:"expand-caret",recordingKey:v.Pt(n,"expand-caret"),onMouseDown:k,role:"presentation"},o.createElement(I.U,{svg:m?nu.A:nm.A},m?o.createElement(no.O,{className:np}):o.createElement(ni.k,{className:np}))),M=o.createElement("div",{className:"prototype_state_management_panel--expandRow--RVDCp",onMouseDown:k,role:"presentation"},D,o.createElement(ep.oj,null,(0,T.tx)("proto.state")));return o.createElement(nr.p,{name:"prototype_state_management_panel"},u&&M,(m||!u)&&C)}class nE extends eg.c${}class ng extends eg.l6{}let nf=p.AD;class ny extends eu.cP{format(e){return e===nf||null===e?(0,T.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function nh(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:r,targetVideoNodeID:l,isVideoSelected:s,onChange:c}=e,d=(0,i.wA)(),[u,m]=o.useState(()=>s?new ny(a):new eu.cP(a));t.sort((e,t)=>{let n=u.format(e),a=u.format(t);return n.localeCompare(a)}),s&&t.unshift(nf);let _=t.length>0&&n.length>0,E=`prototype-target-video-select-${e.recordingKey}`,g=(0,x.GS)(),f=o.createElement(ng,{id:E,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,O.gl)(l)?l:p.dI(l),formatter:u,onChange:c,dispatch:d,dropdownShown:r,recordingKey:v.Pt(e,"select"),onOptionFocus:e=>{tY.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>u.hasNameForNode(e)).map((t,n)=>o.createElement(nE,{key:`enabled-${n}`,value:t,recordingKey:v.Pt(e,`viable-option-${n}`),disabled:!1})),_&&o.createElement(eg.sK,null),n.filter(e=>u.hasNameForNode(e)).map((t,n)=>o.createElement(nE,{key:`disabled-${n}`,value:t,recordingKey:v.Pt(e,`viable-option-${n}`),disabled:!0})));return g?o.createElement(eY.cS,{input:f,label:(0,T.tx)("proto.video_dropdown.label")}):f}var nv=n(946689);function nb({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let i=(0,x.GS)(),r=o.createElement(nv.ks,{className:i?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,T.t)("proto.interaction.example_com"),value:(0,O.gl)(e.connectionURL)?(0,T.t)("fullscreen.mixed"):(0,O._W)(e.connectionURL,""),onChange:n,recordingKey:v.Pt(t,"urlTextInput"),autoFocus:!1}),l=o.createElement(ti.S,{label:o.createElement(tr.J,null,(0,T.tx)("proto.action_open_url_in_new_tab")),onChange:a,recordingKey:v.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return o.createElement(o.Fragment,null,i?o.createElement(eY.cS,{label:(0,T.tx)("proto.open_url.text_input_label"),input:r}):r,i?o.createElement(eY.TN,null,l):o.createElement(K.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},l))}var nN=n(617453),nI=n(588599);function nT({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:r}){let{smallNudgeAmount:l,bigNudgeAmount:s}=(0,nN.sT)(),c=(0,i.wA)(),d=(0,x.GS)(),p=(t,n)=>(a,o)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:o})},u=(0,O._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let m=o.createElement(td.gq,{className:d?void 0:eS.U,inputClassName:d?eS.oM:eS.hF,value:u.y,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:s,onValueChange:p(u,"y"),dispatch:c,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:v.Pt(r,"extraScrollOffsetY")},d?o.createElement("span",{className:eS.QK},(0,T.tx)("proto.scroll_options.scroll_offset.y")):o.createElement(ei.B,{className:eS.QK,svg:nI.A})),_=o.createElement(td.gq,{className:d?void 0:eS.sC,inputClassName:d?eS.oM:eS.hF,value:u.x,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:s,onValueChange:p(u,"x"),dispatch:c,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:v.Pt(r,"extraScrollOffsetX")},d?o.createElement("span",{className:eS.QK},(0,T.tx)("proto.scroll_options.scroll_offset.x")):o.createElement(ei.B,{className:eS.Kh,svg:nI.A}));return d?o.createElement(eY.Cm,{label:(0,T.tx)("proto.scroll_options.offset"),leftInput:_,rightInput:m}):o.createElement(K.fI,null,m,_)}function nA(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"}))}let nx="prototype_video_action_options--chevron--mkNyv",nw="prototype_video_action_options--input--3-cEi",nS=new eu.js,nP=new eu.Z6;function nO({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:r}){let l=(0,x.GS)(),s=(0,eu.Od)(e),c=(0,O.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,O.E7)(e.connectionType),p="SKIP_TO"===c,u="SKIP_FORWARD"===c||"SKIP_BACKWARD"===c,m="PLAY"===c||"PAUSE"===c||"TOGGLE_PLAY_PAUSE"===c,_="MUTE"===c||"UNMUTE"===c||"TOGGLE_MUTE_UNMUTE"===c,E=(0,i.wA)(),g=(0,nN.RU)(),f=o.useCallback(e=>{n({mediaSkipToTime:e}),E((0,L._P)({name:"Media skip to time changed",params:{value:e}}))},[E,n]),y=`prototype-media-action-select-${r}`,h="prototype_video_action_options--shortDropdown--NOXXv",b=a&&a.type===y?nS:nP,N=o.createElement(eh,{id:y,dataTestId:"media-play-pause-select",className:h,chevronClassName:nx,inputClassName:nw,property:s,formatter:b,onChange:t,dispatch:E,dropdownShown:a,recordingKey:v.Pt(r,"select")},o.createElement(ey,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:v.Pt(r,"toggle-play-pause-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:v.Pt(r,"play-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:v.Pt(r,"pause-option"),disabled:!1})),I=o.createElement(eh,{id:y,dataTestId:"media-mute-unmute-select",className:h,chevronClassName:nx,inputClassName:nw,property:s,formatter:b,onChange:t,dispatch:E,dropdownShown:a,recordingKey:v.Pt(r,"select")},o.createElement(ey,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:v.Pt(r,"toggle-mute-unmute-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:v.Pt(r,"mute-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:v.Pt(r,"unmute-option"),disabled:!1})),A=o.createElement(eh,{id:y,dataTestId:"media-skip-by-select",className:h,chevronClassName:nx,inputClassName:nw,property:s,formatter:b,onChange:t,dispatch:E,dropdownShown:a,recordingKey:v.Pt(r,"select"),dropdownWidth:160},o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:v.Pt(r,"skip-forward-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:v.Pt(r,"skip-backward-option"),disabled:!1})),w=o.createElement(td.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",inputClassName:"prototype_video_action_options--timestamp--luOrs",dataTestId:"mediaSkipToTime-input",dispatch:E,value:e.mediaSkipToTime||0,onValueChange:f,wheelMultiplier:g/1e3,scrubMultiplier:g/1e3,max:3600,displayFractions:!0,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(r,"mediaSkipToTimeInput")},l?o.createElement(nA,null):void 0),S="SKIP_BACKWARD"===c?(0,T.t)("proto.trigger.duration_to_jump_backward"):(0,T.t)("proto.trigger.duration_to_jump_forward"),P=o.createElement(td.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:E,value:e.mediaSkipByAmount||5,onValueChange:e=>{n({mediaSkipByAmount:e}),E((0,L._P)({name:"Media skip by amount changed",params:{value:e}}))},wheelMultiplier:g/1e3,scrubMultiplier:g/1e3,max:3600,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":S,tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(r,"mediaSkipByAmountInput")});if(!d)return null;if(l){if(m)return o.createElement(eY.cS,{input:N,label:(0,T.tx)("proto.video_options.behavior")});if(_)return o.createElement(eY.cS,{input:I,label:(0,T.tx)("proto.video_options.behavior")});if(u)return o.createElement(o.Fragment,null,o.createElement(eY.cS,{input:A,label:(0,T.tx)("proto.video_options.direction")}),o.createElement(eY.cS,{input:P,label:(0,T.tx)("proto.video_options.offset")}));if(p)return o.createElement(eY.cS,{input:w,label:(0,T.tx)("proto.video_options.timestamp")})}return o.createElement(K.fI,null,m&&N,_&&I,u&&A,u&&P,p&&w)}function nC({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:r,updateSelectionProperties:l,stateManagementVersion:s,autoOpenVariablePicker:c,autoOpenExpressionBuilder:u,setAutoOpenExpressionBuilder:_,...E}){let g=(0,i.wA)(),f=(0,em.Um)(),{scene:h,selectionProperties:b}=(0,tn.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),N=(0,x.GS)(),I=(0,en.YT)(),A=I===en.Oz.SINGLE_COL,w=I===en.Oz.TWO_COL,S=o.useContext(eA.c),P=w&&S===eA.P.RIGHT,C="SET_VARIABLE"===(0,O.E7)(e.connectionType),k="SET_VARIABLE_MODE"===(0,O.E7)(e.connectionType),D="CONDITIONAL"===(0,O.E7)(e.connectionType),M="INTERNAL_NODE"===(0,O.E7)(e.connectionType),R="INTERNAL_NODE"===(0,O.E7)(e.connectionType)&&"SWAP_STATE"===(0,O.E7)(e.navigationType),V="URL"===(0,O.E7)(e.connectionType),K=M||"BACK"===(0,O.E7)(e.connectionType)||"CLOSE"===(0,O.E7)(e.connectionType),U="UPDATE_MEDIA_RUNTIME"===(0,O.E7)(e.connectionType),F=(0,eE.dq)(b),B=(0,ta.uQ)(),W=[],H=[];if(B){let{viableIds:e,disabledIds:t}=d.X3B.getVideoNodesOnSameTlfAsNode(B);W=e,H=t}let z=p.dI((0,O.E7)(e.transitionNodeID)),G=null!=z&&z!==p.AD,Y=M&&(!(0,O.hS)(e.transitionNodeID)||G),X=(0,O.E7)(e.navigationType),$=M&&"OVERLAY"===(0,O.E7)(X),j=(0,en.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),Q=K&&!$&&("INSTANT"===j.behavior||"DISSOLVE"===j.behavior),Z=M&&"OVERLAY"===(0,O.E7)(e.navigationType)&&G,ee=M&&($||"SWAP"===(0,O.E7)(X)),et=!U&&(0,en.oc)(e),ea=(0,en.GB)(e),eo=(0,en.uU)(s)?Q||et:(0,en.Fp)(s,e.connectionType,e.navigationType),{selectedInteractions:ei}=(0,J.Ay)(q.J.NORMAL),el=ei.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>y.d({nodeID:e.sourceNodeID,interactionID:e.id})),es=o.useCallback(e=>{let t=p.sH(e);t&&l({transitionNodeID:t}),g((0,L._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el),destinationTlfId:e}}))},[g,l,el]),ec=o.useCallback(e=>{r(e),g((0,L._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),g((0,L._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el)}}))},[r,g,el]),ed=o.useCallback(e=>{l({connectionURL:e.target.value})},[l]),ep=(0,eu.Od)(e),e_=m()({[eS.Ph]:!N,[eS.Ti]:E.isNestedInConditional&&!A&&!P}),eg=M&&!R,ef=o.createElement(t0,{className:eS.iR,dispatch:g,dropdownShown:f,onChange:es,nodeId:e.transitionNodeID||p.Hr,scene:h,recordingKey:v.Pt(t,"destinationDropdown"),action:ep,isUI3:N}),ey=o.createElement(nT,{action:ep,showScrollToOptions:"SCROLL_TO"===ep,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:l,recordingKey:v.Pt(t,"scrollOptionsPanel")}),eh=o.createElement(tb,{interactionType:n,updateSelectionProperties:l,recordingKey:v.Pt(t,"overlaySettings"),actionIndexPath:E.actionIndexPath,nodeId:e.transitionNodeID||p.Hr});return o.createElement("div",{className:e_},eg&&(N?o.createElement(o.Fragment,null,o.createElement(eY.cS,{label:ee?(0,T.tx)("proto.overlay"):(0,T.tx)("proto.destination"),input:ef}),ey,Z&&eh):ef),V&&o.createElement(nb,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{l({openUrlInNewTab:e}),g((0,L._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ed}),U&&o.createElement(nh,{dropdownShown:f,scene:h,targetVideoNodeID:e.transitionNodeID||p.Hr,recordingKey:v.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:W,disabledSameFrameVideoIds:H,isVideoSelected:F,onChange:es}),o.createElement(nO,{dropdownShown:f,action:e,onChange:a,updateSelectionProperties:l,recordingKey:t}),!N&&ey,C&&o.createElement("div",{className:N?void 0:er.cx.ml4.$},o.createElement(na,{className:eS.PB,dispatch:g,onChange:es,nodeId:e.transitionNodeID||p.Hr,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:l,recordingKey:v.Pt(t,"setVariableControls"),action:ep,isNestedInConditional:E.isNestedInConditional,isNarrowPanel:E.isNestedInConditional||E.isNarrowPanel,autoOpenVariablePicker:c})),k&&o.createElement("div",{className:N?void 0:er.cx.ml4.$},o.createElement(e3,{dispatch:g,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:l,recordingKey:v.Pt(t,"setVariableControls"),actionIndexPath:E.actionIndexPath.join(",")})),D&&(P?o.createElement(tG,{recordingKey:v.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:u,setAutoOpenExpressionBuilder:_,updateSelectionProperties:l,conditionalActions:(0,O.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):o.createElement(tz,{updateSelectionProperties:l,recordingKey:v.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:r,interactionType:n,stateManagementVersion:s,selectedInteractions:E.selectedInteractions,actionIndexPath:E.actionIndexPath,onDrop:E.onDrop,onSelect:E.onSelect,onExpand:E.onExpand,onNewActionAdded:E.onNewActionAdded,selectedActionIndex:E.selectedActionIndex,expandedRows:E.expandedRows,autoOpenVariablePicker:c,handleMouseDownUI3:E.handleMouseDownUI3})),R&&o.createElement("div",{className:er.cx.ml0.$},o.createElement(t1,{onChange:ec,nodeId:e.transitionNodeID||p.Hr,recordingKey:v.Pt(t,"consumption"),actionIndexPath:E.actionIndexPath})),Y&&o.createElement(o.Fragment,null,N&&o.createElement("div",{className:eS.x}),o.createElement(tP.X7,{transition:j,interactionType:n,navigationType:e.navigationType,recordingKey:v.Pt(t,"animationPanel"),updateSelectionProperties:l,isNarrowPanel:E.isNestedInConditional||E.isNarrowPanel,stateManagementVersion:s})),Z&&!N&&eh,eo&&o.createElement(o.Fragment,null,N&&o.createElement("div",{className:eS.x}),o.createElement(n_,{connectionType:e.connectionType,transition:j,navigationType:e.navigationType,recordingKey:v.Pt(t,"stateManagementPanel"),updateSelectionProperties:l,showPreserveScrollPosition:Q,showResetVideoState:!!et,showResetInteractiveComponentState:!!ea,stateManagementVersion:s,selectedInteractions:E.selectedInteractions})))}var nk=n(344525),nD=n(323110),nL=n(482725);let nM=Symbol("ACTION_ROW");function nR({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:r,autoOpenVariablePicker:l,autoOpenExpressionBuilder:c,setAutoOpenExpressionBuilder:d,...p}){let u=(0,i.wA)(),{shouldShowAdvancedPrototypingPaywall:_,showAdvancedPrototypingVariablesModal:E,showAdvancedPrototypingConditionalActionsModal:g}=(0,en.zt)(),h=(0,em.Um)(),b=(0,en.SJ)(),{firstVariableSetMode:N,firstVariableSetID:A}=e6(),w=p.action,S=p.isNestedInConditional&&(0,tO.qQ)(p.action),P=!!w.connectionType&&"CONDITIONAL"===w.connectionType,C=(0,x.GS)(),k=(0,en.YT)(),D=k===en.Oz.SINGLE_COL,M=k===en.Oz.TWO_COL,V=o.useContext(eA.c),U=M&&V===eA.P.RIGHT,F=M&&V===eA.P.LEFT,B=!((0,O.gl)(p.action)||["CLOSE","NONE"].includes(w.connectionType))&&!C;var W=p.selectedActionIndex.equals(p.actionIndexPath);let H=1===p.selectedActionIndex.path.length&&p.isNestedInConditional&&p.actionIndexPath[0]===p.selectedActionIndex.path[0];var z=void 0===p.expandedRows||void 0!==p.expandedRows.find(e=>e.equals(p.actionIndexPath));C&&(z=!!D||!F||P);let G=o.useCallback(()=>{(B||D)&&p.onExpand(p.actionIndexPath)},[B,D,p]),[Y,q]=o.useState(!1);o.useEffect(()=>{if(P){let e=setTimeout(()=>{q(!0)},0);return()=>clearTimeout(e)}q(!0)},[P]);let J=P&&!z,X=P&&z,$=o.useRef(null),[j,Q]=(0,f.fp)(en.hV),{position:Z,dragItem:ee}=(0,ea.h4)(()=>({type:nM,element:$,item:p.action,dropPositionThreshold:X?.2:J?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!F||!z,onDrop(e){p.onDrop(e),Q(!0)}})),et=o.useMemo(()=>{let e=$.current;if(!e||!Z||U)return;if(ee&&"CONDITIONAL"===ee.connectionType&&p.isNestedInConditional||(0,tO.qQ)(ee)){Q(!1);return}let t=S?ea.Nz.BEFORE:Z;var n=void 0;let a=e.offsetParent?.firstElementChild?.scrollTop??0;return t===ea.Nz.BEFORE?n=e.offsetTop-a:t===ea.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-a),Q(!0),n},[Z,U,ee,p.isNestedInConditional,S,Q]),eo=Z&&P&&!z&&Z===ea.Nz.INSIDE&&"CONDITIONAL"!==ee.connectionType,er=v.rf(p.recordingKey,"mousedown",e=>{z||(W=!0,p.onSelect(p.actionIndexPath,!0))}),el=v.rf(p.recordingKey,"mousedown",e=>{W=!1,p.onSelect(p.actionIndexPath,!1)}),es=v.rf(p.recordingKey,"click",e=>{p.onSelect(p.actionIndexPath,!0)}),ec=v.rf(p.recordingKey,"mousedown",e=>{(0,tO.qQ)(p.action)||p.onSelect(p.actionIndexPath,!0)}),e_=e=>{var n=!0,a=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":_?(n=!1,E()):(t({connectionType:"SET_VARIABLE"}),l.current=!0);break;case"SET_VARIABLE_MODE":_?(n=!1,E()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:A,targetVariableModeID:N});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":a=!0,_?(n=!1,g()):(t({connectionType:"CONDITIONAL"}),C&&d&&d(!0))}if(C||z||G(),M&&p.onExpand(p.actionIndexPath,a),n){let t=r.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>y.d({nodeID:e.sourceNodeID,interactionID:e.id}));u((0,L._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},eE=p.isNestedInConditional?eS.It:eS.ft,eg=m()({[eS.wu]:!F,[eS.zX]:F&&j}),ef=o.createElement(I.U,{svg:nD.A},o.createElement(ed,{className:eS._2}));if(S&&p.onAddAction)return o.createElement("div",{className:F?eS.LW:void 0},et&&o.createElement("hr",{className:eE,style:{transform:`translateY(${et}px)`}}),F&&p.isNestedInConditional&&ef,o.createElement("div",{className:eg,ref:$},o.createElement(tM,{addButtonPressed:p.onAddAction,recordingKey:v.Pt(p.recordingKey,"addAction"),isNestedInConditional:!0})));let ey=(0,eu._X)(w),eh="NONE"!==ey,ev=(z||!eh)&&!F,eN=p.numActions>1,eI=(p.numActions>1||p.isNestedInConditional)&&!F,eT=m()({[eS.$l]:!0,[eS.KY]:F&&!p.isNestedInConditional,[eS.Iw]:F&&!p.isNestedInConditional&&j,[eS.DM]:F&&p.isNestedInConditional,[eS.vs]:F&&p.isNestedInConditional&&j,[eS.M9]:F&&p.isNestedInConditional&&H&&j,[eS.I_]:F&&P&&!W&&j,[eS.Cu]:W&&!C,[eS.PE]:W&&F&&!p.isNestedInConditional,[eS.Ze]:eo,[eS.Op]:p.isNestedInConditional&&!C}),ex=m()({[eS.rn]:!0,[eS.Gu]:F,[eS.Ti]:p.isNestedInConditional&&!C&&!U,[eS.Yo]:p.isNestedInConditional&&C&&!U}),ew=o.createElement(ei.B,{key:"expand-caret",className:eS.GE,svg:z?nu.A:nm.A,recordingKey:v.Pt(p.recordingKey,"expandCaret"),onClick:G}),eP=o.createElement(eD,{action:w,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel&&eN,onClick:C?es:void 0}),eO=o.createElement(eb,{className:"NONE"===ey||C?void 0:nk.fH,dispatch:u,dropdownShown:h,onChange:e_,action:ey,recordingKey:v.Pt(p.recordingKey,"actionDropdown"),showVideoActions:b,isNestedInConditional:p.isNestedInConditional}),eC=o.createElement(K.K0,{className:C?eS.gG:eS.hH,onClick:n,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.delete"),"aria-label":(0,T.t)("proto.prototype_panel.delete"),recordingKey:v.Pt(p.recordingKey,"actionDeleteButton")},o.createElement(I.U,{svg:nL.A},o.createElement(s.O,null))),ek=o.createElement(K.fI,{className:ex,onDoubleClick:G},B&&ew,ev?o.createElement("span",{className:eS.P2},eO):eP,eI&&eC),eL=ev?eO:eP,eM=o.createElement(ep.D8,{className:ex,onDoubleClick:G},B&&ew,eI?o.createElement(tt.DE,{appendedClassName:eS.Jw,label:null,input:eL,icon:eC}):o.createElement(tt.Ad,{appendedClassName:eS.Jw,label:null,input:eL})),eR=(0,T.tx)("proto.action"),eV=o.createElement(ep.D8,{className:ex},D||U?o.createElement(eY.cS,{label:eR,input:eL}):eL),eK=C?eV:eM,eU=m()({[eS.Oe]:!0,[eS.h2]:W,[eS.Ob]:P});return o.createElement("div",{className:eT,ref:$,role:"button",tabIndex:0,onMouseDown:C?void 0:er,onMouseUp:C?void 0:el},void 0!==et&&o.createElement("hr",{className:eE,style:{transform:`translateY(${et}px)`}}),F?o.createElement("div",{className:eU,role:"button",tabIndex:0,onMouseDown:C?ec:void 0},p.isNestedInConditional&&ef,eK):C?eK:ek,z&&Y&&o.createElement(nC,{updateMultipleDestinationNodes:e,action:w,onActionChange:e_,recordingKey:p.recordingKey,updateSelectionProperties:t,interactionType:p.interactionType,stateManagementVersion:a,selectedInteractions:r,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel,actionIndexPath:p.actionIndexPath,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onNewActionAdded:p.onNewActionAdded,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:l,autoOpenExpressionBuilder:c,setAutoOpenExpressionBuilder:d,handleMouseDownUI3:ec}))}var nV=n(427113),nK=n(682331),nU=n(73349);function nF({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let i;let r=(0,nU._i)(t?.keyCodes),l=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[s,c]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(a(!1),d.current.focus(),c(!0))},[a,n,t]),o.useEffect(()=>{if(!s)return()=>{};let t=new nK.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,s]);let p=null,u=(0,nU.E8)(t),m=(0,x.GS)();return s?i=o.createElement(nB,null,m?(0,T.tx)("proto.keyCapture.press_key_lowercase"):(0,T.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&r?p=(0,nU.U8)(r):u?p=u:i=o.createElement(nB,null,m?(0,T.tx)("proto.keyCapture.click_to_set_key"):(0,T.tx)("proto.keyCapture.click_to_select")),o.createElement(K.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":R.Ib.TEXT,"data-tooltip":p&&p.length>10?p:null,onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!nU.RI.has(t)&&nU.pu[t]&&(t===r?.keyCode&&e.repeat?l((0,nU.wb)({keyCode:t,metaKey:e.metaKey||r.metaKey,shiftKey:e.shiftKey||r.shiftKey,ctrlKey:e.ctrlKey||r.ctrlKey,altKey:e.altKey||r.altKey})):l((0,nU.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},p??i)}function nB({children:e}){return o.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var nW=n(634238);class nH extends eg.l6{}class nz extends eg.c${}let nG=new eu.VG,nY=new eu.EX,nq=new eu.JV,nJ=new eu.Eq;function nX(e){let t=(0,i.wA)(),n=(0,em.Um)(),a=(0,x.GS)(),r=(0,ef.cJ)(),{showVideoV2Triggers:l}=(0,tn.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===d.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,eE.dq)(e.mirror.selectionProperties)})),s=(0,f.md)(nW.NE),c=(t,n)=>{let i=o.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,eE.e7)(t));return o.createElement(nz,{key:n,value:t,icon:a?i:void 0,recordingKey:v.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&p.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,O.hS)(e.property),a=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,O.hS)(e.property)&&e.property!==t;return(!n&&!a||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?l:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},u=["NONE"].map(c),m=["ON_CLICK",...r?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(c),_=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(c),E=(r?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(c),g=["AFTER_TIMEOUT"].map(c),y=s?"ON_MEDIA_HIT"!==e.property?nY:nJ:"ON_MEDIA_HIT"!==e.property?nG:nq,h=o.useCallback(e=>e-24,[]),b=(0,O.E7)(e.property);return o.createElement(nH,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",dataTestId:"interaction-select",property:e.property,formatter:y,icon:a&&b?(0,eE.e7)(b):void 0,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:v.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,e_.nl)(),dropdownAlignment:h,dropdownWidth:160},u,o.createElement(eg.sK,null),m,o.createElement(eg.sK,null),_,!r&&o.createElement(eg.sK,null),!r&&g,l&&[o.createElement(eg.sK,{key:""}),...E])}let n$={keyCodes:[],triggerDevice:"KEYBOARD"};function nj(e,t,n,a){return n?o.createElement(eY.cS,{label:e,input:t,appendedClassName:a?void 0:eS.dU}):o.createElement(K.fI,null,t)}function nQ(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,J.Ay)(e.category),{interactionType:r="NONE",transitionTimeout:l=.8,mediaHitTime:s=0,interactionMaintained:c=!1,interactionDuration:d=.3,keyTrigger:p=n$}=t.interactionEvent,u=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,O.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},_=void 0!==t.interactionActions.find(e=>u(e,"URL")),E=void 0!==t.interactionActions.find(e=>u(e,"UPDATE_MEDIA_RUNTIME")),g=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,f=void 0!==t.interactionActions.find(e=>u(e,"CONDITIONAL"));return function(e){let t=(0,i.wA)(),n=e.updateSelectionProperties,a=(0,nN.RU)(),[r,l]=o.useState(!1),s=(0,x.GS)(),c=(0,en.YT)(),d=c===en.Oz.SINGLE_COL,p=c===en.Oz.TWO_COL,u=!0===(0,O.E7)(e.maintained),_=(0,O.E7)(e.keyTrigger),E="ON_KEY_DOWN"===(0,O.E7)(e.interactionType),g="AFTER_TIMEOUT"===(0,O.E7)(e.interactionType),f="ON_MEDIA_HIT"===(0,O.E7)(e.interactionType),y=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,O.E7)(e.interactionType)||"")>-1,h=o.createElement(nX,{className:eS.sQ,property:e.interactionType,onChange:a=>{ee.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,L._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,O._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&l(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:v.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),b=s?d?o.createElement(eY.cS,{label:(0,T.tx)("proto.trigger"),input:h}):o.createElement("div",{className:eS.BX},h):o.createElement(K.fI,{className:m()(eS.SG,eS.QT)},h,o.createElement("div",{className:eS.LY},e.headerButtons)),N=o.createElement(o.Fragment,null,g&&nj((0,T.tx)("proto.delay"),o.createElement(td.W4,{className:s?eS.Lp:eS.Zp,inputClassName:s?eS.Gl:void 0,dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(e,"timeoutInput")},s?o.createElement(nV.A,null):void 0),s,d),E&&nj((0,T.tx)("proto.key"),o.createElement(nF,{onChange:e=>{n({keyTrigger:e})},value:_,shouldFocusKeyCaptureField:r,setShouldFocusKeyCaptureField:l}),s,d),f&&nj((0,T.tx)("proto.time"),o.createElement(td.qd,{displayFractions:!0,className:eS.Ym,inputClassName:eS.vE,dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(e,"mediaHitTimeInput")},s?o.createElement(nA,null):void 0),s,d),y&&nj((0,T.tx)("proto.delay"),o.createElement(td.W4,{className:s?eS.Lp:eS.aq,inputClassName:s?eS.Gl:eS.p0,dataTestId:"duration-input",dispatch:t,value:u?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,T.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:v.Pt(e,"delayInput")},s?o.createElement(nV.A,null):void 0),s,d));return s?o.createElement("div",{className:p?eS.eU:void 0},b,N):o.createElement("div",{className:eS.cF},b,N)}({...e,updateSelectionProperties:a,interactionType:r,interactionContainsOpenLinkAction:_,interactionContainsUpdateMediaRuntime:E,interactionOnlyContainsBack:g,interactionContainsConditionalAction:f,timeout:l,maintained:c,interactionDuration:d,mediaHitTime:s,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:v.Pt(e.recordingKey,en.Qe)})}let nZ="prototype_interaction_edit_modal--contentContainer--bo2b4",n0="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",n1="prototype_interaction_edit_modal--ui3TwoColContentContainerResizable--20T6v",n2="prototype_interaction_edit_modal--ui3WithStateMgmtVersionPanel--9HgX1",n6="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",n3="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",n4="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8",n5="prototype_interaction_edit_modal--ui3InteractionsPanelContentRightResizable--cbK91";function n7(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:i,mergedActions:r}=(0,J.Ay)(e.category),l="NONE"!==(0,O.E7)(e.interactionType),s=void 0!==r.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,x.GS)(),u=(0,en.YT)(),_=u===en.Oz.SINGLE_COL,E=u===en.Oz.TWO_COL,{expandedRows:g,setExpandedRows:f,deleteButtonPressed:y,newActionIndexPath:h,resetNewActionIndexPath:b}=e;o.useEffect(()=>{h&&!h?.equals([])&&(p?d(h.path,!0):(f([...g,h]),d([],!1)),b())},[g,f,h,b,d,p]);let N=o.useCallback(e=>{g.find(t=>t.equals(e))?f(g.filter(t=>!t.equals(e))):f([...g,new tO.Op(e)])},[g,f]),I=o.useCallback(n=>{var a=n.dropItem;if((0,O.gl)(a)||(0,tO.qQ)(n.dragItem))return;let o=e.interactionsOnSelectedNodes;if(!o||!t)return;for(var i=0;i<t?.length;i++){let e=t[i];if(e&&e.actions){let o=e.actions,r=(0,tO.Vp)(o,c,g,a,n.position);if(r.newSelectedActionIndex&&E&&d(r.newSelectedActionIndex.path,!0),r.newActions&&(t[i].actions=r.newActions,p||d([],!1)),r.newExpandedRows){if(E){let e=[];r.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new tO.Op([n]))}),f(e)}else f(r.newExpandedRows)}}}let r=o.map(e=>t.find(t=>t.id===e.id)??e);w.Y5.updateSelectionProperties({prototypeInteractions:r})},[g,f,e.interactionsOnSelectedNodes,c,t,d,p,E]),A=m()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":E});return o.createElement(ea.hh,null,o.createElement(K.Zk,{className:A},e.shouldHideTitle?null:o.createElement(K.fI,null,o.createElement(K.U8,{title:(0,T.t)("proto.interaction.interaction"),dataTooltipContentKey:ec,dataTooltipTimeoutDelay:50})),o.createElement("div",null,(l||p)&&o.createElement(o.Fragment,null,_&&o.createElement(o.Fragment,null,o.createElement(nQ,{category:e.category,recordingKey:en.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),i&&o.createElement(eo.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},o.createElement(K.UZ,null,(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!i&&o.createElement(o.Fragment,null,r?.map((i,l)=>o.createElement(nR,{key:l,updateMultipleDestinationNodes:a(l),action:i,recordingKey:v.Pt(e.recordingKey,en.eG,l),updateSelectionProperties:n(l),onDeleteAction:()=>y(l),interactionType:e.interactionType,actionIndexPath:[l],numActions:r.length,isNestedInConditional:!1,isNarrowPanel:!s,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:I,onSelect:e.onSelect,onExpand:N,selectedActionIndex:c,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:g,onNewActionAdded:e.onNewActionAdded,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder})))))))}var n8=n(421757);function n9({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:r}){let l=(0,i.wA)(),s=(0,x.GS)(),c=(0,en.YT)()===en.Oz.SINGLE_COL,d=()=>{for(let t of(Z.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,en.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&ns.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,O.hS)(e.preserveScroll)&&(0,O.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(F.F.enqueue({type:"state-management-updated",message:(0,T.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,T.t)("proto.state_management.visual_bell_update_all"),action:()=>{w.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(F.F.enqueue({type:"state-management-updated-all",message:(0,T.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},p=()=>{Z.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},u=1===a?o.createElement(nv.jG,{className:"prototype_state_management_version_panel--revertButton--Svmg9",recordingKey:v.Pt(t,"revert-state-management-version"),onClick:p,"data-testid":"revert-state-management-button"},(0,T.tx)("proto.state_management.revert_controls")):o.createElement(nv.nR,{recordingKey:v.Pt(t,"update-state-management-version"),onClick:d},(0,T.tx)("proto.state_management.update_controls")),m=c?n8.IK:n8.$n,_=1===a?o.createElement(m,{variant:"secondary",onClick:p,recordingKey:v.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,T.tx)("proto.state_management.revert_controls")):o.createElement(m,{variant:"primary",onClick:d,recordingKey:v.Pt(t,"update-state-management-version")},(0,T.tx)("proto.state_management.update_controls")),E=1===a?(0,T.tx)("proto.state_management.new_controls"):(0,T.tx)("proto.state_management.old_controls"),g=o.createElement("a",{target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/articles/14397859494295",className:s?void 0:"prototype_state_management_version_panel--link--i5iDD blue_link--blueLink--9rlnd"},s?(0,T.tx)("proto.state_management.controls_help_link_new"):(0,T.tx)("proto.state_management.controls_help_link")),f=o.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},o.createElement(K.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},E,g),o.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},u)),y=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},o.createElement(tr.J,null,E),g,_),h=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},o.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},o.createElement(tr.J,null,E)),o.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},g),_);return o.createElement(nr.p,{name:"prototype_state_management_version_panel"},o.createElement(K.Zk,{className:s?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},s?c?y:h:f))}let ae="created_noodle";function at(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,i=(0,en.YT)()===en.Oz.TWO_COL,{detailProps:r,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,J.Ay)(e.category);(0,et.h)(()=>{if(void 0!==ee.sn.get(ae)){let e=ee.sn.stop(ae);(0,Z.sx)(ae,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:u}=(0,en.n6)(r,l,d),{interactionType:m="NONE",interactionMaintained:_=!1,interactionDuration:E=.3,keyTrigger:g=n$,transitionTimeout:f=.8,mediaHitTime:y=0}=l.interactionEvent,h=(0,en.iC)(d),b=o.createElement(n7,{interactionType:m,timeout:f,mediaHitTime:y,maintained:_,interactionDuration:E,keyTrigger:g,recordingKey:v.Pt(e,en.Qe),shouldHideTitle:t,interactionsOnSelectedNodes:s,category:n,stateManagementVersion:h,autoOpenVariablePicker:e.autoOpenVariablePicker,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,selectedActionIndex:e.selectedActionIndex,expandedRows:e.expandedRows,setExpandedRows:e.setExpandedRows,deleteButtonPressed:e.deleteButtonPressed,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder});return o.createElement("div",null,b,!i&&p&&o.createElement(n9,{transition:u,recordingKey:v.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:h,selectedInteractions:d}))}var an=n(360803),aa=n(102165);function ao(e,t,n){let[a,o,i]=e.path,r=t[a].conditionalActions;if((0,O.hS)(r)){let e=r?.[o].actions?.length??0;if(i>=e){if(0===e){n([a],!0);return}n([a,o,i-1],!0);return}}}function ai(e,t,n){let a=e.path[0]>=t.length,o=0===e.path.length;if(a){n([t.length-1],!0);return}if(o){n([0],!0);return}}var ar=n(146935),al=n(277687);let as=()=>{d.glU.setSelectedInteractions([]),w.Y5.deselectProperty()},ac=(0,E.jz)("197px"),ad=(0,E.c8)("50%");function ap(e){var t;return e&&a?.height<369?a=t={...a,height:369}:a??={width:440,height:e?369:320,leftWidthPct:45}}let au=o.memo(function(){let e=(0,i.d4)(ag),t=(0,J.HS)(),{selectedInteractions:n}=(0,J.Ay)(t),a=n.length>0,[r,l]=o.useState(!1),s=v.v_(en.dJ,"keydown",t=>"Shift"!==t.key?v.aH:(l(!0),e&&a)?void 0:v.aH),c=v.v_(en.dJ,"keyup",t=>"Shift"!==t.key?v.aH:(l(!1),e&&a)?void 0:v.aH);if(o.useEffect(()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",c),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",c)}),[s,c]),!e||!a)return null;let d=n.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return o.createElement(am,{category:t,containsConditional:d,pressingShiftKey:r,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:l})}),am=o.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:c,initialY:u,shouldPin:h,setPressingShiftKey:A}){let O=(0,i.wA)(),[K,U]=o.useState(!1),[,F]=(0,f.fp)(aa.x),B=(0,o.useRef)(null),[W,H]=o.useState(!1),z=h||K,G=(0,x.GS)(),Y=(0,en.YT)(),q=Y===en.Oz.SINGLE_COL,X=Y===en.Oz.TWO_COL,[$,Z]=o.useState(new tO.Op(G?[0]:[])),{selectedInteractions:ee,differentLengthActions:et,interactionsOnSelectedNodesAndComponents:ea,mergedActions:eo,detailProps:ei,detailPropsMultipleActions:er,updateSelectionProperties:el}=(0,J.Ay)(e);var es=$.path.length>0?$:new tO.Op([0]);let ec=es.isConditional(),ed=(e,t)=>es=new tO.Op(e);G&&es.path[0]>=eo.length&&!ec?ai($,eo,ed):G&&ec&&ao($,eo,ed);let ep=o.useCallback((e,t)=>{t?Z(new tO.Op(e)):Z(new tO.Op([]))},[]);o.useEffect(()=>{if((0,_.vA)(eo.length>0,"the interactions panel should always have actions if rendered"),!G)return;let e=$.isConditional();if(e){if(e){ao($,eo,ep);return}}else{ai($,eo,ep);return}},[eo,$,G,ep]);let{shouldShowAdvancedPrototypingPaywall:eu,showAdvancedPrototypinglMultipleActionsModal:em}=(0,en.zt)(),{showPanel:e_,transition:eE}=(0,en.n6)(ei,er,ee),eg=(0,en.iC)(ee);var ef=[];X?eo.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&ef.push(new tO.Op([t]))}):eo.length<4&&eo.forEach((e,t)=>{ef.push(new tO.Op([t]))});let[ey,eh]=o.useState(ef),ev=o.useRef(null),eb=X&&(0,g.kc)().prototype_modal_resize,eN=n&&!z&&!W,eI=(0,E.jz)(ar.prototypeInteractionModalWidth),eT=(0,E.jz)(ar.prototypeInteractionModalExpandedWidth),ex=ap(e_).width,ew=t?eT:eI;X&&(ew=ex);let[eS,eP]=o.useState(h),eO=(0,C._X)({subscribeToUpdates_expensive:!h}),eC=o.useCallback(()=>{K||(O((0,L._P)({name:"prototype_interaction_details_modal_dragged"})),U(!0))},[O,K,U]),ek=o.useMemo(()=>{let e=new b.Mi(c,u);if(h)return X?new b.Mi(e.x-(ex-eI),e.y):t?new b.Mi(e.x-(eT-eI),e.y):e;{let t=(0,C.$g)(eO,e);return new b.Mi(t.x-ew/2,t.y+30)}},[ew,c,u,t,h,eO,X,eT,eI,ex]);o.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&A(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,A]),o.useEffect(()=>{F(eN)},[F,eN]),o.useEffect(()=>{eP(h)},[h]),o.useEffect(()=>()=>{O((0,L._P)({name:"prototype_interaction_details_modal_closed"}))},[O]);let eD=o.useRef(null),[eL,eM]=o.useState(!1);o.useEffect(()=>{eL&&(eM(!1),eD.current?.scrollToBottom())},[eL,eM,eD]);let[eR,eV]=o.useState(new tO.Op([])),eK=(0,D.q5)(),eU=o.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case M.zy.COPY:case M.zy.CUT:{let a=JSON.parse(JSON.stringify(ee)),o=(0,an.l)(a),i=S.fG(eK?.key||null,{prototypeInteractions:o});if(S.C4(n,i,""),t===M.zy.CUT){let e=[];for(let t of ee){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(y.d({nodeID:n,interactionID:a}))}P.l7.user("delete-prototype-interactions",()=>d.glU.deleteInteractions(e)),w.Y5.deselectProperty()}e.accept()}}},[eK?.key,ee]),eF=o.useRef(!1),[eB,eW]=o.useState(!1),{firstVariableSetMode:eH,firstVariableSetID:ez}=e6(),eG=(0,k.p8)("currentPage"),eY=o.useCallback((e,t,n,a)=>{O((0,L._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:a}}))},[O]),eq=o.useCallback(e=>{if(ea&&ee){var t=!1,n=!1;if(eu)em();else{for(let i=0;i<ee?.length;i++){let r=ee[i],l=[];if(r&&r.actions){var a=0,o=[];for(let i=0;i<r.actions.length;i++){let s=r.actions[i];if(i!==e)void 0!==ey.find(e=>e.equals([i]))&&o.push(new tO.Op([a])),l.push(s),a++;else{let e=r.id?r.id:p.Hr;eY(s.connectionType?s.connectionType:"NONE",(0,p.dI)(e),eG),i===r.actions.length-1&&(t=!0),2===r.actions.length&&(n=!0)}eh(o)}ee[i].actions=l}}let i=ea.map(e=>ee.find(t=>t.id===e.id)??e);w.Y5.updateSelectionProperties({prototypeInteractions:i}),n&&G&&eh([new tO.Op([0])]),t&&X&&Z(new tO.Op([e-1]))}}},[ea,ee,eu,em,ey,eG,eY,X,G]),eJ=o.useCallback(e=>{if(!ea||!ee)return;let t=e.isConditional();if(eu)em();else if(t){var n=!1,a=!1;let[t,c,d]=e.path;for(var o=[],i=0;i<ee.length;i++){let e=ee[i],u=e.actions;if(u){for(var r=[],l=0;l<u.length;l++)if(l!==t||"CONDITIONAL"!==u[l].connectionType)r.push(u[l]);else{var s=u[l].conditionalActions;if(!s)continue;let t=s.map((t,o)=>{if(o!==c)return t;{let o=t.actions;if(!o)return t;let i=o[d];if(i){let t=e.id?e.id:p.Hr;eY(i.connectionType?i.connectionType:"NONE",(0,p.dI)(t),eG,!0)}let r=o.filter((e,t)=>t!==d);return n=o&&d===o.length-1,a=0===r.length,{...t,actions:r}}});u[l].conditionalActions=t,r.push(u[l])}e.actions=r,o.push(e)}}w.Y5.updateSelectionProperties({prototypeInteractions:o}),a?Z(new tO.Op([e.path[0]])):!a&&n&&Z(new tO.Op([e.path[0],c,d-1]))}else eq(e.path[0]);document.activeElement?.blur()},[ea,ee,eu,em,eq,eG,eY]),eX=m()({[nZ]:!eb,"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":X}),e$=o.createElement(N.P,{className:eX,useBottomPinning:!X,ref:eD,allowScrollAndZoomOver:!0,"data-not-draggable":!0},(0,g.kc)().prototype_ai_auto_adv_proto&&o.createElement(j,null),o.createElement(at,{shouldHideTitle:!0,recordingKey:X?v.Pt("leftCol",en.dJ):en.dJ,category:e,autoOpenVariablePicker:eF,newActionIndexPath:eR,resetNewActionIndexPath:()=>{eV(new tO.Op([]))},onNewActionAdded:e=>{eV(e)},selectedActionIndex:$,onSelect:ep,expandedRows:ey,setExpandedRows:eh,deleteButtonPressed:eq,autoOpenExpressionBuilder:eB,setAutoOpenExpressionBuilder:eW})),ej=1===ee.length,eQ=ee[0],eZ=eQ.actions&&eQ.actions.length<2,e0=eQ.actions&&1===eQ.actions.length&&eQ.actions[0],e1=!e0||"NONE"===e0.connectionType,e2=ej&&eZ&&e1;var e3=p.Hr;let e4=o.createElement(tM,{skipPaywall:e2,addButtonPressed:e=>{if(!ee)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&eu){em();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=ez,e.targetVariableModeID=eH),"SET_VARIABLE"===e.connectionType&&eF&&(eF.current=!0),G&&"CONDITIONAL"===e.connectionType&&eW(!0);let t=!1;var n=null,a=G&&!et&&!e2&&ee[0].actions&&1===ee[0].actions.length;if(et||e2)for(var o=0;o<ee.length;o++){let t=ee[o];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,en.uU)(t.stateManagementVersion)&&n&&a&&ns.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var o=0;o<ee.length;o++){let a=ee[o];if(a.actions){if((0,en.uU)(a.stateManagementVersion)&&(a.id&&a.sourceNodeID&&ns.zZ.recordInteractionUpgraded(a.id,a.sourceNodeID),a.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),X){if($.isConditional()){let n=$.path[0],o=$.path[1],i=$.path[2],r=a.actions?.[n],l=r.conditionalActions?.[o].actions?.length??0;n===a.actions.length-1&&i===l-1&&(t=!0),r.conditionalActions?.[o].actions?.splice(i+1,0,e)}else{let n=$.path[0]+1;n===a.actions.length&&(t=!0),a.actions?.splice(n,0,e)}}else a.actions?.push(e);e3=a.id?a.id:p.Hr}else a.actions=[e],e3=a.id?a.id:p.Hr;if(a.stateManagementVersion=1,X){let e=[...$.path];e[e.length-1]+=1,n=new tO.Op([...e])}else n=new tO.Op([a.actions.length-1])}let i=ea.map(e=>ee.find(t=>t.id===e.id)??e);if(w.Y5.updateSelectionProperties({prototypeInteractions:i}),a||X){var r=[];i[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&r.push(new tO.Op([t]))}),eh(r)}eM&&(!X||t)&&eM(!0),eV&&eV(n),O((0,L._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,p.dI)(e3),page_id:eG}}))},renderButton:!0,recordingKey:en.dJ,isNestedInConditional:X&&$.isConditional()}),e5=ee.some(e=>void 0!==e.actions&&e.actions?.length>1),e7=!$.isConditional()&&!e5,e8=o.createElement(r.K,{onClick:()=>eJ($),"aria-label":(0,T.t)("proto.prototype_panel.delete"),disabled:e7,recordingKey:v.Pt(en.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.delete"),"data-tooltip-type":R.Ib.TEXT}},o.createElement(I.U,{svg:nL.A},o.createElement(s.O,null))),e9=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},e4," ",e8),te=o.createElement(eA.c.Provider,{value:eA.P.LEFT},o.createElement("div",{className:eb?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:ev,style:eb?{width:`${ap(e_).leftWidthPct}%`}:void 0},o.createElement(nQ,{category:e,recordingKey:en.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:n3}),e$,o.createElement("div",{className:n3}),o.createElement(o.Fragment,null,e9))),tt=eo.length>0?o.createElement(eA.c.Provider,{value:eA.P.RIGHT},o.createElement(N.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:eb?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},o.createElement(a_,{selectedActionIndex:es,handleExpandUI3:(e,t)=>{!t&&eo.length>1?eh(ey.filter(t=>!t.equals(e))):ey.find(t=>t.equals(e))||eh([...ey,new tO.Op(e)])},autoOpenVariablePicker:eF,autoOpenExpressionBuilder:eB,setAutoOpenExpressionBuilder:eW}))):null,tn=o.useRef(ac),[,ta]=(0,l.i)({disabled:!eb,onDragStart(){ev.current&&(tn.current=ev.current.getBoundingClientRect().width)},onDrag(e){if(ev.current&&tn.current){let t=ap(e_),n=tn.current+e.delta.x,o=n/t.width*100;n<ac?o=ac/t.width*100:o>ad&&(o=ad),ev.current.style.width=`${o}%`,a={...t,leftWidthPct:o}}}}),to=m()({"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2":!0,"prototype_interaction_edit_modal--ui3TwoColInnerContainerResizable--5GNsT":eb}),ti=X?o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},o.createElement("div",{className:to},te,o.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},eb&&o.createElement("div",{...ta({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),tt),e_&&o.createElement(n9,{transition:eE,recordingKey:v.Pt(en.dJ,"stateManagementVersionPanel"),updateSelectionProperties:el,stateManagementVersion:eg,selectedInteractions:ee})):e$;return o.createElement(Q.ht.Provider,{value:o.useMemo(()=>({autoCloseOnScroll:!z}),[z])},o.createElement(V.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:eU},o.createElement(t9.vx,{ref:B,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>o.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},o.createElement(aE,{category:e,recordingKey:en.dJ,createActionTrigger:e4,closeButton:t})),containerClassName:m()({[nZ]:!eb,[n0]:X&&!(0,g.kc)().prototype_modal_resize,[n1]:eb,[n2]:!(0,g.kc)().prototype_modal_resize&&X&&e_,[n6]:q,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":eS,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!eS,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!G,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!G,"prototype_interaction_edit_modal--hideModal--RSp-R":eN}),contentContainerClassName:m()({[nZ]:!eb,[n0]:X&&!(0,g.kc)().prototype_modal_resize,[n1]:eb,[n2]:!(0,g.kc)().prototype_modal_resize&&X&&e_,[n6]:q}),headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:ek,headerSize:"small",onClose:as,recordingKey:"interactionDetailsModal",arrowPosition:h?void 0:t9.F_.TOP,arrowRelativeX:h?void 0:ew/2,onDragStart:()=>{eP(!0),eC()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>H(!0),allowResizeHeight:eb,allowResizeWidth:eb,fullFrame:eb,minWidth:eb?440:void 0,minHeight:eb?e_?369:320:void 0,maxWidth:eb?800:void 0,maxHeight:eb?800:void 0,initialHeight:eb?ap(e_).height-t9.uF:void 0,initialWidth:eb?ap(e_).width:void 0,onResize:eb?e=>{a={...ap(e_),height:e.height,width:e.width}}:void 0},G?ti:e$)))});function a_({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i}){let r=(0,J.HS)(),{selectedInteractions:l,mergedActions:s,makeUpdateSelectionPropertiesForActionIndex:c,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:p}=(0,J.Ay)(r),u=e.path[0],m=d(u),_=c(u),E=(0,en.iC)(l),f=p.interactionEvent.interactionType??"NONE",y=(0,g.kc)().prototype_modal_resize;if(e.isConditional()){let n=e.path[1],r=e.path[2],c=s[u],d=((0,O.hS)(c.conditionalActions)&&c.conditionalActions?c.conditionalActions:[])[n],p=d.actions?.[r];return p?o.createElement("div",{className:y?n5:n4},o.createElement(nR,{key:r,updateMultipleDestinationNodes:m.appendActionIndex(n).appendActionIndex(r),action:p,recordingKey:v.Pt(en.dJ,en.Qe,en.eG,u),updateSelectionProperties:_.appendActionIndex(n).appendActionIndex(r),onDeleteAction:h.lQ,interactionType:f,actionIndexPath:e.path,numActions:s.length,isNestedInConditional:!0,stateManagementVersion:E,selectedInteractions:l,onDrop:h.lQ,onSelect:h.lQ,onExpand:h.lQ,selectedActionIndex:e,expandedRows:[e],autoOpenVariablePicker:t,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i,isNarrowPanel:!0})):null}return o.createElement("div",{className:y?n5:n4},o.createElement(nR,{key:u,updateMultipleDestinationNodes:m,action:s[u],recordingKey:v.Pt(en.dJ,en.Qe,en.eG,u),updateSelectionProperties:_,onDeleteAction:h.lQ,interactionType:f,actionIndexPath:[u],numActions:s.length,isNestedInConditional:!1,stateManagementVersion:E,selectedInteractions:l,onDrop:h.lQ,onSelect:h.lQ,onExpand:n,selectedActionIndex:e,autoOpenVariablePicker:t,expandedRows:[e],autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i,isNarrowPanel:!0}))}function aE({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let l=(0,i.wA)(),{selectedInteractions:s}=(0,J.Ay)(e),p=(0,en.YT)(),u=p===en.Oz.TWO_COL,m=p===en.Oz.SINGLE_COL,_=(()=>{if(1!==s.length)return 0;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return d.X3B.getMatchingInteractions(y.d(t)).length})(),E=(0,g.kc)().prototype_hide_matching_noodles&&1===s.length&&_>1&&o.createElement(r.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==s.length)return;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=d.X3B.getMatchingInteractions(y.d(t));d.glU.selectInteractionsAndSourceNodes(n);let a=(0,T.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});w.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),l((0,L._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,T.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:_}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==s.length)return;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=d.X3B.getMatchingInteractions(y.d(t));d.glU.hoverInteractions(n)},onMouseLeave:()=>d.glU.hoverInteractions([]),"data-tooltip":(0,T.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:_}),"data-tooltip-type":R.Ib.TEXT}},o.createElement(I.U,{svg:al.A},o.createElement(c.A,null))),f=o.createElement(nQ,{category:e,recordingKey:t,headerButtons:o.createElement(o.Fragment,null,E,a,n)}),h=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,T.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},E,n)),v=o.createElement(o.Fragment,null,(0,T.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD"},E,a,n));return u?h:m?v:f}let ag=e=>e.pickerShown?.id===A.o$?e.pickerShown:null},304657:(e,t,n)=>{let a,o,i,r;n.d(t,{k:()=>D});var l=n(411855),s=n(188507),c=n(243742),d=n(752553),p=n(572206),u=n(47506),m=n(941381),_=n(225266),E=n(738269),g=n(902139),f=n(672517),y=n(809831),h=n(728325),v=n(813648),b=n(318812),N=n(239671),I=n(231472),T=n(992303),A=n(384775),x=n(818198),w=n(760445),S=n(76158),P=n(746806),O=n(279532),C=n(301280),k=n(297757);function D(){let e=(0,s.d4)(e=>e.universalInsertModal),t=(0,s.d4)(e=>e.mirror.appModel.showUi),{fdPreviewResource:n,initialFdView:D,initialFdResourceTab:M}=e,R=n?.type,{activeTab:V,setCurrentViewOrTab:K,currentView:U}=function(){let{initialFdResourceTab:e,initialFdView:t}=(0,s.d4)(e=>e.universalInsertModal),[n,a]=l.useState(e||o||S.s.COMPONENT),[c,d]=l.useState(e===S.s.PLUGIN&&t||i||"recents_and_saved"),[p,u]=l.useState(e===S.s.WIDGET&&t||r||"recents_and_saved"),m=l.useCallback(e=>{e===S.s.PLUGIN?i=c:e===S.s.WIDGET&&(r=p)},[c,p]),_=n===S.s.PLUGIN?c:p,E=l.useCallback(({newView:e,newTab:t})=>{let i=t===S.s.PLUGIN?c:t===S.s.WIDGET?p:void 0;e&&i!==e&&(m(n),(t||n)===S.s.PLUGIN?d(e):(t||n)===S.s.WIDGET&&u(e)),t&&n!==t&&(m(n),o=n,a(t))},[n,c,p,m]);return l.useEffect(()=>{E({newView:t,newTab:e})},[e,t]),l.useEffect(()=>{o=n,m(n)},[n,m]),l.useMemo(()=>({activeTab:n,currentView:_,setCurrentViewOrTab:E}),[n,_,E])}(),F="ui3"===(0,c.DP)().version,B=(0,s.wA)(),W=l.useRef(null),[H]=l.useState(D?"":a||"");l.useEffect(()=>{(0,u.YQ)({id:"figma-inserts-opened"}),(0,u.YQ)({id:T.ko})},[]);let z=(0,A.Au)();l.useEffect(()=>{z&&B(g.eo())}),l.useEffect(()=>{a=H},[H]),l.useEffect(()=>B(_.aq()),[B]),(0,d.IT)((0,m.se)()),(0,d.IT)((0,m.fd)()),l.useEffect(()=>{K({newTab:R||M})},[M,R]);let G=(0,y.E3)(),[Y,q]=l.useState(),J=F?w.tS:w.Zv;(0,v.J$)(e.pinned===I.t.NOT_PINNED,W,J);let X=(0,w.CK)(),$=(0,w.CG)(),{bounds:j,showLeftPinBound:Q,setShowLeftPinBound:Z,shouldSnapToPosition:ee,setPinned:et}=(0,x.C)(L,q,e.pinned,X,$,e.showing),en=(0,v.LR)(),ea=(0,b.Um)(),eo=l.useCallback(e=>{e.stopPropagation(),ea&&B(E.oB())},[B,ea]),ei=l.useMemo(()=>({activeTab:V,viewResource:e=>{B(g.IN({fdPreviewResource:e}))},closeResource:()=>{B(g.IN({fdPreviewResource:void 0}))},closeModal:en,pinModal:et,setCurrentViewOrTab:K,currentView:U}),[V,en,et,B,K,U]),er=l.useCallback(e=>{h.VU.get("set-tool-default","toolbar")(),B(g.jy({pinned:I.t.PINNED})),eo(e)},[B,eo]),el=l.useCallback(()=>{Q&&et()},[Q,et]);if(!e.showing)return null;let es={height:"auto",overflow:"hidden"};return(e.pinned!==I.t.NOT_PINNED||F||(es.borderTopLeftRadius="0px"),G===N.nT.DevHandoff)?null:l.createElement(f.fu,{name:"universal-insert"},e.pinned===I.t.PINNED&&Q&&l.createElement("div",{className:C.kV,style:{left:X.x,top:X.y,width:w.AN}}),l.createElement(w.B0.Provider,{value:ei},l.createElement(P.vx,{initialPosition:Y||new p.Mi(e.initialX,e.initialY),initialWidth:w.AN,bounds:j,onEnterBound:()=>{F||Z(!0)},onLeaveBound:()=>{Z(!1)},canResetPosition:ee,onClose:en,onDragStart:er,onDragEnd:el,minTopMargin:t?void 0:0,onClick:eo,ref:W,containerClassName:e.pinned===I.t.PINNED_AND_DOCKED_LEFT?k.gC:k.jT,frameStyle:es},l.createElement(O.z,null))))}function L(){return{x:-w.AN,y:0,width:2*w.AN+w.wR,height:window.innerHeight}}}}]);

//# debugId=b73694f2-e9d8-5d4a-986c-521d1b7e8c84

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/30be7baf517aa9f046dbf0b4d280cfb5a9c0825f/fullscreen-0378c4336c0de118.min.js.map